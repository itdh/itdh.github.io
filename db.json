{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"themes/butterfly/source/css/var.styl","path":"css/var.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/css/index.styl","path":"css/index.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/chocolate.js","path":"js/chocolate.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/css/modify.styl","path":"css/modify.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/cursor.js","path":"js/cursor.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/jquery.min.js","path":"js/jquery.min.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/avatar.jpg","path":"img/avatar.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/404.jpg","path":"img/404.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/bg.jpg.bak","path":"img/bg.jpg.bak","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/bg.jpg","path":"img/bg.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/favicon.png","path":"img/favicon.png","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/cover/0823dd54564e9258d5c23fbe4164e654cebf4eda.jpeg","path":"img/cover/0823dd54564e9258d5c23fbe4164e654cebf4eda.jpeg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/cover/0ff41bd5ad6eddc46af309bbe43d81f153663348.jpeg","path":"img/cover/0ff41bd5ad6eddc46af309bbe43d81f153663348.jpeg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/cover/4ec2d5628535e5dd1f21ecd9ab2090e3cf1b629e.jpeg","path":"img/cover/4ec2d5628535e5dd1f21ecd9ab2090e3cf1b629e.jpeg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/cover/1c950a7b02087bf43d2bbaa52f35602013dfcfae.jpeg","path":"img/cover/1c950a7b02087bf43d2bbaa52f35602013dfcfae.jpeg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/cover/PostgreSQL定位问题时常用SQL.jpeg","path":"img/cover/PostgreSQL定位问题时常用SQL.jpeg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/cover/Spring 之依赖注入源码解析.jpeg","path":"img/cover/Spring 之依赖注入源码解析.jpeg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/cover/arthas.jpg","path":"img/cover/arthas.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/cover/default.jpg","path":"img/cover/default.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/cover/使用-IDEA-构建-Spring5-3-10-源码.jpg","path":"img/cover/使用-IDEA-构建-Spring5-3-10-源码.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/cover/使用docker-compose安装常用中间件.jpeg","path":"img/cover/使用docker-compose安装常用中间件.jpeg","modified":1,"renderable":1}],"Cache":[{"_id":"source/_posts/Arthas.md","hash":"d4a6480429e4156144b4655ba04f6902817d1798","modified":1685688220215},{"_id":"source/_posts/PostgreSQL定位问题时常用SQL.md","hash":"512c27b8be95624f079dc72a6d8dbba2a6c8529c","modified":1690872772216},{"_id":"source/_posts/Spring之依赖注入源码解析.md","hash":"10c77a41535119acfcc383ac3f152c6f4499c3dc","modified":1690872454184},{"_id":"source/_posts/使用docker-compose安装常用中间件.md","hash":"0cc648cb5130cd5fea25f4c04c024e891074ea71","modified":1690872791233},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码.md","hash":"a2e7a617a15c84fe9ecb1f48156d63d69cf8a6dd","modified":1686053429100},{"_id":"source/categories/index.md","hash":"ef045b765e3a0154a854ffb6242819fa1df06912","modified":1685607320923},{"_id":"source/tags/index.md","hash":"3083c36df3cb1025f035856d0552ee4c51ae7327","modified":1685676887490},{"_id":"source/_posts/使用docker-compose安装常用中间件/image-20230612160800809.png","hash":"264f80527ae40159c7a6f19b47610245ea4d18d0","modified":1686557280813},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515617531-5c3d6c65-6af1-42be-8572-11f4717c6fa4.png","hash":"7572b8afad091e1b16a7add30e983323d21fe9a2","modified":1685674842516},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515451815-c83a27f4-385a-42d9-8156-a24808c36be0.png","hash":"faae86f66bec87027b3685914616702ce0767542","modified":1685674776821},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515622726-73454c6c-2a1f-448b-8e14-6080485a8a56.png","hash":"f53ac082af6a492b732cc5e79a7e432e43ae706b","modified":1685674911625},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515909414-1dbb5934-710e-4d30-bc59-a1e4b47d51ce.png","hash":"05218a0051c52526b146eca9dfd2c06e7d40c154","modified":1685675012235},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515903538-7acd0039-35d6-48d3-8535-bd3659e3bbc8.png","hash":"b6d0993138445d9682091a5bc2ba6181a24484fe","modified":1685674989876},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515894900-3d9a036b-beaf-4505-a394-039d87d10d82.png","hash":"9a2d0a3e61303bfb6b73ca7126c572f9525187f5","modified":1685674975463},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515713115-b417e4cf-fa0e-4376-b06b-b524e144cbe9.png","hash":"7bc89282df9ae24af8b306299b4a716a37f437f5","modified":1685674933106},{"_id":"source/_posts/Arthas/1685446464667-5b9471f9-ff69-4e3e-a665-9235f11676cb.png","hash":"a7c35810237beba717f0a7a71f3489cc937916ca","modified":1685607730201},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515818638-aa54c79e-7e57-4441-9757-ea00a0bf6274.png","hash":"1496c39e911a141310a79b953cf82174f0d64486","modified":1685674955141},{"_id":"themes/butterfly/README.md","hash":"46869886ed9ce4beedaad5b064789fd15861566e","modified":1685619880073},{"_id":"themes/butterfly/LICENSE","hash":"c8bc7df08db9dd3b39c2c2259a163a36cf2f6808","modified":1685619880073},{"_id":"themes/butterfly/README_CN.md","hash":"b95c89559c429049caa3f9f461a2b41ae98c0d68","modified":1685619880074},{"_id":"themes/butterfly/_config.yml","hash":"da435f48cf76231890f26a85288d03f57b654a39","modified":1685619880075},{"_id":"themes/butterfly/plugins.yml","hash":"9c0947dc1c5daa6779cba36865a94068d58c6f46","modified":1685619880125},{"_id":"themes/butterfly/package.json","hash":"3fb8ed0d811684fd030ae08cbf49743e4d61e017","modified":1685619880125},{"_id":"themes/butterfly/languages/default.yml","hash":"d444cbb5c5456aaf27f3fb1b4308634689c7bb53","modified":1685619880076},{"_id":"themes/butterfly/languages/en.yml","hash":"4957fd976c99745d3aa24000a85b2955e8d1cf81","modified":1685619880076},{"_id":"themes/butterfly/layout/archive.pug","hash":"115fa5ee8864e5c97549eff91a17c66101d724ab","modified":1685619880078},{"_id":"themes/butterfly/languages/zh-TW.yml","hash":"145ec301db185c8a06de1f34a77ca391e1d2729b","modified":1685619880077},{"_id":"themes/butterfly/layout/category.pug","hash":"bf979aec88d78b644fc5d31518f8679ad7625792","modified":1685619880079},{"_id":"themes/butterfly/languages/zh-CN.yml","hash":"cc8672dc0c2762b694f689cbeb6e34810f1c194e","modified":1685619880077},{"_id":"themes/butterfly/layout/post.pug","hash":"fdbb508b5e6dec30fb8753c5a7fdd494410c4fc0","modified":1685619880124},{"_id":"themes/butterfly/layout/index.pug","hash":"648dcbdb3d145a710de81c909e000e8664d2ac9c","modified":1685619880123},{"_id":"themes/butterfly/layout/tag.pug","hash":"4bb5efc6dabdf1626685bf6771aaa1467155ae86","modified":1685619880124},{"_id":"themes/butterfly/layout/page.pug","hash":"bf2d6c6d2d156777b55292e51be02b0b3acf0af8","modified":1685619880123},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/bug_report.yml","hash":"92683cb785a29e5a73701b33dba73d3afac268c3","modified":1685619880070},{"_id":"themes/butterfly/scripts/modify.js","hash":"1b66bc53fb101c2679174c42997a7680f4594428","modified":1685672467703},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/feature_request.yml","hash":"6e0f9470b18bd37d4891282ac73d61676b040e8c","modified":1685619880071},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/config.yml","hash":"d9ff4bad9c9664e12729c7a531169a05698a3fd1","modified":1685619880071},{"_id":"themes/butterfly/.github/workflows/publish.yml","hash":"e320b40c051bae1549156cd5ea4a51383cf78598","modified":1685619880072},{"_id":"themes/butterfly/.github/workflows/stale.yml","hash":"4040c76547e270aaf184e9b219a44ca41bbb1b9f","modified":1685619880073},{"_id":"themes/butterfly/layout/includes/footer.pug","hash":"e65a87db69b83b4a7d34c70f83966439ea848ed4","modified":1685621081787},{"_id":"themes/butterfly/layout/includes/404.pug","hash":"aace9ddff469de4226e47a52ede1c81e66d66d5c","modified":1685619880080},{"_id":"themes/butterfly/layout/includes/additional-js.pug","hash":"50eea5aa78cdeb6c72dd22f0aeabc407cc0f712e","modified":1685619880080},{"_id":"themes/butterfly/layout/includes/head.pug","hash":"b50b0afdc41c54279587410c3f82c8cb3c5ff46d","modified":1685619880081},{"_id":"themes/butterfly/layout/includes/layout.pug","hash":"96df62e34661d8ca4a45267286127479e5178a79","modified":1685619880087},{"_id":"themes/butterfly/layout/includes/rightside.pug","hash":"5f96a28a4eac046b68ccc10e8c24ab01525e3245","modified":1685619880092},{"_id":"themes/butterfly/layout/includes/pagination.pug","hash":"c5c58714fb3cb839653e5c32e6094784c8662935","modified":1685619880091},{"_id":"themes/butterfly/layout/includes/sidebar.pug","hash":"4f41fc46410e1e3018ff87e1d1a5c28be7258119","modified":1685619880093},{"_id":"themes/butterfly/source/css/var.styl","hash":"e1e37a2e932163886789b72624c7348545003f1d","modified":1685619880153},{"_id":"themes/butterfly/source/css/index.styl","hash":"c7924868adcb046b46498626a9223c7a7b3f2e30","modified":1685619880152},{"_id":"themes/butterfly/source/js/chocolate.js","hash":"c879690f3314dc8347ed24ae57c775be61321eb4","modified":1685669709643},{"_id":"themes/butterfly/source/css/modify.styl","hash":"baaa81fab849d83b560b43fba332585ec54545ca","modified":1685672226002},{"_id":"themes/butterfly/source/js/cursor.js","hash":"63c059d5b370f9fd017e01c679ccb2a2ce283940","modified":1685669733362},{"_id":"themes/butterfly/source/js/main.js","hash":"90ec69ce7a52107bb3f42516187b40d344a8becb","modified":1685619880155},{"_id":"themes/butterfly/source/js/tw_cn.js","hash":"a102a6cacf7b20183946a54580867a964f3674c4","modified":1685619880156},{"_id":"themes/butterfly/source/js/utils.js","hash":"7060321e092179a159acfa57cc7ce70691f49e33","modified":1685619880157},{"_id":"themes/butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1685619880153},{"_id":"themes/butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1685619880153},{"_id":"themes/butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1685619880154},{"_id":"themes/butterfly/scripts/helpers/aside_archives.js","hash":"4f712b4ea383b59a3122683db1d54c04a79ccc5d","modified":1685619880128},{"_id":"themes/butterfly/scripts/filters/random_cover.js","hash":"a3323fcb11cfd3f3e21230737341beb5d76b40aa","modified":1685619880128},{"_id":"themes/butterfly/scripts/filters/post_lazyload.js","hash":"5fd6c9659262dc8f61d87866d0417fd534292c88","modified":1685619880128},{"_id":"themes/butterfly/scripts/helpers/aside_categories.js","hash":"376e1884ea764404c38b1e73b16de0358ece519e","modified":1685619880129},{"_id":"themes/butterfly/scripts/helpers/findArchiveLength.js","hash":"8ff03b35385f9162e1eb54dceb5fa7f781306caf","modified":1685619880129},{"_id":"themes/butterfly/scripts/helpers/inject_head_js.js","hash":"7222102f9919f8e961d4f1688425845fb7775ada","modified":1685619880130},{"_id":"themes/butterfly/scripts/events/cdn.js","hash":"7864ba45716c51aef8d8b04fd4bc212e0008ce3b","modified":1685619880126},{"_id":"themes/butterfly/scripts/helpers/page.js","hash":"6005907245dd74b153f03afdccfae1abb66bb482","modified":1685619880130},{"_id":"themes/butterfly/scripts/events/404.js","hash":"f1d1c378356b776e9b2a8411e6dca88dc8c3245c","modified":1685619880126},{"_id":"themes/butterfly/scripts/helpers/related_post.js","hash":"76343ac8422c9c8539082e77eda6ffee4b877eb2","modified":1685619880131},{"_id":"themes/butterfly/scripts/events/comment.js","hash":"95479790234c291b064d031577d71214cdd1d820","modified":1685619880126},{"_id":"themes/butterfly/scripts/events/init.js","hash":"72605a00bf623b6cbc9fa0f90069ea2ae584c5c0","modified":1685619880126},{"_id":"themes/butterfly/scripts/events/welcome.js","hash":"f59e10305fef59ea3e62a7395106c0927582879d","modified":1685619880127},{"_id":"themes/butterfly/scripts/events/stylus.js","hash":"218add7e9b39b6fb6e69921abb9e44891a6cc3ce","modified":1685619880127},{"_id":"themes/butterfly/scripts/tag/button.js","hash":"44cca49ddc76921bb455465ef912cab46c993cef","modified":1685619880131},{"_id":"themes/butterfly/scripts/tag/gallery.js","hash":"b8d95ac1851c37f1dce4b1dd4a1d3ffdff501a03","modified":1685619880132},{"_id":"themes/butterfly/scripts/tag/inlineImg.js","hash":"7641adb0d520c5ff29dd36fc1fb8617c52ecc9fb","modified":1685619880133},{"_id":"themes/butterfly/scripts/tag/flink.js","hash":"3ba7677969ff01fab06fc6713455ddc6861f0024","modified":1685619880132},{"_id":"themes/butterfly/scripts/tag/label.js","hash":"551f1b8edc973bd8afc5cce2eae546f002fa84c3","modified":1685619880133},{"_id":"themes/butterfly/scripts/tag/hide.js","hash":"e01a3967e5884881bab858b11635457df412de80","modified":1685619880132},{"_id":"themes/butterfly/scripts/tag/mermaid.js","hash":"fd683ccc090db3122d77c7ee73e8d35dc8735ee3","modified":1685619880133},{"_id":"themes/butterfly/scripts/tag/note.js","hash":"56a5d41487d74654b75305c5325167a116495900","modified":1685619880134},{"_id":"themes/butterfly/scripts/tag/score.js","hash":"fc5a80707cf522378be3cf8638ef78bccc88c510","modified":1685619880134},{"_id":"themes/butterfly/scripts/tag/timeline.js","hash":"4c7056d3cd56f10bd209d2ba4d3cc2027aad1440","modified":1685619880134},{"_id":"themes/butterfly/scripts/tag/tabs.js","hash":"08ea00791bd4738952234cb5d8360e119df6f875","modified":1685619880134},{"_id":"themes/butterfly/layout/includes/head/analytics.pug","hash":"c7666a10448edd93f5ace37296051b7670495f1b","modified":1685619880082},{"_id":"themes/butterfly/layout/includes/head/Open_Graph.pug","hash":"c8dbdfe6145a0bc6f7691c9551be8169a2698f0a","modified":1685619880081},{"_id":"themes/butterfly/layout/includes/head/config_site.pug","hash":"bd5dd5452e28a4fe94c3241a758ec6f4fdb7a149","modified":1685619880082},{"_id":"themes/butterfly/layout/includes/head/config.pug","hash":"f5207840c96df6b26ad227433babca4f8c362624","modified":1685619880082},{"_id":"themes/butterfly/layout/includes/head/google_adsense.pug","hash":"f29123e603cbbcc6ce277d4e8f600ba67498077c","modified":1685619880082},{"_id":"themes/butterfly/layout/includes/head/preconnect.pug","hash":"fd55f0e09827ef40c53c48d184a553464aac3e03","modified":1685619880084},{"_id":"themes/butterfly/layout/includes/head/noscript.pug","hash":"72efaa09ff60843567458bd54152e06f0cb2757e","modified":1685619880083},{"_id":"themes/butterfly/layout/includes/head/pwa.pug","hash":"6dc2c9b85df9ab4f5b554305339fd80a90a6cf43","modified":1685619880084},{"_id":"themes/butterfly/layout/includes/head/site_verification.pug","hash":"5168caadc4cf541f5d6676a9c5e8ae47a948f9ad","modified":1685619880084},{"_id":"themes/butterfly/layout/includes/header/index.pug","hash":"e9f952f1b66a0116fccb812b14db0f229666e586","modified":1685619880085},{"_id":"themes/butterfly/layout/includes/header/menu_item.pug","hash":"ca8bcd90ad9467819330bfe7c02b76322754bccf","modified":1685619880085},{"_id":"themes/butterfly/layout/includes/header/nav.pug","hash":"962ee70a35e60a13c31eea47d16b9f98069fe417","modified":1685619880086},{"_id":"themes/butterfly/layout/includes/header/post-info.pug","hash":"50b4b9c7f6a4771910be4198639cfcfc6d7b8925","modified":1685619880086},{"_id":"themes/butterfly/layout/includes/header/social.pug","hash":"7a641b5dd45b970e1dafd1433eb32ea149e55cf2","modified":1685619880086},{"_id":"themes/butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1685619880090},{"_id":"themes/butterfly/layout/includes/page/default-page.pug","hash":"e9459f122af7b733398578f9f0f8ab3c5e12a217","modified":1685619880090},{"_id":"themes/butterfly/layout/includes/page/flink.pug","hash":"a60d9cc9083142e3d92b618561abd557fcab502b","modified":1685619880090},{"_id":"themes/butterfly/layout/includes/page/tags.pug","hash":"12be059c536490af216a397e8f2a7abbf6d4610e","modified":1685619880091},{"_id":"themes/butterfly/layout/includes/mixins/article-sort.pug","hash":"9155f01d4c644a2e19b2b13b2d3c6d5e34dd0abf","modified":1685619880089},{"_id":"themes/butterfly/layout/includes/mixins/post-ui.pug","hash":"39c205027296dbd9fc9eb3cfd9d033bc5bd031b7","modified":1685619880089},{"_id":"themes/butterfly/layout/includes/loading/fullpage-loading.pug","hash":"f530f8c2b0a7d048cdb8933b0fbe5380843006ff","modified":1685619880088},{"_id":"themes/butterfly/layout/includes/loading/index.pug","hash":"00ae419f527d8225a2dc03d4f977cec737248423","modified":1685619880088},{"_id":"themes/butterfly/layout/includes/loading/pace.pug","hash":"a6fde4835d6460ce7baf792fd5e1977fad73db25","modified":1685619880088},{"_id":"themes/butterfly/layout/includes/post/post-copyright.pug","hash":"cc1f7ae8a7ce5445277215821092e712ec8cc296","modified":1685619880092},{"_id":"themes/butterfly/layout/includes/post/reward.pug","hash":"594626a18b7efbf771232855dfbce143fb244bc6","modified":1685619880092},{"_id":"themes/butterfly/layout/includes/third-party/aplayer.pug","hash":"e939344fd389aeb11864ee697d5fd9b036d8325f","modified":1685619880094},{"_id":"themes/butterfly/layout/includes/third-party/effect.pug","hash":"4e37535c63149708ecbedb262336014524ad8723","modified":1685619880107},{"_id":"themes/butterfly/layout/includes/third-party/pangu.pug","hash":"f0898509da70388b5c532f19e762756d74080200","modified":1685619880113},{"_id":"themes/butterfly/layout/includes/third-party/pjax.pug","hash":"558456d85100606c14e0a59801b0ee2ee67aadd9","modified":1685619880113},{"_id":"themes/butterfly/layout/includes/third-party/prismjs.pug","hash":"08979afbfecb4476a5ae8e360947b92624d285b8","modified":1685619880113},{"_id":"themes/butterfly/layout/includes/third-party/subtitle.pug","hash":"0211485f2387b2b63673d247a46109e208f353ca","modified":1685619880118},{"_id":"themes/butterfly/layout/includes/widget/card_ad.pug","hash":"a8312b527493dabbadbb1280760168d3bc909a3b","modified":1685619880119},{"_id":"themes/butterfly/layout/includes/widget/card_archives.pug","hash":"73d33b6930e7944187a4b3403daf25d27077a2dd","modified":1685619880120},{"_id":"themes/butterfly/layout/includes/widget/card_announcement.pug","hash":"21e019bdc3b1e796bb00976bb29af2d51f873624","modified":1685619880119},{"_id":"themes/butterfly/layout/includes/widget/card_author.pug","hash":"08641633d38903351a7424baf9893d9038ba057d","modified":1685619880120},{"_id":"themes/butterfly/layout/includes/widget/card_bottom_self.pug","hash":"1dba77d250eeebfb6e293d504352c7e9ea31980b","modified":1685619880120},{"_id":"themes/butterfly/layout/includes/widget/card_categories.pug","hash":"66e383b4ef374951eb87dd1bf4cdb7a667193fb5","modified":1685619880121},{"_id":"themes/butterfly/layout/includes/widget/card_post_toc.pug","hash":"59d979702fa21d960443824198614d63aaf69662","modified":1685619880121},{"_id":"themes/butterfly/layout/includes/widget/card_newest_comment.pug","hash":"c02b1779bd0ebca6749f195be096b6ca574bfa29","modified":1685619880121},{"_id":"themes/butterfly/layout/includes/widget/card_recent_post.pug","hash":"bb842d2aa6469d65bf06af1372f0a19a9e4ef44c","modified":1685619880122},{"_id":"themes/butterfly/layout/includes/widget/card_tags.pug","hash":"842b772a387b576550fa127030e1c2e9bf65716d","modified":1685619880122},{"_id":"themes/butterfly/layout/includes/widget/card_top_self.pug","hash":"7b5ae404a1205546b7de4be42291315cf918f2b3","modified":1685619880122},{"_id":"themes/butterfly/layout/includes/widget/card_webinfo.pug","hash":"12185713f9ca08984fc74e3b69d8cd6828d23da8","modified":1685619880122},{"_id":"themes/butterfly/layout/includes/widget/index.pug","hash":"ba94ceb40d7c81372a76103d958dcc2cc6a84f00","modified":1685619880123},{"_id":"themes/butterfly/source/css/_global/function.styl","hash":"6a7a926b72c5083aa14051a0eca8d49e1c6261f1","modified":1685619880135},{"_id":"themes/butterfly/source/css/_global/index.styl","hash":"0e2f1d131ed0e9d8422057bd68f22344f9d68817","modified":1685619880136},{"_id":"themes/butterfly/source/css/_highlight/highlight.styl","hash":"e43017dbc73e0ce95dcfcb9dfb4fcce0c1715dd4","modified":1685619880136},{"_id":"themes/butterfly/source/css/_highlight/theme.styl","hash":"3c178608406c31d768af355ef1d7326da37cc75f","modified":1685619880139},{"_id":"themes/butterfly/source/css/_layout/chat.styl","hash":"792a04d36de32f230ca3256ad87a90fe8392f333","modified":1685619880140},{"_id":"themes/butterfly/source/css/_layout/aside.styl","hash":"3969f599e8657adf8c3ce287d83f5d0a23f276a9","modified":1685619880140},{"_id":"themes/butterfly/source/css/_layout/comments.styl","hash":"0abe05309a186682772a94e5e759b63f8028e61a","modified":1685619880140},{"_id":"themes/butterfly/source/css/_layout/footer.styl","hash":"077ce6932261cf51696834a25d1d988fec6cd7d0","modified":1685619880140},{"_id":"themes/butterfly/source/css/_layout/head.styl","hash":"d33f2d9001a82d9a72d6f4088743762fbd016e4c","modified":1685619880141},{"_id":"themes/butterfly/source/css/_layout/pagination.styl","hash":"bd099f7d3adef4b7edd24c0a25a07415b156e587","modified":1685619880142},{"_id":"themes/butterfly/source/css/_layout/loading.styl","hash":"f0b01bbf321c2c24fdccaee367dd9fd448031a72","modified":1685619880141},{"_id":"themes/butterfly/source/css/_layout/post.styl","hash":"92fd3128edc339ce570c2b1b134b9fc99e830789","modified":1685619880142},{"_id":"themes/butterfly/source/css/_layout/relatedposts.styl","hash":"6dcf19c0933c8828a439f801b0f4b256447dec07","modified":1685619880143},{"_id":"themes/butterfly/source/css/_layout/reward.styl","hash":"b5ba2c3339ad406ce611d12d3f8cc84f864fbc03","modified":1685619880143},{"_id":"themes/butterfly/source/css/_layout/rightside.styl","hash":"824b2b2d2ee72583b9e009c0bb13e29e806534cc","modified":1685619880143},{"_id":"themes/butterfly/source/css/_layout/third-party.styl","hash":"d13bda30a5db542f7ff24c7938659c3869758c64","modified":1685619880144},{"_id":"themes/butterfly/source/css/_search/algolia.styl","hash":"37db99299af380e9111dce2a78a5049b301b13e0","modified":1685619880148},{"_id":"themes/butterfly/source/css/_layout/sidebar.styl","hash":"7e9b65dcae7ac54e0183bc841fea0f4bd4d78e5c","modified":1685619880144},{"_id":"themes/butterfly/source/css/_search/index.styl","hash":"eda63ed2c2e461883090c0b154368e353be3b011","modified":1685619880148},{"_id":"themes/butterfly/source/css/_search/local-search.styl","hash":"cf90ea339fbb7f345212319627fcd68964024e40","modified":1685619880148},{"_id":"themes/butterfly/source/css/_mode/readmode.styl","hash":"d072872714854cdc3d2975fb131ac31cb82b13e3","modified":1685619880145},{"_id":"themes/butterfly/source/css/_mode/darkmode.styl","hash":"01ba993e7bd384827c0f5499ae0c5f82e068d844","modified":1685619880144},{"_id":"themes/butterfly/source/css/_page/404.styl","hash":"a7223a8fcc4fa7b81e552c9a2554be7df9de312e","modified":1685619880145},{"_id":"themes/butterfly/source/css/_page/archives.styl","hash":"5dd1ba997741d02894ff846eda939ad8051c0bb2","modified":1685619880146},{"_id":"themes/butterfly/source/css/_page/categories.styl","hash":"68bc8cbea25dbb3cdc170f09f9b43ce130547717","modified":1685619880146},{"_id":"themes/butterfly/source/css/_page/common.styl","hash":"bfa8bdd6b014018551ce0b83e962f61b3b25e2a5","modified":1685619880146},{"_id":"themes/butterfly/source/css/_page/homepage.styl","hash":"d83389e07f8851f1b9afafe0eacd1bf10ad334ef","modified":1685619880147},{"_id":"themes/butterfly/source/css/_page/flink.styl","hash":"ecc2b2e28c179eb9406fc2c6f00e141078249cdd","modified":1685619880146},{"_id":"themes/butterfly/source/css/_page/tags.styl","hash":"9e35f91847773b915c74a78b8aa66c7bdb950ad0","modified":1685619880147},{"_id":"themes/butterfly/source/css/_tags/button.styl","hash":"62da1de0d5b8453fcecbfacddb16985265638ba5","modified":1685619880149},{"_id":"themes/butterfly/source/css/_tags/gallery.styl","hash":"7c463ba25b3b54f0f46dfd75971d792816e942a8","modified":1685619880149},{"_id":"themes/butterfly/source/css/_tags/hide.styl","hash":"b7cf7753479fcf2fe07287ffdb0e568adbba4c18","modified":1685619880150},{"_id":"themes/butterfly/source/css/_tags/hexo.styl","hash":"985b183db7b7bfd8f9bdb60494549fb7f850348b","modified":1685619880149},{"_id":"themes/butterfly/source/css/_tags/inlineImg.styl","hash":"5a873d01fabebcf7ddf7a6b1c2e2e5e2714097f4","modified":1685619880150},{"_id":"themes/butterfly/source/css/_tags/tabs.styl","hash":"ec81ea316c82b83d6aee31e52f248d329559d5d3","modified":1685619880151},{"_id":"themes/butterfly/source/css/_tags/note.styl","hash":"331c89ecfb79fab68466944a43e9e3d0ff49c646","modified":1685619880151},{"_id":"themes/butterfly/source/css/_tags/timeline.styl","hash":"07ea7134db7a66c87658116f089fb1a2a6906563","modified":1685619880151},{"_id":"themes/butterfly/source/css/_tags/label.styl","hash":"2f83bd145b870d80d4b18b0ac603235229a5694e","modified":1685619880150},{"_id":"themes/butterfly/source/css/_third-party/normalize.min.css","hash":"8549829fb7d3c21cd9e119884962e8c463a4a267","modified":1685619880152},{"_id":"themes/butterfly/source/js/search/algolia.js","hash":"bbe930d8425bdaee2a5ba3cade42b617cee42934","modified":1685619880155},{"_id":"themes/butterfly/source/js/search/local-search.js","hash":"40e76d6da538cb3c1ef6b79ffc0adfa64fe6b8ba","modified":1685619880156},{"_id":"themes/butterfly/source/img/cover/1c950a7b02087bf43d2bbaa52f35602013dfcfae.jpeg","hash":"a18f19f22495cb238e4f6594f67075a27aa09cf6","modified":1691043253041},{"_id":"themes/butterfly/source/img/cover/PostgreSQL定位问题时常用SQL.jpeg","hash":"dbd336de35431071122b77a493336daadd657c9d","modified":1691043249511},{"_id":"themes/butterfly/layout/includes/third-party/abcjs/abcjs.pug","hash":"0010c7a10d265c4329f0fd4db85b4a9ea7ba06b5","modified":1685619880093},{"_id":"themes/butterfly/layout/includes/third-party/abcjs/index.pug","hash":"58f37823f6cd9a194fb50f7ca7c2233e49939034","modified":1685619880094},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/artalk.pug","hash":"a4bfe1ddca977fa991c49c36c1cffcf1b6c8bb9e","modified":1685619880094},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"f4d21dcbc3b00eed9b1f604e132c4c6811a0a059","modified":1685619880095},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"4b98145d6584d586cabf033493282afc72ae816a","modified":1685619880095},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"846cabae287ae31b3bbfac3da022475713dd5ecc","modified":1685619880095},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/remark42.pug","hash":"716dc463fe4ef5112e7018ed60804125fdfa5cad","modified":1685619880095},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"7e233f872aea6fd6beccdc9efd86b1bf9ec9f12d","modified":1685619880096},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"cd4fc9c5a61608a5dedf645c1295430a1623040f","modified":1685619880097},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"3f59333064c4fc754c638f13a417b7be2569ca09","modified":1685619880098},{"_id":"themes/butterfly/layout/includes/third-party/chat/chatra.pug","hash":"f3f6eaecbcf9352342e259f4a5a3ad7160f31fc9","modified":1685619880099},{"_id":"themes/butterfly/layout/includes/third-party/chat/crisp.pug","hash":"b741b5e942481d779a8a1fe94c45154a62a6b748","modified":1685619880099},{"_id":"themes/butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"e5af55cdb87d1ffd3d8702bc77097159acf95b54","modified":1685619880099},{"_id":"themes/butterfly/layout/includes/third-party/chat/index.pug","hash":"1157118db9f5d7c0c5a0fc7c346f6e934ca00d52","modified":1685619880100},{"_id":"themes/butterfly/layout/includes/third-party/chat/messenger.pug","hash":"306b7aa7d86e46df28fa52f75cead4f9d71cacb2","modified":1685619880100},{"_id":"themes/butterfly/layout/includes/third-party/chat/tidio.pug","hash":"cd7ab4a776be93eea96a6f6fd0a547977fbe1ea3","modified":1685619880101},{"_id":"themes/butterfly/layout/includes/third-party/comments/artalk.pug","hash":"e96d7ea4537ba9a4e07a922a4b50fbc527691bf6","modified":1685619880101},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqus.pug","hash":"f8b73bc63ec1b45d86aa3891d8c81ef4d5980943","modified":1685619880102},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"b19b123df682b23491b17dcca386d79062cd8f6e","modified":1685619880102},{"_id":"themes/butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"1a20b11fa0e6b1943e9b4d81e197a25ca36af66d","modified":1685619880102},{"_id":"themes/butterfly/layout/includes/third-party/comments/giscus.pug","hash":"a56edeb1ce2f1b1fb0e866a30543f274b9f7d69e","modified":1685619880103},{"_id":"themes/butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"7c7fbe27d82becc9ee509765f1195c69f5864a0b","modified":1685619880103},{"_id":"themes/butterfly/layout/includes/third-party/comments/js.pug","hash":"3abbaaa4ea575c45b3cebffd40bad1acc6ffce84","modified":1685619880104},{"_id":"themes/butterfly/layout/includes/third-party/comments/index.pug","hash":"5b44b4e5f2445260811de81edd3eeeb97d8bb583","modified":1685619880104},{"_id":"themes/butterfly/layout/includes/third-party/comments/livere.pug","hash":"589f8503f264d4fda971c8daf2028f45c4f2867b","modified":1685619880105},{"_id":"themes/butterfly/layout/includes/third-party/comments/remark42.pug","hash":"f618457d62ef35d78a31e7fb1e375a462f64b228","modified":1685619880105},{"_id":"themes/butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"4bb4cf58e219dfb8787273c931b1ea978b2ab88f","modified":1685619880106},{"_id":"themes/butterfly/layout/includes/third-party/comments/utterances.pug","hash":"386a2b371644c2682560733617561ba6e6bf9ab2","modified":1685619880106},{"_id":"themes/butterfly/layout/includes/third-party/comments/valine.pug","hash":"cba55cbbd0962bf84b8956195e686b0e158ed247","modified":1685619880106},{"_id":"themes/butterfly/layout/includes/third-party/comments/waline.pug","hash":"bf6b1453096dd7f53d81cde078c233d301e14304","modified":1685619880107},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/artalk.pug","hash":"fbd17da1303d79fd96b236d50923cc4611222b36","modified":1685619880110},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"a6be932d1f64c6190f5d03b5b77fba09fa0fd6b8","modified":1685619880110},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"4f8bd22c5c32d5430cbe08ab4e861b6f8b86f820","modified":1685619880110},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"f8b65460c399973090c1fb7ab81e3708c252e7cc","modified":1685619880111},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/remark42.pug","hash":"4fb998a05e51ef2302775945883307ee3039a544","modified":1685619880111},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"edd4ebf76a79fb74cfae03a286fab90f74324dbd","modified":1685619880112},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"ce4ab79c85df9f77395269eb01e9a023d7f96376","modified":1685619880112},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"2043d8faef05a256a528747e3f37a74497a8019e","modified":1685619880112},{"_id":"themes/butterfly/layout/includes/third-party/math/index.pug","hash":"2afa4c21dd19890f47fb568cfb0d90efb676a253","modified":1685619880108},{"_id":"themes/butterfly/layout/includes/third-party/math/katex.pug","hash":"f0d3eddd2bed68e5517274b3530bfe0fa5057d8e","modified":1685619880108},{"_id":"themes/butterfly/layout/includes/third-party/math/mermaid.pug","hash":"16d896d65986367498d3bf995ea0db5895d28297","modified":1685619880109},{"_id":"themes/butterfly/layout/includes/third-party/math/mathjax.pug","hash":"fad70676346f194f166ac4e714ac6ff37cbf50ea","modified":1685619880109},{"_id":"themes/butterfly/layout/includes/third-party/search/docsearch.pug","hash":"ba04174d977da988a1d49c06641262c413352346","modified":1685619880114},{"_id":"themes/butterfly/layout/includes/third-party/search/index.pug","hash":"3adcf28a8d205ea3ee19828eda0e668702fac07a","modified":1685619880115},{"_id":"themes/butterfly/layout/includes/third-party/search/local-search.pug","hash":"4b9c35375e0eb9cf99ad246d5ca838eca64a635d","modified":1685619880115},{"_id":"themes/butterfly/layout/includes/third-party/share/add-this.pug","hash":"8b4034e53ca5bf85097f681a6e76a53ce685c205","modified":1685619880116},{"_id":"themes/butterfly/layout/includes/third-party/share/addtoany.pug","hash":"1f02a26730e5f36cc2dfec7ff4d5c93a099ed5ba","modified":1685619880116},{"_id":"themes/butterfly/layout/includes/third-party/share/index.pug","hash":"4898a09d8e67fb358ffd74b3a1f0014f555dd856","modified":1685619880116},{"_id":"themes/butterfly/layout/includes/third-party/share/share-js.pug","hash":"8106bd031586f075a994956ee4438eb13be25d7b","modified":1685619880117},{"_id":"themes/butterfly/source/css/_highlight/highlight/diff.styl","hash":"6e77f1ca0cfb0db6b028f5c0238780e66d344f3d","modified":1685619880137},{"_id":"themes/butterfly/source/css/_highlight/highlight/index.styl","hash":"fc702a4614d0562a381907b083f71ba63d301d86","modified":1685619880138},{"_id":"themes/butterfly/source/css/_highlight/prismjs/diff.styl","hash":"1309292f1c8c53d96cd7333507b106bcc24ca8fc","modified":1685619880138},{"_id":"themes/butterfly/source/css/_highlight/prismjs/index.styl","hash":"01ff9e77eb1bd454bec65a6ff5972c8e219bc708","modified":1685619880139},{"_id":"themes/butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"0b8aea62d1550113e1fcc237fae1b03743190208","modified":1685619880139},{"_id":"themes/butterfly/layout/includes/third-party/search/algolia.pug","hash":"90338ac4cd114d324fe1caaaeea8be9ca05d6a46","modified":1685619880114},{"_id":"themes/butterfly/source/js/jquery.min.js","hash":"156837f75f6600ccb602b4efcbd393636c33f35e","modified":1685623885989},{"_id":"themes/butterfly/source/img/avatar.jpg","hash":"a14bf4c9cfc6c38be0cd447041d1eb54b33d4e07","modified":1685677369013},{"_id":"themes/butterfly/source/img/cover/0823dd54564e9258d5c23fbe4164e654cebf4eda.jpeg","hash":"454e3ce7c04bcfafc7143053c266ac967fe7c0b8","modified":1691043256382},{"_id":"themes/butterfly/source/img/cover/4ec2d5628535e5dd1f21ecd9ab2090e3cf1b629e.jpeg","hash":"660e1081b9e55f7d89d41881d21cf8a4d3826174","modified":1691043246044},{"_id":"source/_posts/Arthas/1685498254758-2eb0afda-67ca-4d45-9a87-c3c08b555c70.png","hash":"7699ddf2e4d76d6f59ae09ee52409eaa47da4199","modified":1685607751169},{"_id":"themes/butterfly/source/img/cover/0ff41bd5ad6eddc46af309bbe43d81f153663348.jpeg","hash":"502f2554c6f8a16ae9813eacd34b9afa664ccb62","modified":1691043235153},{"_id":"themes/butterfly/source/img/cover/使用docker-compose安装常用中间件.jpeg","hash":"c813b201932631ae709d7f865d6c0a20d583f81f","modified":1691043240267},{"_id":"themes/butterfly/source/img/bg.jpg","hash":"8f74ac8ffc7cec9c0bd46db4484b42bb68db8c9c","modified":1685672830061},{"_id":"themes/butterfly/source/img/cover/Spring 之依赖注入源码解析.jpeg","hash":"9ae38ee10be7afc61de724470b2d76670041f807","modified":1686053083171},{"_id":"themes/butterfly/source/img/bg.jpg.bak","hash":"8eccb37f1c5b01a431216e27e500273c57b931c4","modified":1685670614416},{"_id":"themes/butterfly/source/img/cover/default.jpg","hash":"22ea65355d4c6d2510d884a740716ab1ac6921ca","modified":1685687873470},{"_id":"themes/butterfly/source/img/cover/使用-IDEA-构建-Spring5-3-10-源码.jpg","hash":"e3c8801d685ef5b13fa4c707b2d7d6fa1881bc7d","modified":1685687611549},{"_id":"themes/butterfly/source/img/cover/arthas.jpg","hash":"dbcaf671f18cc607407185ee85fec2e56fcaf1c8","modified":1685687621990},{"_id":"public/pluginsSrc/algoliasearch/dist/algoliasearch-lite.umd.js","hash":"4325990355771b95f3e4cdd3014266d3681699a4","modified":1691043534354},{"_id":"public/pluginsSrc/instantsearch.js/dist/instantsearch.production.min.js","hash":"47129c5f6fb546fbd001a60850c0cbaa8222fa1e","modified":1691043534354},{"_id":"public/pluginsSrc/pjax/pjax.min.js","hash":"3d796e5be9cdd4067c94e190ea2482d7fdb4856c","modified":1691043534354},{"_id":"public/pluginsSrc/gitalk/dist/gitalk.min.js","hash":"b3105f75a1a126388b438dd1bca1e75ff42f52f4","modified":1691043534354},{"_id":"public/pluginsSrc/gitalk/dist/gitalk.css","hash":"61d71cb30f5f34cbb1f2b5bc469784d6cb908c22","modified":1691043534354},{"_id":"public/pluginsSrc/blueimp-md5/js/md5.min.js","hash":"9fe6cc786714b853c0c4ade488c09288082dbcc4","modified":1691043534354},{"_id":"public/pluginsSrc/valine/dist/Valine.min.js","hash":"ba196eef76a29934689da6a4f2dd8e5979faa557","modified":1691043534354},{"_id":"public/pluginsSrc/disqusjs/dist/browser/disqusjs.es2015.umd.min.js","hash":"7c4fe66254e732fe4661752187eb10557a314986","modified":1691043534354},{"_id":"public/pluginsSrc/disqusjs/dist/browser/styles/disqusjs.css","hash":"aaf497667da8c2b9ec109bdff3caaf171505bf51","modified":1691043534354},{"_id":"public/pluginsSrc/twikoo/dist/twikoo.all.min.js","hash":"a1dcfa74631c0897efe6dabfe02da603b92bf42b","modified":1691043534354},{"_id":"public/pluginsSrc/@waline/client/dist/waline.js","hash":"37355e4e664097312cc3c1dffa84f400481ad97e","modified":1691043534354},{"_id":"public/pluginsSrc/@waline/client/dist/waline.css","hash":"cb1adbfc7c53a7141f8ec7dac6f19965817a83da","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js","hash":"efdfa6b695ac6f0dd04cd8153d3e3a1a1edd90c2","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css","hash":"7126de5cec8371e580b7b1f22512da0985cc39e5","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/tex-mml-chtml.js","hash":"d33bac6b041064ae4330dcc2d958ebe4c28ebe58","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/katex.min.css","hash":"f15a222a33ae4aed3b14ebfbcb8adac9cd28ffe2","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/contrib/copy-tex.min.js","hash":"a2a8bb4950f1b5b9b514b65a5e4c3227062d19a2","modified":1691043534354},{"_id":"public/pluginsSrc/mermaid/dist/mermaid.min.js","hash":"8e82efbcfd927a46601dc48cb7aee95018c3efdd","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/dist/canvas-ribbon.min.js","hash":"6057b5ff1d7cce2def73c49686c95b47fefc7d2d","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js","hash":"d7ee896c06aede313aa39d6b2a173198df26d2de","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/dist/canvas-nest.min.js","hash":"8ecb820558357ae10a034d915a8eae52757e19f3","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/dist/activate-power-mode.min.js","hash":"b1884354cd92bec637662201da337f93c432069c","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/dist/fireworks.min.js","hash":"83b0cc064cab024e25c6b92b8273235f3771d643","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/dist/click-heart.min.js","hash":"7c8cce7a0b5cbc0d035af001802bf4fd0d13f062","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/dist/click-show-text.min.js","hash":"8145e8739e4900c696b95718f70a053fd33202c9","modified":1691043534354},{"_id":"public/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js","hash":"7d5f6453fca3de9f15149009bf9a6c360b3c4c51","modified":1691043534354},{"_id":"public/pluginsSrc/instant.page/instantpage.js","hash":"febaa49fbacf392bb237ab8336f13b9064e729b1","modified":1691043534354},{"_id":"public/pluginsSrc/typed.js/dist/typed.umd.js","hash":"56d37a2bddc14e29c98bee9229017eb326fe0994","modified":1691043534354},{"_id":"public/pluginsSrc/pangu/dist/browser/pangu.min.js","hash":"3f4d7c03d1fd3e6244d40ff15d03dfca852de469","modified":1691043534354},{"_id":"public/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css","hash":"7c7cff35566e4ee9f37f4b91e8dfbe6de19f16b8","modified":1691043534354},{"_id":"public/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js","hash":"ffb5b5f955b3991eb3cbceba3ec85da42d168c5f","modified":1691043534354},{"_id":"public/pluginsSrc/medium-zoom/dist/medium-zoom.min.js","hash":"3938e08e87159ef1db2c0c02af72e39dc65fb862","modified":1691043534354},{"_id":"public/pluginsSrc/node-snackbar/dist/snackbar.min.css","hash":"a410e3754656f7dfc63749cfcf0bae3b62ca93ae","modified":1691043534354},{"_id":"public/pluginsSrc/node-snackbar/dist/snackbar.min.js","hash":"fb29ef01de9167f6b9d7650dd4cab386c793b219","modified":1691043534354},{"_id":"public/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css","hash":"8c06d82739d14b094ff6d9036021a252bd1d985d","modified":1691043534354},{"_id":"public/pluginsSrc/flickr-justified-gallery/dist/fjGallery.min.js","hash":"c45986cc3d0c53f70c24b227416633f0c7e27dc7","modified":1691043534354},{"_id":"public/pluginsSrc/flickr-justified-gallery/dist/fjGallery.css","hash":"8e4312f1aa7a7c3331d7eb6bc17f026ff0673a07","modified":1691043534354},{"_id":"public/pluginsSrc/aplayer/dist/APlayer.min.css","hash":"07372a2ba507388d0fed166d761b1c2c2a659dce","modified":1691043534354},{"_id":"public/pluginsSrc/aplayer/dist/APlayer.min.js","hash":"22caa28ff6b41a16ff40f15d38f1739e22359478","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/metingjs/dist/Meting.min.js","hash":"ca253a806f51e2bf285496625450623342af60f4","modified":1691043534354},{"_id":"public/pluginsSrc/prismjs/prism.js","hash":"cc4a0863a7381b09d369ab5c495563814e4424e2","modified":1691043534354},{"_id":"public/pluginsSrc/prismjs/plugins/line-numbers/prism-line-numbers.min.js","hash":"47a334d25e6977341ab4334d774921a1495eff9c","modified":1691043534354},{"_id":"public/pluginsSrc/prismjs/plugins/autoloader/prism-autoloader.min.js","hash":"b7aa0333d83d1613da3df09348cbfbab2b7b3910","modified":1691043534354},{"_id":"public/pluginsSrc/artalk/dist/Artalk.js","hash":"df4ec064b4732ab583faff5afd8d1a832656e520","modified":1691043534354},{"_id":"public/pluginsSrc/artalk/dist/Artalk.css","hash":"6467f313ef32709fceecc577bc9c308b1093b62e","modified":1691043534354},{"_id":"public/pluginsSrc/pace-js/pace.min.js","hash":"167da09bcd855864f0fda03cb0e83840e299c048","modified":1691043534354},{"_id":"public/pluginsSrc/pace-js/themes/blue/pace-theme-minimal.css","hash":"c014ef2d8c144d37435a278b69b1ee32fe185ad4","modified":1691043534354},{"_id":"public/pluginsSrc/@docsearch/js/dist/umd/index.js","hash":"4a7901c8f2ebbc146ba166af9f0ba34693977bd3","modified":1691043534354},{"_id":"public/pluginsSrc/@docsearch/css/dist/style.css","hash":"01e855bd21cc4b0cb032b23134867598535a614e","modified":1691043534354},{"_id":"public/pluginsSrc/abcjs/dist/abcjs-basic-min.js","hash":"8929397ce2564d32bbc089b996d0938553fa32e2","modified":1691043534354},{"_id":"public/pluginsSrc/@fortawesome/fontawesome-free/webfonts/fa-brands-400.ttf","hash":"f0982a77285d53653845b0a78170b4688db972f1","modified":1691043534354},{"_id":"public/pluginsSrc/@fortawesome/fontawesome-free/webfonts/fa-brands-400.woff2","hash":"4350f9ba93384634faf35f41c503c99c767f1069","modified":1691043534354},{"_id":"public/pluginsSrc/@fortawesome/fontawesome-free/webfonts/fa-regular-400.ttf","hash":"67afa6237670ab99125056f2899129f22912dcf3","modified":1691043534354},{"_id":"public/pluginsSrc/@fortawesome/fontawesome-free/webfonts/fa-regular-400.woff2","hash":"fb363d27cfdfe71a243fa2ac3dab2815232b9b7e","modified":1691043534354},{"_id":"public/pluginsSrc/@fortawesome/fontawesome-free/webfonts/fa-solid-900.ttf","hash":"20bd663830188cbadd2264e1daf9497c3ffc3621","modified":1691043534354},{"_id":"public/pluginsSrc/@fortawesome/fontawesome-free/webfonts/fa-solid-900.woff2","hash":"6b99aa650bd12a36caa14e0127435d8f4cd3ba73","modified":1691043534354},{"_id":"public/pluginsSrc/@fortawesome/fontawesome-free/webfonts/fa-v4compatibility.ttf","hash":"a9d072aca9e0fadc2a7167671ce3d6b18d9cd2cc","modified":1691043534354},{"_id":"public/pluginsSrc/@fortawesome/fontawesome-free/webfonts/fa-v4compatibility.woff2","hash":"8f80d0bbe995f7fe92320fdaec10cd5ccd710a51","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/sharejs/dist/fonts/iconfont.eot","hash":"00ff749c8e202401190cc98d56087cdda716abe4","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/sharejs/dist/fonts/iconfont.svg","hash":"337b4f156f6d8f4beb32c32a3db46fef361cff74","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/sharejs/dist/fonts/iconfont.ttf","hash":"afd898f59d363887418669520b24d175f966a083","modified":1691043534354},{"_id":"public/pluginsSrc/butterfly-extsrc/sharejs/dist/fonts/iconfont.woff","hash":"2e3fce1dcfbd6e2114e7bfbeaf72d3c62e15a1bd","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/tex.js","hash":"e9fc720f3c4062ab258b845a973cf78ef7e8381b","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_AMS-Regular.woff","hash":"6bc2c425db1226bf91a45c5ac4bf92c6a2659e4c","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Bold.woff","hash":"4f45a4737793be31b0cf5606a717b27d4f33633f","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Regular.woff","hash":"69abf851342ea0ea88cd7a48a3855a8da85144ce","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Bold.woff","hash":"0db97c087590f9e4866e376183d5dc11f10db0be","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Regular.woff","hash":"28704c6a56970ba681fc09763ad3b6d4d1f408a4","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Main-Bold.woff","hash":"1b39dd27087cec46eb36b4b0cb967c7a2b7548ae","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Main-Italic.woff","hash":"b83eded6d73439a0387219214d0a320a3c3b0d7e","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Main-Regular.woff","hash":"89d2c8d274693c5a6e250e96e2a2e26e25619079","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Math-BoldItalic.woff","hash":"de80661cd5bc7e2328217db699a0ef7159d27a2e","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Math-Italic.woff","hash":"91a4025dd3b18ca6bda63a215869773705435041","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Math-Regular.woff","hash":"440031e5fd0684c5e38a9221114d280a55763ad4","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Bold.woff","hash":"8ec440016063a0dcd1e8d7e806ec86b2babfea29","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Italic.woff","hash":"9a30c856fa1957552d0226a600bf28fd8f417413","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Regular.woff","hash":"b14c723751a0ac1f8a94ed55fabf6ebeb38559ce","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Script-Regular.woff","hash":"c668b55e8405d2f8acf2bcf1578d01838a8ef399","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Size1-Regular.woff","hash":"9c98f9f022647eb802434947e062b569ccedd5f0","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Size2-Regular.woff","hash":"53e2fb218469bb4b2118437e542cc018f849747b","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Size3-Regular.woff","hash":"5848fbf600fbb7d4a67e720e60da885ba4e12bb8","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Size4-Regular.woff","hash":"683c23731b31b766d8ed805b2d258eaab52085db","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Typewriter-Regular.woff","hash":"8dc0fe3bcd2cf9d3e46c3feb3a21b62961aa557c","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Bold.woff","hash":"14dd272bd9ce18c5a32bcaef50107d872a7d8543","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Regular.woff","hash":"1c6d1ec6fcfecc0585e93c2ac52a4ab8a34b1b77","modified":1691043534354},{"_id":"public/pluginsSrc/mathjax/es5/output/chtml/fonts/woff-v2/MathJax_Zero.woff","hash":"6712cf0aa5c12edc1cbbca8a1732a9cde0854c48","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_AMS-Regular.ttf","hash":"1dfd0ee6e30f8a1c23999d9d965db8700b5a9f2e","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_AMS-Regular.woff","hash":"99ada2de3200e795143d639232c3444b08018235","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_AMS-Regular.woff2","hash":"34494743736fda757197d16fcc6a6e1a79317c86","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Caligraphic-Bold.ttf","hash":"8fab738a16ba8fb7e7002a075f036a455a45c6e8","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Caligraphic-Bold.woff","hash":"dd23ac0fb0ac469b0624485ea78d700f63614203","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Caligraphic-Bold.woff2","hash":"5bfa49cac46cd1d7ab1351388d37c11af59ba615","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Caligraphic-Regular.ttf","hash":"26f26a13e6a7d0a69b48f62acd31a8196bce7f6e","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Caligraphic-Regular.woff","hash":"1a6f39bd70c9b74713078df5f7dd6108f9bad38b","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Caligraphic-Regular.woff2","hash":"9f8077e0b38a290cd9b7b136b0ac29c8375e81a6","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Fraktur-Bold.ttf","hash":"4e08dd00383124e7cd96970ccb0fbe35c9efaaa3","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Fraktur-Bold.woff","hash":"5bbafd501f262219426af7f20c1103bb4b732592","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Fraktur-Bold.woff2","hash":"f98f89272eca11ae417672c59a0faa6a88805a89","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Fraktur-Regular.ttf","hash":"17db40882dd5f140625f28dd94c43045e1893e98","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Fraktur-Regular.woff","hash":"6f756376360f0815b44862f57f795eb7c1cd4db2","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Fraktur-Regular.woff2","hash":"a5764c6e2784d02820c0b904089f3fac798be4fa","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-Bold.ttf","hash":"413ab3dc3fc3a5752275bae2cae67eb58f2b32f0","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-Bold.woff","hash":"f69a36250eae6e8a02173a9909aa628428ba2060","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-Bold.woff2","hash":"31050a1b1b123fb2c59cad1f74b7dff90deb8fce","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-BoldItalic.ttf","hash":"ba6464e442fd50aef7678924ba0f2d9581ebbb07","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-BoldItalic.woff","hash":"038bbdc8887a9730ad94147fc57c6ff4dfb48411","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-BoldItalic.woff2","hash":"a4a4905b8b126f9ffd553d21a72a0c24e9480345","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-Italic.ttf","hash":"1d5668a2b94ae7dbeefdd7cd68d98fe9d5825e07","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-Italic.woff","hash":"7c8589213bc7003e2c2334b51ca4152858987abd","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-Italic.woff2","hash":"c9b2b5ffd2f27aa5c6b6f9ba41a7b2b4e66102d3","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-Regular.ttf","hash":"8744db6ef8c309e3dc85f1bbe980520ad8b7bfd4","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-Regular.woff","hash":"fdcae54ba1d4635ee85a5462cc1c97e521cfd515","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Main-Regular.woff2","hash":"c884086c25cec8558160b2026f906ef7da3570ac","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Math-BoldItalic.ttf","hash":"e80cc4c232d2075f762a52d46beb4ffbd37a5f1a","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Math-BoldItalic.woff","hash":"d54e6480d6d4046c6a5619aa383baa5971fb8a0c","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Math-BoldItalic.woff2","hash":"8fcb9d2de65ac71a0c4fdd986173db730592ed8a","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Math-Italic.ttf","hash":"9e9a10d8fa5ad88c9ecfa4902addd4d92580b2bc","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Math-Italic.woff","hash":"1c1b48739e1cb4be13ddd8c0bc279dde851bdba0","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Math-Italic.woff2","hash":"db4883d0cff95ecb5c03410e3283a737c51ed604","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_SansSerif-Bold.ttf","hash":"20b45f5346b686d52c445745393d1707bb88ec1d","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_SansSerif-Bold.woff","hash":"a2beddc8a3d4d08028d707776edbd4d24f2ec0fc","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_SansSerif-Bold.woff2","hash":"886e61797a525d4aafce0aaf57414fdfaea1b873","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_SansSerif-Italic.ttf","hash":"991fbdc03168bb14a4447cfa3e515f09a6ecfedc","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_SansSerif-Italic.woff","hash":"7564a366b76fd837041c24beef4c5580a5add40e","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_SansSerif-Italic.woff2","hash":"3d5fa3cb309f8d83b4dcbdd27725f270f60f3eeb","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_SansSerif-Regular.ttf","hash":"4a8e17a0cb58a8228dd4417fbd1b899e41dab045","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_SansSerif-Regular.woff","hash":"804610f4cb2e2ead9694b8da2ec84ece8d09c38d","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_SansSerif-Regular.woff2","hash":"e45d5f4f4a7f2ff3dca9fccc2f148e781e23f292","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Script-Regular.ttf","hash":"c6f675da81ad29cbf24b2cf770f795b4da2c648e","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Script-Regular.woff","hash":"6a05cdca4f1f7085e607dc38bedef55753f86fd8","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Script-Regular.woff2","hash":"63b80959f1fc56899ae21ba0cbbcd39a6cb08390","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size1-Regular.ttf","hash":"3280bacbcb1245971fe01017b474c76c337c10c9","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size1-Regular.woff","hash":"aefe6674a56533627c739cd7896398f14487e01c","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size1-Regular.woff2","hash":"57fa599974a1bc0b37d5f0e5cc8602302f02b573","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size2-Regular.ttf","hash":"faf73ff3e795184e5431666ffafeb8aa0e28834d","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size2-Regular.woff","hash":"46698ff1819bd27826fd5d2dc4ba4e1f63cacdf4","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size2-Regular.woff2","hash":"ee18713634a3be8c997276808552ab195a598f43","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size3-Regular.ttf","hash":"302a61b2ecdf82d39e6780f42bd07ee4ce67b8d5","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size3-Regular.woff","hash":"1da1905a6d1d9bcab92b059df72b528dea708bcb","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size3-Regular.woff2","hash":"19a7caadfb66bd2757810ae47e5c7a0e005101a1","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size4-Regular.ttf","hash":"3d8d9dd58a03b7a46d497f5761e60d8b844a5199","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size4-Regular.woff","hash":"8fdddb83513ec226231ebee05079ec45fc013578","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Typewriter-Regular.ttf","hash":"629b99faf18d97529f21a1b1018093e60bcd058f","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Typewriter-Regular.woff","hash":"f5e729fa4ff466fc07e0c7ab1979ad70c45fa5d5","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Typewriter-Regular.woff2","hash":"7a08883fffc6958c71cc01a75a0b99cca3e4b475","modified":1691043534354},{"_id":"public/search.xml","hash":"8a85f0f69a45c257b0a39a9938ae4e7d17601e57","modified":1691043534354},{"_id":"public/content.json","hash":"cb33b0a004864988a59050f750579fc02d46d62c","modified":1691043534354},{"_id":"public/pluginsSrc/katex/dist/fonts/KaTeX_Size4-Regular.woff2","hash":"9bed17fb92f2650501e229862c40c6407e1c5528","modified":1691043534354},{"_id":"public/404.html","hash":"ec5c1273254334e046d4f0739fa9ce9b218d7a2f","modified":1691043534354},{"_id":"public/categories/index.html","hash":"a4a44e7aa9e04838115db7e06a7050d1fdfa53c0","modified":1691043534354},{"_id":"public/tags/index.html","hash":"448dcdd28fb7897149f23bc1161ecf56d5ac4d99","modified":1691043534354},{"_id":"public/posts/f1ecacbb.html","hash":"914b631afd58a053b34f11d7a0151979da1637ff","modified":1691043534354},{"_id":"public/posts/a524c0bb.html","hash":"9f389ad38432858b9e99b6627d75886134f653b1","modified":1691043534354},{"_id":"public/posts/983a1c52.html","hash":"7180577ece85ca271715c6baa645834300f48780","modified":1691043534354},{"_id":"public/posts/e1a71cf6.html","hash":"09e40c523c601596fe82e62dd494e8243858671d","modified":1691043534354},{"_id":"public/archives/index.html","hash":"449fbf38a83cd9f83cf82a798533135b0803928e","modified":1691043534354},{"_id":"public/archives/2023/index.html","hash":"3e113a3da47f2520e4a16038bcf44c631349b953","modified":1691043534354},{"_id":"public/archives/2023/06/index.html","hash":"551986da424a6c64f7d3ab4fa76d6d65d1fd1286","modified":1691043534354},{"_id":"public/archives/2023/08/index.html","hash":"5af4cf8065003a0b44c3434ff8c9e62b7828dd16","modified":1691043534354},{"_id":"public/categories/Java/index.html","hash":"81197fb62052273526d53c07a9a398b388c4d73b","modified":1691043534354},{"_id":"public/categories/PostgreSQL/index.html","hash":"0d1bfd47ab4c3e5b145d9dd019a4c4befd08bc5e","modified":1691043534354},{"_id":"public/categories/docker/index.html","hash":"ca017e2edad5841b82ab8d6204d6bd7331137629","modified":1691043534354},{"_id":"public/categories/Java/调试工具/index.html","hash":"6daad1a7057016c63ce8758ad8b78bca97a84639","modified":1691043534354},{"_id":"public/categories/Java/框架/index.html","hash":"4c72c6bad24bdd6b01128cfced3f6d83b3cdea4d","modified":1691043534354},{"_id":"public/categories/Java/框架/Spring/index.html","hash":"3ec397e70c7f179e04084e20201a595d1616a50b","modified":1691043534354},{"_id":"public/categories/Java/框架/Spring/Spring-5-3-10/index.html","hash":"69642dd0401e8db5d36ac5b8b3440012143d1f88","modified":1691043534354},{"_id":"public/index.html","hash":"4804d8709ee89b081a17981909270d1b3342c721","modified":1691043534354},{"_id":"public/tags/Arthas/index.html","hash":"39194b13de0760cb62da227a5750f9799afacabb","modified":1691043534354},{"_id":"public/tags/PostgreSQL/index.html","hash":"847664e4f3963841523ee5a25a7001f8fca3d410","modified":1691043534354},{"_id":"public/tags/Java/index.html","hash":"8901975f0f251647f28188e3575ef1ef273574be","modified":1691043534354},{"_id":"public/tags/Spring/index.html","hash":"ca81b63d7278c79d7ed419d1cf7eeaf3aff6d0f2","modified":1691043534354},{"_id":"public/tags/docker/index.html","hash":"10c257c54349bd51a021b84f7339860c24f5fa51","modified":1691043534354},{"_id":"public/tags/docker-compose/index.html","hash":"b95d82cb97d3303d25b6b5186ffa45ecaf6b2b84","modified":1691043534354},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1691043534354},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1691043534354},{"_id":"public/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1691043534354},{"_id":"public/img/cover/1c950a7b02087bf43d2bbaa52f35602013dfcfae.jpeg","hash":"a18f19f22495cb238e4f6594f67075a27aa09cf6","modified":1691043534354},{"_id":"public/img/cover/PostgreSQL定位问题时常用SQL.jpeg","hash":"dbd336de35431071122b77a493336daadd657c9d","modified":1691043534354},{"_id":"public/posts/983a1c52/1685515451815-c83a27f4-385a-42d9-8156-a24808c36be0.png","hash":"faae86f66bec87027b3685914616702ce0767542","modified":1691043534354},{"_id":"public/posts/a524c0bb/image-20230612160800809.png","hash":"264f80527ae40159c7a6f19b47610245ea4d18d0","modified":1691043534354},{"_id":"public/posts/983a1c52/1685515617531-5c3d6c65-6af1-42be-8572-11f4717c6fa4.png","hash":"7572b8afad091e1b16a7add30e983323d21fe9a2","modified":1691043534354},{"_id":"public/posts/983a1c52/1685515622726-73454c6c-2a1f-448b-8e14-6080485a8a56.png","hash":"f53ac082af6a492b732cc5e79a7e432e43ae706b","modified":1691043534354},{"_id":"public/posts/983a1c52/1685515909414-1dbb5934-710e-4d30-bc59-a1e4b47d51ce.png","hash":"05218a0051c52526b146eca9dfd2c06e7d40c154","modified":1691043534354},{"_id":"public/posts/983a1c52/1685515903538-7acd0039-35d6-48d3-8535-bd3659e3bbc8.png","hash":"b6d0993138445d9682091a5bc2ba6181a24484fe","modified":1691043534354},{"_id":"public/img/avatar.jpg","hash":"a14bf4c9cfc6c38be0cd447041d1eb54b33d4e07","modified":1691043534354},{"_id":"public/img/cover/0823dd54564e9258d5c23fbe4164e654cebf4eda.jpeg","hash":"454e3ce7c04bcfafc7143053c266ac967fe7c0b8","modified":1691043534354},{"_id":"public/img/cover/4ec2d5628535e5dd1f21ecd9ab2090e3cf1b629e.jpeg","hash":"660e1081b9e55f7d89d41881d21cf8a4d3826174","modified":1691043534354},{"_id":"public/posts/983a1c52/1685515713115-b417e4cf-fa0e-4376-b06b-b524e144cbe9.png","hash":"7bc89282df9ae24af8b306299b4a716a37f437f5","modified":1691043534354},{"_id":"public/posts/983a1c52/1685515894900-3d9a036b-beaf-4505-a394-039d87d10d82.png","hash":"9a2d0a3e61303bfb6b73ca7126c572f9525187f5","modified":1691043534354},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1691043534354},{"_id":"public/css/modify.css","hash":"371bea977f7bb2e4606d8a14574026223aeb047a","modified":1691043534354},{"_id":"public/js/chocolate.js","hash":"a8cd67b2bcc117b7eca3dc8eff817a224fd5b173","modified":1691043534354},{"_id":"public/js/cursor.js","hash":"40614fde61e860c710592e57e22de526775ff6d3","modified":1691043534354},{"_id":"public/js/utils.js","hash":"7bec147ae2b313fbd0331d87018f99715368fc4b","modified":1691043534354},{"_id":"public/js/search/algolia.js","hash":"fd86281d4f0f99ce173e49c1a0df3507fe268d37","modified":1691043534354},{"_id":"public/js/search/local-search.js","hash":"8509cbd954ee9e099dcfbbfdafba70893a56e9ae","modified":1691043534354},{"_id":"public/css/index.css","hash":"63b57c86a1ac530d4b56464e0bcfa23c7f2d87b9","modified":1691043534354},{"_id":"public/js/main.js","hash":"dca55899b7c92ebee6191bef127ea5e2283ecc63","modified":1691043534354},{"_id":"public/js/jquery.min.js","hash":"ad886e472b3557f3dc7dfa2bc43468ab8d1cef5b","modified":1691043534354},{"_id":"public/js/tw_cn.js","hash":"42b106354d72a0ea1fe62587b313a5b7de3cc393","modified":1691043534354},{"_id":"public/img/cover/0ff41bd5ad6eddc46af309bbe43d81f153663348.jpeg","hash":"502f2554c6f8a16ae9813eacd34b9afa664ccb62","modified":1691043534354},{"_id":"public/img/cover/使用docker-compose安装常用中间件.jpeg","hash":"c813b201932631ae709d7f865d6c0a20d583f81f","modified":1691043534354},{"_id":"public/posts/e1a71cf6/1685446464667-5b9471f9-ff69-4e3e-a665-9235f11676cb.png","hash":"a7c35810237beba717f0a7a71f3489cc937916ca","modified":1691043534354},{"_id":"public/img/bg.jpg","hash":"8f74ac8ffc7cec9c0bd46db4484b42bb68db8c9c","modified":1691043534354},{"_id":"public/img/cover/Spring 之依赖注入源码解析.jpeg","hash":"9ae38ee10be7afc61de724470b2d76670041f807","modified":1691043534354},{"_id":"public/posts/983a1c52/1685515818638-aa54c79e-7e57-4441-9757-ea00a0bf6274.png","hash":"1496c39e911a141310a79b953cf82174f0d64486","modified":1691043534354},{"_id":"public/img/bg.jpg.bak","hash":"8eccb37f1c5b01a431216e27e500273c57b931c4","modified":1691043534354},{"_id":"public/posts/e1a71cf6/1685498254758-2eb0afda-67ca-4d45-9a87-c3c08b555c70.png","hash":"7699ddf2e4d76d6f59ae09ee52409eaa47da4199","modified":1691043534354},{"_id":"public/img/cover/default.jpg","hash":"22ea65355d4c6d2510d884a740716ab1ac6921ca","modified":1691043534354},{"_id":"public/img/cover/使用-IDEA-构建-Spring5-3-10-源码.jpg","hash":"e3c8801d685ef5b13fa4c707b2d7d6fa1881bc7d","modified":1691043534354},{"_id":"public/img/cover/arthas.jpg","hash":"dbcaf671f18cc607407185ee85fec2e56fcaf1c8","modified":1691043534354}],"Category":[{"name":"Java","_id":"clkurnr400004xou9556w626l"},{"name":"PostgreSQL","_id":"clkurnr460009xou91sv0bj7z"},{"name":"docker","_id":"clkurnr48000fxou95hw4d28k"},{"name":"调试工具","parent":"clkurnr400004xou9556w626l","_id":"clkurnr49000ixou9cf0k6fm2"},{"name":"框架","parent":"clkurnr400004xou9556w626l","_id":"clkurnr4a000nxou9g9ls0rfh"},{"name":"Spring","parent":"clkurnr4a000nxou9g9ls0rfh","_id":"clkurnr4b000uxou9bhe2flhl"},{"name":"Spring-5.3.10","parent":"clkurnr4b000uxou9bhe2flhl","_id":"clkurnr4c0010xou9c2bubyjb"}],"Data":[],"Page":[{"title":"文章分类","date":"2023-06-01T08:03:47.000Z","type":"categories","layout":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: 文章分类\ndate: 2023-06-01 16:03:47\ntype: \"categories\"\nlayout: \"categories\"\ncomments: false\n---\n","updated":"2023-06-01T08:15:20.923Z","path":"categories/index.html","_id":"clkurnr3s0000xou9gfan47gr","content":"","site":{"data":{}},"cover":"/img/cover/default.jpg","cover_type":"img","excerpt":"","more":""},{"title":"Tags","date":"2023-06-01T08:03:47.000Z","type":"tags","layout":"tags","comments":0,"_content":"\n","source":"tags/index.md","raw":"---\ntitle: Tags\ndate: 2023-06-01 16:03:47\ntype: \"tags\"\nlayout: \"tags\"\ncomments: false\n---\n\n","updated":"2023-06-02T03:34:47.490Z","path":"tags/index.html","_id":"clkurnr3y0002xou9ezmx79gs","content":"","site":{"data":{}},"cover":"/img/cover/default.jpg","cover_type":"img","excerpt":"","more":""}],"Post":[{"title":"Arthas","abbrlink":"e1a71cf6","date":"2023-06-01T07:35:46.000Z","cover":"/img/cover/arthas.jpg","_content":"\n# 一、简介\n\n## 1.1 什么是 Arthas\n\nArthas 是一款线上监控诊断产品，通过全局视角实时查看应用 load、内存、gc、线程的状态信息，并能在不修改应用代码的情况下，对业务问题进行诊断，包括查看方法调用的出入参、异常，监测方法执行耗时，类加载信息等，大大提升线上问题排查效率。\n\n## 1.2 下载 Arthas\n\n下载地址：https://arthas.aliyun.com/download/latest_version?mirror=aliyun\n\n## 1.3 启动方式\n\n将下载的文件解压后，可以看到有 `as.sh`和 `arthas-boot.jar`，有两种启动方式\n\n- 直接执行 `./as.sh`启动\n- 执行 `java -jar arthas-boot.jar`启动\n\n> 需要注意的是：使用和目标进程一致的用户启动，否则可能 attach 失败\n>\n> - 执行该程序的用户需要和目标进程具有相同的权限。比如以 `admin`用户来执行：`sudo su admin && java -jar arthas-boot.jar`或 `sudo -u admin -EH java -jar arthas-boot.jar`。\n> - 如果 attach 不上目标进程，可以查看`~/logs/arthas/`目录下的日志。\n\n执行成功后会显示 Java 进程信息，输入对应的数字序号后回车，Arthas 会 attach 到目标进程上，并输出日志。\n\n##### ![启动截图](./Arthas/1685446464667-5b9471f9-ff69-4e3e-a665-9235f11676cb.png)\n\n# 二、命令列表及其使用\n\n## 2.1 JVM 相关\n\n### 2.1.1 dashboard - 当前系统的实时数据面板\n\n#### 2.1.1.1 作用\n\n显示当前系统的实时数据面板，按 `ctrl+c`退出。\n\n#### 2.1.1.2 参数说明\n\n| **参数名称** |               **参数说明**               |\n| :----------: | :--------------------------------------: |\n|     [i:]     | 刷新实时数据的时间间隔 (ms)，默认 5000ms |\n|     [n:]     |            刷新实时数据的次数            |\n\n实例：`dashboard -i 1000 -n 2` ：每1000ms刷新一次，刷新两次。\n\n#### 2.1.1.3 数据说明\n\n![dashboard运行截图](./Arthas/1685498254758-2eb0afda-67ca-4d45-9a87-c3c08b555c70.png)\n\n- ID: Java 级别的线程 ID，注意这个 ID 不能跟 jstack 中的 nativeID 一一对应。\n- NAME: 线程名\n- GROUP: 线程组名\n- PRIORITY: 线程优先级, 1~10 之间的数字，越大表示优先级越高\n- STATE: 线程的状态\n- CPU%: 线程的 cpu 使用率。比如采样间隔 1000ms，某个线程的增量 cpu 时间为 100ms，则 cpu 使用率=100/1000=10%\n- DELTA_TIME: 上次采样之后线程运行增量 CPU 时间，数据格式为秒\n- TIME: 线程运行总 CPU 时间，数据格式为分:秒\n- INTERRUPTED: 线程当前的中断位状态\n- DAEMON: 是否是 daemon 线程\n\n从上图中可以看到有些线程的 ID、PRIORITY 为-1，且没有状态等属性，这是因为这些线程是 JVM 内部线程。\n\n#### 2.1.1.4 JVM 内部线程\n\nJava 8 之后支持获取 JVM 内部线程 CPU 时间，这些线程只有名称和 CPU 时间，没有 ID 及状态等信息（显示 ID 为-1）。 通过内部线程可以观测到 JVM 活动，如 GC、JIT 编译等占用 CPU 情况，方便了解 JVM 整体运行状况。\n\n- 当 JVM 堆(heap)/元数据(metaspace)空间不足或 OOM 时，可以看到 GC 线程的 CPU 占用率明显高于其他的线程。\n- 当执行 `trace/watch/tt/redefine`等命令后，可以看到 JIT 线程活动变得更频繁。因为 JVM 热更新 class 字节码时清除了此 class 相关的 JIT 编译结果，需要重新编译。\n\nJVM 内部线程包括下面几种：\n\n- JIT 编译线程: 如 `C2 CompilerThread0`, `C1 CompilerThread2`\n- GC 线程: 如 `GC Thread0`, `G1 Young RemSet Sampling`\n- 其它内部线程: 如 `VM Periodic Task Thread`, `VM Thread`, `Service Thread`\n\n### 2.1.2 ognl - 执行 ognl 表达式\n\n#### 2.1.2.1 作用\n\n执行 ognl 表达式\n\n#### 2.1.2.2 参数说明\n\n|    **参数名称**     |                         **参数说明**                         |\n| :-----------------: | :----------------------------------------------------------: |\n|      *express*      |                         执行的表达式                         |\n|        [c:]         | 执行表达式的 ClassLoader 的 hashcode，默认值是 SystemClassLoader |\n| [classLoaderClass:] |          指定执行表达式的 ClassLoader 的 class name          |\n|         [x]         |                 结果对象的展开层次，默认值 1                 |\n\n#### 2.1.2.3 ognl 表达式说明\n\n##### 2.1.2.3.1 语法\n\n基本的 OGNL 表达式非常简单。该语言的特性已经变得非常丰富，但是您通常不需要担心该语言中更复杂的部分：简单的情况仍然如此。例如，要获取对象的 name 属性，OGNL 表达式就是 `name`。要获取由 headline 属性返回的对象的 text 属性，OGNL 表达式是 `headline.text`。\n\nOGNL 表达式的基本单元是导航链，通常简称为“链”。最简单的链条由以下部分组成：\n\n| **表达式元素部分** |                      **例子**                       |\n| :----------------: | :-------------------------------------------------: |\n|      属性名称      |     比如上面示例中的 `name`和 `headline.text`。     |\n|      方法调用      |          `hashCode()`返回当前对象的哈希码           |\n|      数组索引      | `listeners[0]`返回当前对象 listeners 列表中的第一个 |\n\n所有 OGNL 表达式都在当前对象的上下文中求值，而链只是使用链中前一个链接的结果作为下一个链接的当前对象。你想把链条拉长多长都行。例如，这条链：\n\n```\nname.toCharArray()[0].numericValue.toString()\n```\n\n这个表达式按照以下步骤进行计算：\n\n1. 提取初始或根对象（用户通过 OGNL 上下文提供给 OGNL ）的 name 属性；\n2. 在结果字符串上调用 toCharArray() 方法；\n3. 从结果数组中提取第一个字符（索引为0的字符）；\n4. 从该字符获取 numericValue 属性(字符表示为 `Character`对象，`Character`类有一个名为 getNumericValue() 的方法)。\n5. 在结果 Integer 对象上调用 toString()。这个表达式的最终结果是最后一次 toString() 调用返回的 String。\n\n请注意，这个示例只能用于从对象获取值，而不能用于设置值。将上述表达式传递给 Ognl.setValue() 方法将导致InappropriateExpressionException被抛出，因为链中的最后一个链接既不是属性名也不是数组索引。\n\n##### 2.1.2.3.2 表达式\n\n本节概述了 OGNL 表达式元素的细节。\n\n**常量**\n\nOGNL 有以下几种常量：\n\n- String 字面值，如 Java 中由单引号或双引号分隔，并带有完整的转义集；\n- Character 字面量，也与 Java 一样：由单引号分隔，也带有全套转义；\n- 数字字面值，比 Java 多一些类型。除了 Java 的整型、长型、浮点数和双精度外，OGNL 还允许您指定带有“b”或“b”后缀的 BigDecimals，以及带有“h”或“h”后缀的 BigIntegers(想想“huge”——我们选择了“h”表示)；\n- Boolean：true 或者 false；\n- null\n\n**引用属性**\n\nOGNL 在处理属性引用时以不同的方式对待不同类型的对象。映射将所有属性引用视为元素查找或存储，并将属性名称作为键。列表和数组类似地处理数字属性，以属性名作为索引，但处理字符串属性的方式与普通对象相同。普通对象（即所有其他类型的对象）只能通过使用“get”和“set”方法（或“is”和“set”）处理字符串属性，如果对象有这些方法，或者使用给定名称的字段处理字符串属性。\n\n注意这里的新术语。属性“名称”可以是任何类型，而不仅仅是字符串。但是要引用非字符串属性，必须使用我们一直称为“索引”的符号。例如，要获取一个数组的长度，你可以使用这个表达式：\n\n```\narray.length\n```\n\n但是要获取数组的元素0，你必须使用这样的表达式：\n\n```\narray[0]\n```\n\n**索引**\n\n如上所述，“索引”表示法实际上只是属性引用，尽管是一种计算形式的属性引用，而不是常数形式。\n例如，OGNL在内部处理 `array.length`表达式与这个表达式完全相同：\n\n```\narray[\"length\"]\n```\n\n这个表达式会有相同的结果（尽管内部形式不同）：\n\n```\narray[\"len\" + \"gth\"]\n```\n\n### 2.1.3 getstatic - 查看类的静态属性\n\n### 2.1.4 heapdump - dump java heap, 类似 jmap 命令的 heap dump 功能\n\n### 2.1.5 jvm - 查看当前 JVM 的信息\n\n### 2.1.6 logger - 查看和修改 logger\n\n### 2.1.7 mbean - 查看 Mbean 的信息\n\n### 2.1.8 memory - 查看 JVM 的内存信息\n\n### 2.1.9 perfcounter - 查看当前 JVM 的 Perf Counter 信息\n\n### 2.1.10 sysenv - 查看 JVM 的环境变量\n\n### 2.1.11 sysprop - 查看和修改 JVM 的系统属性\n\n### 2.1.12 thread - 查看当前 JVM 的线程堆栈信息\n\n### 2.1.13 vmoption - 查看和修改 JVM 里诊断相关的 option\n\n### 2.1.14 vmtool - 从 jvm 里查询对象\n","source":"_posts/Arthas.md","raw":"---\ntitle: Arthas\ntags: Arthas\ncategories:\n  - Java\n  - 调试工具\nabbrlink: e1a71cf6\ndate: 2023-06-01 15:35:46\ncover: /img/cover/arthas.jpg\n---\n\n# 一、简介\n\n## 1.1 什么是 Arthas\n\nArthas 是一款线上监控诊断产品，通过全局视角实时查看应用 load、内存、gc、线程的状态信息，并能在不修改应用代码的情况下，对业务问题进行诊断，包括查看方法调用的出入参、异常，监测方法执行耗时，类加载信息等，大大提升线上问题排查效率。\n\n## 1.2 下载 Arthas\n\n下载地址：https://arthas.aliyun.com/download/latest_version?mirror=aliyun\n\n## 1.3 启动方式\n\n将下载的文件解压后，可以看到有 `as.sh`和 `arthas-boot.jar`，有两种启动方式\n\n- 直接执行 `./as.sh`启动\n- 执行 `java -jar arthas-boot.jar`启动\n\n> 需要注意的是：使用和目标进程一致的用户启动，否则可能 attach 失败\n>\n> - 执行该程序的用户需要和目标进程具有相同的权限。比如以 `admin`用户来执行：`sudo su admin && java -jar arthas-boot.jar`或 `sudo -u admin -EH java -jar arthas-boot.jar`。\n> - 如果 attach 不上目标进程，可以查看`~/logs/arthas/`目录下的日志。\n\n执行成功后会显示 Java 进程信息，输入对应的数字序号后回车，Arthas 会 attach 到目标进程上，并输出日志。\n\n##### ![启动截图](./Arthas/1685446464667-5b9471f9-ff69-4e3e-a665-9235f11676cb.png)\n\n# 二、命令列表及其使用\n\n## 2.1 JVM 相关\n\n### 2.1.1 dashboard - 当前系统的实时数据面板\n\n#### 2.1.1.1 作用\n\n显示当前系统的实时数据面板，按 `ctrl+c`退出。\n\n#### 2.1.1.2 参数说明\n\n| **参数名称** |               **参数说明**               |\n| :----------: | :--------------------------------------: |\n|     [i:]     | 刷新实时数据的时间间隔 (ms)，默认 5000ms |\n|     [n:]     |            刷新实时数据的次数            |\n\n实例：`dashboard -i 1000 -n 2` ：每1000ms刷新一次，刷新两次。\n\n#### 2.1.1.3 数据说明\n\n![dashboard运行截图](./Arthas/1685498254758-2eb0afda-67ca-4d45-9a87-c3c08b555c70.png)\n\n- ID: Java 级别的线程 ID，注意这个 ID 不能跟 jstack 中的 nativeID 一一对应。\n- NAME: 线程名\n- GROUP: 线程组名\n- PRIORITY: 线程优先级, 1~10 之间的数字，越大表示优先级越高\n- STATE: 线程的状态\n- CPU%: 线程的 cpu 使用率。比如采样间隔 1000ms，某个线程的增量 cpu 时间为 100ms，则 cpu 使用率=100/1000=10%\n- DELTA_TIME: 上次采样之后线程运行增量 CPU 时间，数据格式为秒\n- TIME: 线程运行总 CPU 时间，数据格式为分:秒\n- INTERRUPTED: 线程当前的中断位状态\n- DAEMON: 是否是 daemon 线程\n\n从上图中可以看到有些线程的 ID、PRIORITY 为-1，且没有状态等属性，这是因为这些线程是 JVM 内部线程。\n\n#### 2.1.1.4 JVM 内部线程\n\nJava 8 之后支持获取 JVM 内部线程 CPU 时间，这些线程只有名称和 CPU 时间，没有 ID 及状态等信息（显示 ID 为-1）。 通过内部线程可以观测到 JVM 活动，如 GC、JIT 编译等占用 CPU 情况，方便了解 JVM 整体运行状况。\n\n- 当 JVM 堆(heap)/元数据(metaspace)空间不足或 OOM 时，可以看到 GC 线程的 CPU 占用率明显高于其他的线程。\n- 当执行 `trace/watch/tt/redefine`等命令后，可以看到 JIT 线程活动变得更频繁。因为 JVM 热更新 class 字节码时清除了此 class 相关的 JIT 编译结果，需要重新编译。\n\nJVM 内部线程包括下面几种：\n\n- JIT 编译线程: 如 `C2 CompilerThread0`, `C1 CompilerThread2`\n- GC 线程: 如 `GC Thread0`, `G1 Young RemSet Sampling`\n- 其它内部线程: 如 `VM Periodic Task Thread`, `VM Thread`, `Service Thread`\n\n### 2.1.2 ognl - 执行 ognl 表达式\n\n#### 2.1.2.1 作用\n\n执行 ognl 表达式\n\n#### 2.1.2.2 参数说明\n\n|    **参数名称**     |                         **参数说明**                         |\n| :-----------------: | :----------------------------------------------------------: |\n|      *express*      |                         执行的表达式                         |\n|        [c:]         | 执行表达式的 ClassLoader 的 hashcode，默认值是 SystemClassLoader |\n| [classLoaderClass:] |          指定执行表达式的 ClassLoader 的 class name          |\n|         [x]         |                 结果对象的展开层次，默认值 1                 |\n\n#### 2.1.2.3 ognl 表达式说明\n\n##### 2.1.2.3.1 语法\n\n基本的 OGNL 表达式非常简单。该语言的特性已经变得非常丰富，但是您通常不需要担心该语言中更复杂的部分：简单的情况仍然如此。例如，要获取对象的 name 属性，OGNL 表达式就是 `name`。要获取由 headline 属性返回的对象的 text 属性，OGNL 表达式是 `headline.text`。\n\nOGNL 表达式的基本单元是导航链，通常简称为“链”。最简单的链条由以下部分组成：\n\n| **表达式元素部分** |                      **例子**                       |\n| :----------------: | :-------------------------------------------------: |\n|      属性名称      |     比如上面示例中的 `name`和 `headline.text`。     |\n|      方法调用      |          `hashCode()`返回当前对象的哈希码           |\n|      数组索引      | `listeners[0]`返回当前对象 listeners 列表中的第一个 |\n\n所有 OGNL 表达式都在当前对象的上下文中求值，而链只是使用链中前一个链接的结果作为下一个链接的当前对象。你想把链条拉长多长都行。例如，这条链：\n\n```\nname.toCharArray()[0].numericValue.toString()\n```\n\n这个表达式按照以下步骤进行计算：\n\n1. 提取初始或根对象（用户通过 OGNL 上下文提供给 OGNL ）的 name 属性；\n2. 在结果字符串上调用 toCharArray() 方法；\n3. 从结果数组中提取第一个字符（索引为0的字符）；\n4. 从该字符获取 numericValue 属性(字符表示为 `Character`对象，`Character`类有一个名为 getNumericValue() 的方法)。\n5. 在结果 Integer 对象上调用 toString()。这个表达式的最终结果是最后一次 toString() 调用返回的 String。\n\n请注意，这个示例只能用于从对象获取值，而不能用于设置值。将上述表达式传递给 Ognl.setValue() 方法将导致InappropriateExpressionException被抛出，因为链中的最后一个链接既不是属性名也不是数组索引。\n\n##### 2.1.2.3.2 表达式\n\n本节概述了 OGNL 表达式元素的细节。\n\n**常量**\n\nOGNL 有以下几种常量：\n\n- String 字面值，如 Java 中由单引号或双引号分隔，并带有完整的转义集；\n- Character 字面量，也与 Java 一样：由单引号分隔，也带有全套转义；\n- 数字字面值，比 Java 多一些类型。除了 Java 的整型、长型、浮点数和双精度外，OGNL 还允许您指定带有“b”或“b”后缀的 BigDecimals，以及带有“h”或“h”后缀的 BigIntegers(想想“huge”——我们选择了“h”表示)；\n- Boolean：true 或者 false；\n- null\n\n**引用属性**\n\nOGNL 在处理属性引用时以不同的方式对待不同类型的对象。映射将所有属性引用视为元素查找或存储，并将属性名称作为键。列表和数组类似地处理数字属性，以属性名作为索引，但处理字符串属性的方式与普通对象相同。普通对象（即所有其他类型的对象）只能通过使用“get”和“set”方法（或“is”和“set”）处理字符串属性，如果对象有这些方法，或者使用给定名称的字段处理字符串属性。\n\n注意这里的新术语。属性“名称”可以是任何类型，而不仅仅是字符串。但是要引用非字符串属性，必须使用我们一直称为“索引”的符号。例如，要获取一个数组的长度，你可以使用这个表达式：\n\n```\narray.length\n```\n\n但是要获取数组的元素0，你必须使用这样的表达式：\n\n```\narray[0]\n```\n\n**索引**\n\n如上所述，“索引”表示法实际上只是属性引用，尽管是一种计算形式的属性引用，而不是常数形式。\n例如，OGNL在内部处理 `array.length`表达式与这个表达式完全相同：\n\n```\narray[\"length\"]\n```\n\n这个表达式会有相同的结果（尽管内部形式不同）：\n\n```\narray[\"len\" + \"gth\"]\n```\n\n### 2.1.3 getstatic - 查看类的静态属性\n\n### 2.1.4 heapdump - dump java heap, 类似 jmap 命令的 heap dump 功能\n\n### 2.1.5 jvm - 查看当前 JVM 的信息\n\n### 2.1.6 logger - 查看和修改 logger\n\n### 2.1.7 mbean - 查看 Mbean 的信息\n\n### 2.1.8 memory - 查看 JVM 的内存信息\n\n### 2.1.9 perfcounter - 查看当前 JVM 的 Perf Counter 信息\n\n### 2.1.10 sysenv - 查看 JVM 的环境变量\n\n### 2.1.11 sysprop - 查看和修改 JVM 的系统属性\n\n### 2.1.12 thread - 查看当前 JVM 的线程堆栈信息\n\n### 2.1.13 vmoption - 查看和修改 JVM 里诊断相关的 option\n\n### 2.1.14 vmtool - 从 jvm 里查询对象\n","slug":"Arthas","published":1,"updated":"2023-06-02T06:43:40.215Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clkurnr3u0001xou9gxqx8jwp","content":"<h1 id=\"一、简介\"><a href=\"#一、简介\" class=\"headerlink\" title=\"一、简介\"></a>一、简介</h1><h2 id=\"1-1-什么是-Arthas\"><a href=\"#1-1-什么是-Arthas\" class=\"headerlink\" title=\"1.1 什么是 Arthas\"></a>1.1 什么是 Arthas</h2><p>Arthas 是一款线上监控诊断产品，通过全局视角实时查看应用 load、内存、gc、线程的状态信息，并能在不修改应用代码的情况下，对业务问题进行诊断，包括查看方法调用的出入参、异常，监测方法执行耗时，类加载信息等，大大提升线上问题排查效率。</p>\n<h2 id=\"1-2-下载-Arthas\"><a href=\"#1-2-下载-Arthas\" class=\"headerlink\" title=\"1.2 下载 Arthas\"></a>1.2 下载 Arthas</h2><p>下载地址：<a href=\"https://arthas.aliyun.com/download/latest_version?mirror=aliyun\">https://arthas.aliyun.com/download/latest_version?mirror=aliyun</a></p>\n<h2 id=\"1-3-启动方式\"><a href=\"#1-3-启动方式\" class=\"headerlink\" title=\"1.3 启动方式\"></a>1.3 启动方式</h2><p>将下载的文件解压后，可以看到有 <code>as.sh</code>和 <code>arthas-boot.jar</code>，有两种启动方式</p>\n<ul>\n<li>直接执行 <code>./as.sh</code>启动</li>\n<li>执行 <code>java -jar arthas-boot.jar</code>启动</li>\n</ul>\n<blockquote>\n<p>需要注意的是：使用和目标进程一致的用户启动，否则可能 attach 失败</p>\n<ul>\n<li>执行该程序的用户需要和目标进程具有相同的权限。比如以 <code>admin</code>用户来执行：<code>sudo su admin &amp;&amp; java -jar arthas-boot.jar</code>或 <code>sudo -u admin -EH java -jar arthas-boot.jar</code>。</li>\n<li>如果 attach 不上目标进程，可以查看<code>~/logs/arthas/</code>目录下的日志。</li>\n</ul>\n</blockquote>\n<p>执行成功后会显示 Java 进程信息，输入对应的数字序号后回车，Arthas 会 attach 到目标进程上，并输出日志。</p>\n<h5 id><a href=\"#\" class=\"headerlink\" title></a><img src=\"/posts/e1a71cf6/1685446464667-5b9471f9-ff69-4e3e-a665-9235f11676cb.png\" alt=\"启动截图\"></h5><h1 id=\"二、命令列表及其使用\"><a href=\"#二、命令列表及其使用\" class=\"headerlink\" title=\"二、命令列表及其使用\"></a>二、命令列表及其使用</h1><h2 id=\"2-1-JVM-相关\"><a href=\"#2-1-JVM-相关\" class=\"headerlink\" title=\"2.1 JVM 相关\"></a>2.1 JVM 相关</h2><h3 id=\"2-1-1-dashboard-当前系统的实时数据面板\"><a href=\"#2-1-1-dashboard-当前系统的实时数据面板\" class=\"headerlink\" title=\"2.1.1 dashboard - 当前系统的实时数据面板\"></a>2.1.1 dashboard - 当前系统的实时数据面板</h3><h4 id=\"2-1-1-1-作用\"><a href=\"#2-1-1-1-作用\" class=\"headerlink\" title=\"2.1.1.1 作用\"></a>2.1.1.1 作用</h4><p>显示当前系统的实时数据面板，按 <code>ctrl+c</code>退出。</p>\n<h4 id=\"2-1-1-2-参数说明\"><a href=\"#2-1-1-2-参数说明\" class=\"headerlink\" title=\"2.1.1.2 参数说明\"></a>2.1.1.2 参数说明</h4><table>\n<thead>\n<tr>\n<th align=\"center\"><strong>参数名称</strong></th>\n<th align=\"center\"><strong>参数说明</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">[i:]</td>\n<td align=\"center\">刷新实时数据的时间间隔 (ms)，默认 5000ms</td>\n</tr>\n<tr>\n<td align=\"center\">[n:]</td>\n<td align=\"center\">刷新实时数据的次数</td>\n</tr>\n</tbody></table>\n<p>实例：<code>dashboard -i 1000 -n 2</code> ：每1000ms刷新一次，刷新两次。</p>\n<h4 id=\"2-1-1-3-数据说明\"><a href=\"#2-1-1-3-数据说明\" class=\"headerlink\" title=\"2.1.1.3 数据说明\"></a>2.1.1.3 数据说明</h4><p><img src=\"/posts/e1a71cf6/1685498254758-2eb0afda-67ca-4d45-9a87-c3c08b555c70.png\" alt=\"dashboard运行截图\"></p>\n<ul>\n<li>ID: Java 级别的线程 ID，注意这个 ID 不能跟 jstack 中的 nativeID 一一对应。</li>\n<li>NAME: 线程名</li>\n<li>GROUP: 线程组名</li>\n<li>PRIORITY: 线程优先级, 1~10 之间的数字，越大表示优先级越高</li>\n<li>STATE: 线程的状态</li>\n<li>CPU%: 线程的 cpu 使用率。比如采样间隔 1000ms，某个线程的增量 cpu 时间为 100ms，则 cpu 使用率&#x3D;100&#x2F;1000&#x3D;10%</li>\n<li>DELTA_TIME: 上次采样之后线程运行增量 CPU 时间，数据格式为秒</li>\n<li>TIME: 线程运行总 CPU 时间，数据格式为分:秒</li>\n<li>INTERRUPTED: 线程当前的中断位状态</li>\n<li>DAEMON: 是否是 daemon 线程</li>\n</ul>\n<p>从上图中可以看到有些线程的 ID、PRIORITY 为-1，且没有状态等属性，这是因为这些线程是 JVM 内部线程。</p>\n<h4 id=\"2-1-1-4-JVM-内部线程\"><a href=\"#2-1-1-4-JVM-内部线程\" class=\"headerlink\" title=\"2.1.1.4 JVM 内部线程\"></a>2.1.1.4 JVM 内部线程</h4><p>Java 8 之后支持获取 JVM 内部线程 CPU 时间，这些线程只有名称和 CPU 时间，没有 ID 及状态等信息（显示 ID 为-1）。 通过内部线程可以观测到 JVM 活动，如 GC、JIT 编译等占用 CPU 情况，方便了解 JVM 整体运行状况。</p>\n<ul>\n<li>当 JVM 堆(heap)&#x2F;元数据(metaspace)空间不足或 OOM 时，可以看到 GC 线程的 CPU 占用率明显高于其他的线程。</li>\n<li>当执行 <code>trace/watch/tt/redefine</code>等命令后，可以看到 JIT 线程活动变得更频繁。因为 JVM 热更新 class 字节码时清除了此 class 相关的 JIT 编译结果，需要重新编译。</li>\n</ul>\n<p>JVM 内部线程包括下面几种：</p>\n<ul>\n<li>JIT 编译线程: 如 <code>C2 CompilerThread0</code>, <code>C1 CompilerThread2</code></li>\n<li>GC 线程: 如 <code>GC Thread0</code>, <code>G1 Young RemSet Sampling</code></li>\n<li>其它内部线程: 如 <code>VM Periodic Task Thread</code>, <code>VM Thread</code>, <code>Service Thread</code></li>\n</ul>\n<h3 id=\"2-1-2-ognl-执行-ognl-表达式\"><a href=\"#2-1-2-ognl-执行-ognl-表达式\" class=\"headerlink\" title=\"2.1.2 ognl - 执行 ognl 表达式\"></a>2.1.2 ognl - 执行 ognl 表达式</h3><h4 id=\"2-1-2-1-作用\"><a href=\"#2-1-2-1-作用\" class=\"headerlink\" title=\"2.1.2.1 作用\"></a>2.1.2.1 作用</h4><p>执行 ognl 表达式</p>\n<h4 id=\"2-1-2-2-参数说明\"><a href=\"#2-1-2-2-参数说明\" class=\"headerlink\" title=\"2.1.2.2 参数说明\"></a>2.1.2.2 参数说明</h4><table>\n<thead>\n<tr>\n<th align=\"center\"><strong>参数名称</strong></th>\n<th align=\"center\"><strong>参数说明</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><em>express</em></td>\n<td align=\"center\">执行的表达式</td>\n</tr>\n<tr>\n<td align=\"center\">[c:]</td>\n<td align=\"center\">执行表达式的 ClassLoader 的 hashcode，默认值是 SystemClassLoader</td>\n</tr>\n<tr>\n<td align=\"center\">[classLoaderClass:]</td>\n<td align=\"center\">指定执行表达式的 ClassLoader 的 class name</td>\n</tr>\n<tr>\n<td align=\"center\">[x]</td>\n<td align=\"center\">结果对象的展开层次，默认值 1</td>\n</tr>\n</tbody></table>\n<h4 id=\"2-1-2-3-ognl-表达式说明\"><a href=\"#2-1-2-3-ognl-表达式说明\" class=\"headerlink\" title=\"2.1.2.3 ognl 表达式说明\"></a>2.1.2.3 ognl 表达式说明</h4><h5 id=\"2-1-2-3-1-语法\"><a href=\"#2-1-2-3-1-语法\" class=\"headerlink\" title=\"2.1.2.3.1 语法\"></a>2.1.2.3.1 语法</h5><p>基本的 OGNL 表达式非常简单。该语言的特性已经变得非常丰富，但是您通常不需要担心该语言中更复杂的部分：简单的情况仍然如此。例如，要获取对象的 name 属性，OGNL 表达式就是 <code>name</code>。要获取由 headline 属性返回的对象的 text 属性，OGNL 表达式是 <code>headline.text</code>。</p>\n<p>OGNL 表达式的基本单元是导航链，通常简称为“链”。最简单的链条由以下部分组成：</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><strong>表达式元素部分</strong></th>\n<th align=\"center\"><strong>例子</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">属性名称</td>\n<td align=\"center\">比如上面示例中的 <code>name</code>和 <code>headline.text</code>。</td>\n</tr>\n<tr>\n<td align=\"center\">方法调用</td>\n<td align=\"center\"><code>hashCode()</code>返回当前对象的哈希码</td>\n</tr>\n<tr>\n<td align=\"center\">数组索引</td>\n<td align=\"center\"><code>listeners[0]</code>返回当前对象 listeners 列表中的第一个</td>\n</tr>\n</tbody></table>\n<p>所有 OGNL 表达式都在当前对象的上下文中求值，而链只是使用链中前一个链接的结果作为下一个链接的当前对象。你想把链条拉长多长都行。例如，这条链：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">name.toCharArray()[0].numericValue.toString()</span><br></pre></td></tr></table></figure>\n\n<p>这个表达式按照以下步骤进行计算：</p>\n<ol>\n<li>提取初始或根对象（用户通过 OGNL 上下文提供给 OGNL ）的 name 属性；</li>\n<li>在结果字符串上调用 toCharArray() 方法；</li>\n<li>从结果数组中提取第一个字符（索引为0的字符）；</li>\n<li>从该字符获取 numericValue 属性(字符表示为 <code>Character</code>对象，<code>Character</code>类有一个名为 getNumericValue() 的方法)。</li>\n<li>在结果 Integer 对象上调用 toString()。这个表达式的最终结果是最后一次 toString() 调用返回的 String。</li>\n</ol>\n<p>请注意，这个示例只能用于从对象获取值，而不能用于设置值。将上述表达式传递给 Ognl.setValue() 方法将导致InappropriateExpressionException被抛出，因为链中的最后一个链接既不是属性名也不是数组索引。</p>\n<h5 id=\"2-1-2-3-2-表达式\"><a href=\"#2-1-2-3-2-表达式\" class=\"headerlink\" title=\"2.1.2.3.2 表达式\"></a>2.1.2.3.2 表达式</h5><p>本节概述了 OGNL 表达式元素的细节。</p>\n<p><strong>常量</strong></p>\n<p>OGNL 有以下几种常量：</p>\n<ul>\n<li>String 字面值，如 Java 中由单引号或双引号分隔，并带有完整的转义集；</li>\n<li>Character 字面量，也与 Java 一样：由单引号分隔，也带有全套转义；</li>\n<li>数字字面值，比 Java 多一些类型。除了 Java 的整型、长型、浮点数和双精度外，OGNL 还允许您指定带有“b”或“b”后缀的 BigDecimals，以及带有“h”或“h”后缀的 BigIntegers(想想“huge”——我们选择了“h”表示)；</li>\n<li>Boolean：true 或者 false；</li>\n<li>null</li>\n</ul>\n<p><strong>引用属性</strong></p>\n<p>OGNL 在处理属性引用时以不同的方式对待不同类型的对象。映射将所有属性引用视为元素查找或存储，并将属性名称作为键。列表和数组类似地处理数字属性，以属性名作为索引，但处理字符串属性的方式与普通对象相同。普通对象（即所有其他类型的对象）只能通过使用“get”和“set”方法（或“is”和“set”）处理字符串属性，如果对象有这些方法，或者使用给定名称的字段处理字符串属性。</p>\n<p>注意这里的新术语。属性“名称”可以是任何类型，而不仅仅是字符串。但是要引用非字符串属性，必须使用我们一直称为“索引”的符号。例如，要获取一个数组的长度，你可以使用这个表达式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.length</span><br></pre></td></tr></table></figure>\n\n<p>但是要获取数组的元素0，你必须使用这样的表达式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array[0]</span><br></pre></td></tr></table></figure>\n\n<p><strong>索引</strong></p>\n<p>如上所述，“索引”表示法实际上只是属性引用，尽管是一种计算形式的属性引用，而不是常数形式。<br>例如，OGNL在内部处理 <code>array.length</code>表达式与这个表达式完全相同：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array[&quot;length&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>这个表达式会有相同的结果（尽管内部形式不同）：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array[&quot;len&quot; + &quot;gth&quot;]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-1-3-getstatic-查看类的静态属性\"><a href=\"#2-1-3-getstatic-查看类的静态属性\" class=\"headerlink\" title=\"2.1.3 getstatic - 查看类的静态属性\"></a>2.1.3 getstatic - 查看类的静态属性</h3><h3 id=\"2-1-4-heapdump-dump-java-heap-类似-jmap-命令的-heap-dump-功能\"><a href=\"#2-1-4-heapdump-dump-java-heap-类似-jmap-命令的-heap-dump-功能\" class=\"headerlink\" title=\"2.1.4 heapdump - dump java heap, 类似 jmap 命令的 heap dump 功能\"></a>2.1.4 heapdump - dump java heap, 类似 jmap 命令的 heap dump 功能</h3><h3 id=\"2-1-5-jvm-查看当前-JVM-的信息\"><a href=\"#2-1-5-jvm-查看当前-JVM-的信息\" class=\"headerlink\" title=\"2.1.5 jvm - 查看当前 JVM 的信息\"></a>2.1.5 jvm - 查看当前 JVM 的信息</h3><h3 id=\"2-1-6-logger-查看和修改-logger\"><a href=\"#2-1-6-logger-查看和修改-logger\" class=\"headerlink\" title=\"2.1.6 logger - 查看和修改 logger\"></a>2.1.6 logger - 查看和修改 logger</h3><h3 id=\"2-1-7-mbean-查看-Mbean-的信息\"><a href=\"#2-1-7-mbean-查看-Mbean-的信息\" class=\"headerlink\" title=\"2.1.7 mbean - 查看 Mbean 的信息\"></a>2.1.7 mbean - 查看 Mbean 的信息</h3><h3 id=\"2-1-8-memory-查看-JVM-的内存信息\"><a href=\"#2-1-8-memory-查看-JVM-的内存信息\" class=\"headerlink\" title=\"2.1.8 memory - 查看 JVM 的内存信息\"></a>2.1.8 memory - 查看 JVM 的内存信息</h3><h3 id=\"2-1-9-perfcounter-查看当前-JVM-的-Perf-Counter-信息\"><a href=\"#2-1-9-perfcounter-查看当前-JVM-的-Perf-Counter-信息\" class=\"headerlink\" title=\"2.1.9 perfcounter - 查看当前 JVM 的 Perf Counter 信息\"></a>2.1.9 perfcounter - 查看当前 JVM 的 Perf Counter 信息</h3><h3 id=\"2-1-10-sysenv-查看-JVM-的环境变量\"><a href=\"#2-1-10-sysenv-查看-JVM-的环境变量\" class=\"headerlink\" title=\"2.1.10 sysenv - 查看 JVM 的环境变量\"></a>2.1.10 sysenv - 查看 JVM 的环境变量</h3><h3 id=\"2-1-11-sysprop-查看和修改-JVM-的系统属性\"><a href=\"#2-1-11-sysprop-查看和修改-JVM-的系统属性\" class=\"headerlink\" title=\"2.1.11 sysprop - 查看和修改 JVM 的系统属性\"></a>2.1.11 sysprop - 查看和修改 JVM 的系统属性</h3><h3 id=\"2-1-12-thread-查看当前-JVM-的线程堆栈信息\"><a href=\"#2-1-12-thread-查看当前-JVM-的线程堆栈信息\" class=\"headerlink\" title=\"2.1.12 thread - 查看当前 JVM 的线程堆栈信息\"></a>2.1.12 thread - 查看当前 JVM 的线程堆栈信息</h3><h3 id=\"2-1-13-vmoption-查看和修改-JVM-里诊断相关的-option\"><a href=\"#2-1-13-vmoption-查看和修改-JVM-里诊断相关的-option\" class=\"headerlink\" title=\"2.1.13 vmoption - 查看和修改 JVM 里诊断相关的 option\"></a>2.1.13 vmoption - 查看和修改 JVM 里诊断相关的 option</h3><h3 id=\"2-1-14-vmtool-从-jvm-里查询对象\"><a href=\"#2-1-14-vmtool-从-jvm-里查询对象\" class=\"headerlink\" title=\"2.1.14 vmtool - 从 jvm 里查询对象\"></a>2.1.14 vmtool - 从 jvm 里查询对象</h3>","site":{"data":{}},"cover_type":"img","excerpt":"","more":"<h1 id=\"一、简介\"><a href=\"#一、简介\" class=\"headerlink\" title=\"一、简介\"></a>一、简介</h1><h2 id=\"1-1-什么是-Arthas\"><a href=\"#1-1-什么是-Arthas\" class=\"headerlink\" title=\"1.1 什么是 Arthas\"></a>1.1 什么是 Arthas</h2><p>Arthas 是一款线上监控诊断产品，通过全局视角实时查看应用 load、内存、gc、线程的状态信息，并能在不修改应用代码的情况下，对业务问题进行诊断，包括查看方法调用的出入参、异常，监测方法执行耗时，类加载信息等，大大提升线上问题排查效率。</p>\n<h2 id=\"1-2-下载-Arthas\"><a href=\"#1-2-下载-Arthas\" class=\"headerlink\" title=\"1.2 下载 Arthas\"></a>1.2 下载 Arthas</h2><p>下载地址：<a href=\"https://arthas.aliyun.com/download/latest_version?mirror=aliyun\">https://arthas.aliyun.com/download/latest_version?mirror=aliyun</a></p>\n<h2 id=\"1-3-启动方式\"><a href=\"#1-3-启动方式\" class=\"headerlink\" title=\"1.3 启动方式\"></a>1.3 启动方式</h2><p>将下载的文件解压后，可以看到有 <code>as.sh</code>和 <code>arthas-boot.jar</code>，有两种启动方式</p>\n<ul>\n<li>直接执行 <code>./as.sh</code>启动</li>\n<li>执行 <code>java -jar arthas-boot.jar</code>启动</li>\n</ul>\n<blockquote>\n<p>需要注意的是：使用和目标进程一致的用户启动，否则可能 attach 失败</p>\n<ul>\n<li>执行该程序的用户需要和目标进程具有相同的权限。比如以 <code>admin</code>用户来执行：<code>sudo su admin &amp;&amp; java -jar arthas-boot.jar</code>或 <code>sudo -u admin -EH java -jar arthas-boot.jar</code>。</li>\n<li>如果 attach 不上目标进程，可以查看<code>~/logs/arthas/</code>目录下的日志。</li>\n</ul>\n</blockquote>\n<p>执行成功后会显示 Java 进程信息，输入对应的数字序号后回车，Arthas 会 attach 到目标进程上，并输出日志。</p>\n<h5 id><a href=\"#\" class=\"headerlink\" title></a><img src=\"/posts/e1a71cf6/1685446464667-5b9471f9-ff69-4e3e-a665-9235f11676cb.png\" alt=\"启动截图\"></h5><h1 id=\"二、命令列表及其使用\"><a href=\"#二、命令列表及其使用\" class=\"headerlink\" title=\"二、命令列表及其使用\"></a>二、命令列表及其使用</h1><h2 id=\"2-1-JVM-相关\"><a href=\"#2-1-JVM-相关\" class=\"headerlink\" title=\"2.1 JVM 相关\"></a>2.1 JVM 相关</h2><h3 id=\"2-1-1-dashboard-当前系统的实时数据面板\"><a href=\"#2-1-1-dashboard-当前系统的实时数据面板\" class=\"headerlink\" title=\"2.1.1 dashboard - 当前系统的实时数据面板\"></a>2.1.1 dashboard - 当前系统的实时数据面板</h3><h4 id=\"2-1-1-1-作用\"><a href=\"#2-1-1-1-作用\" class=\"headerlink\" title=\"2.1.1.1 作用\"></a>2.1.1.1 作用</h4><p>显示当前系统的实时数据面板，按 <code>ctrl+c</code>退出。</p>\n<h4 id=\"2-1-1-2-参数说明\"><a href=\"#2-1-1-2-参数说明\" class=\"headerlink\" title=\"2.1.1.2 参数说明\"></a>2.1.1.2 参数说明</h4><table>\n<thead>\n<tr>\n<th align=\"center\"><strong>参数名称</strong></th>\n<th align=\"center\"><strong>参数说明</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">[i:]</td>\n<td align=\"center\">刷新实时数据的时间间隔 (ms)，默认 5000ms</td>\n</tr>\n<tr>\n<td align=\"center\">[n:]</td>\n<td align=\"center\">刷新实时数据的次数</td>\n</tr>\n</tbody></table>\n<p>实例：<code>dashboard -i 1000 -n 2</code> ：每1000ms刷新一次，刷新两次。</p>\n<h4 id=\"2-1-1-3-数据说明\"><a href=\"#2-1-1-3-数据说明\" class=\"headerlink\" title=\"2.1.1.3 数据说明\"></a>2.1.1.3 数据说明</h4><p><img src=\"/posts/e1a71cf6/1685498254758-2eb0afda-67ca-4d45-9a87-c3c08b555c70.png\" alt=\"dashboard运行截图\"></p>\n<ul>\n<li>ID: Java 级别的线程 ID，注意这个 ID 不能跟 jstack 中的 nativeID 一一对应。</li>\n<li>NAME: 线程名</li>\n<li>GROUP: 线程组名</li>\n<li>PRIORITY: 线程优先级, 1~10 之间的数字，越大表示优先级越高</li>\n<li>STATE: 线程的状态</li>\n<li>CPU%: 线程的 cpu 使用率。比如采样间隔 1000ms，某个线程的增量 cpu 时间为 100ms，则 cpu 使用率&#x3D;100&#x2F;1000&#x3D;10%</li>\n<li>DELTA_TIME: 上次采样之后线程运行增量 CPU 时间，数据格式为秒</li>\n<li>TIME: 线程运行总 CPU 时间，数据格式为分:秒</li>\n<li>INTERRUPTED: 线程当前的中断位状态</li>\n<li>DAEMON: 是否是 daemon 线程</li>\n</ul>\n<p>从上图中可以看到有些线程的 ID、PRIORITY 为-1，且没有状态等属性，这是因为这些线程是 JVM 内部线程。</p>\n<h4 id=\"2-1-1-4-JVM-内部线程\"><a href=\"#2-1-1-4-JVM-内部线程\" class=\"headerlink\" title=\"2.1.1.4 JVM 内部线程\"></a>2.1.1.4 JVM 内部线程</h4><p>Java 8 之后支持获取 JVM 内部线程 CPU 时间，这些线程只有名称和 CPU 时间，没有 ID 及状态等信息（显示 ID 为-1）。 通过内部线程可以观测到 JVM 活动，如 GC、JIT 编译等占用 CPU 情况，方便了解 JVM 整体运行状况。</p>\n<ul>\n<li>当 JVM 堆(heap)&#x2F;元数据(metaspace)空间不足或 OOM 时，可以看到 GC 线程的 CPU 占用率明显高于其他的线程。</li>\n<li>当执行 <code>trace/watch/tt/redefine</code>等命令后，可以看到 JIT 线程活动变得更频繁。因为 JVM 热更新 class 字节码时清除了此 class 相关的 JIT 编译结果，需要重新编译。</li>\n</ul>\n<p>JVM 内部线程包括下面几种：</p>\n<ul>\n<li>JIT 编译线程: 如 <code>C2 CompilerThread0</code>, <code>C1 CompilerThread2</code></li>\n<li>GC 线程: 如 <code>GC Thread0</code>, <code>G1 Young RemSet Sampling</code></li>\n<li>其它内部线程: 如 <code>VM Periodic Task Thread</code>, <code>VM Thread</code>, <code>Service Thread</code></li>\n</ul>\n<h3 id=\"2-1-2-ognl-执行-ognl-表达式\"><a href=\"#2-1-2-ognl-执行-ognl-表达式\" class=\"headerlink\" title=\"2.1.2 ognl - 执行 ognl 表达式\"></a>2.1.2 ognl - 执行 ognl 表达式</h3><h4 id=\"2-1-2-1-作用\"><a href=\"#2-1-2-1-作用\" class=\"headerlink\" title=\"2.1.2.1 作用\"></a>2.1.2.1 作用</h4><p>执行 ognl 表达式</p>\n<h4 id=\"2-1-2-2-参数说明\"><a href=\"#2-1-2-2-参数说明\" class=\"headerlink\" title=\"2.1.2.2 参数说明\"></a>2.1.2.2 参数说明</h4><table>\n<thead>\n<tr>\n<th align=\"center\"><strong>参数名称</strong></th>\n<th align=\"center\"><strong>参数说明</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><em>express</em></td>\n<td align=\"center\">执行的表达式</td>\n</tr>\n<tr>\n<td align=\"center\">[c:]</td>\n<td align=\"center\">执行表达式的 ClassLoader 的 hashcode，默认值是 SystemClassLoader</td>\n</tr>\n<tr>\n<td align=\"center\">[classLoaderClass:]</td>\n<td align=\"center\">指定执行表达式的 ClassLoader 的 class name</td>\n</tr>\n<tr>\n<td align=\"center\">[x]</td>\n<td align=\"center\">结果对象的展开层次，默认值 1</td>\n</tr>\n</tbody></table>\n<h4 id=\"2-1-2-3-ognl-表达式说明\"><a href=\"#2-1-2-3-ognl-表达式说明\" class=\"headerlink\" title=\"2.1.2.3 ognl 表达式说明\"></a>2.1.2.3 ognl 表达式说明</h4><h5 id=\"2-1-2-3-1-语法\"><a href=\"#2-1-2-3-1-语法\" class=\"headerlink\" title=\"2.1.2.3.1 语法\"></a>2.1.2.3.1 语法</h5><p>基本的 OGNL 表达式非常简单。该语言的特性已经变得非常丰富，但是您通常不需要担心该语言中更复杂的部分：简单的情况仍然如此。例如，要获取对象的 name 属性，OGNL 表达式就是 <code>name</code>。要获取由 headline 属性返回的对象的 text 属性，OGNL 表达式是 <code>headline.text</code>。</p>\n<p>OGNL 表达式的基本单元是导航链，通常简称为“链”。最简单的链条由以下部分组成：</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"><strong>表达式元素部分</strong></th>\n<th align=\"center\"><strong>例子</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">属性名称</td>\n<td align=\"center\">比如上面示例中的 <code>name</code>和 <code>headline.text</code>。</td>\n</tr>\n<tr>\n<td align=\"center\">方法调用</td>\n<td align=\"center\"><code>hashCode()</code>返回当前对象的哈希码</td>\n</tr>\n<tr>\n<td align=\"center\">数组索引</td>\n<td align=\"center\"><code>listeners[0]</code>返回当前对象 listeners 列表中的第一个</td>\n</tr>\n</tbody></table>\n<p>所有 OGNL 表达式都在当前对象的上下文中求值，而链只是使用链中前一个链接的结果作为下一个链接的当前对象。你想把链条拉长多长都行。例如，这条链：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">name.toCharArray()[0].numericValue.toString()</span><br></pre></td></tr></table></figure>\n\n<p>这个表达式按照以下步骤进行计算：</p>\n<ol>\n<li>提取初始或根对象（用户通过 OGNL 上下文提供给 OGNL ）的 name 属性；</li>\n<li>在结果字符串上调用 toCharArray() 方法；</li>\n<li>从结果数组中提取第一个字符（索引为0的字符）；</li>\n<li>从该字符获取 numericValue 属性(字符表示为 <code>Character</code>对象，<code>Character</code>类有一个名为 getNumericValue() 的方法)。</li>\n<li>在结果 Integer 对象上调用 toString()。这个表达式的最终结果是最后一次 toString() 调用返回的 String。</li>\n</ol>\n<p>请注意，这个示例只能用于从对象获取值，而不能用于设置值。将上述表达式传递给 Ognl.setValue() 方法将导致InappropriateExpressionException被抛出，因为链中的最后一个链接既不是属性名也不是数组索引。</p>\n<h5 id=\"2-1-2-3-2-表达式\"><a href=\"#2-1-2-3-2-表达式\" class=\"headerlink\" title=\"2.1.2.3.2 表达式\"></a>2.1.2.3.2 表达式</h5><p>本节概述了 OGNL 表达式元素的细节。</p>\n<p><strong>常量</strong></p>\n<p>OGNL 有以下几种常量：</p>\n<ul>\n<li>String 字面值，如 Java 中由单引号或双引号分隔，并带有完整的转义集；</li>\n<li>Character 字面量，也与 Java 一样：由单引号分隔，也带有全套转义；</li>\n<li>数字字面值，比 Java 多一些类型。除了 Java 的整型、长型、浮点数和双精度外，OGNL 还允许您指定带有“b”或“b”后缀的 BigDecimals，以及带有“h”或“h”后缀的 BigIntegers(想想“huge”——我们选择了“h”表示)；</li>\n<li>Boolean：true 或者 false；</li>\n<li>null</li>\n</ul>\n<p><strong>引用属性</strong></p>\n<p>OGNL 在处理属性引用时以不同的方式对待不同类型的对象。映射将所有属性引用视为元素查找或存储，并将属性名称作为键。列表和数组类似地处理数字属性，以属性名作为索引，但处理字符串属性的方式与普通对象相同。普通对象（即所有其他类型的对象）只能通过使用“get”和“set”方法（或“is”和“set”）处理字符串属性，如果对象有这些方法，或者使用给定名称的字段处理字符串属性。</p>\n<p>注意这里的新术语。属性“名称”可以是任何类型，而不仅仅是字符串。但是要引用非字符串属性，必须使用我们一直称为“索引”的符号。例如，要获取一个数组的长度，你可以使用这个表达式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.length</span><br></pre></td></tr></table></figure>\n\n<p>但是要获取数组的元素0，你必须使用这样的表达式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array[0]</span><br></pre></td></tr></table></figure>\n\n<p><strong>索引</strong></p>\n<p>如上所述，“索引”表示法实际上只是属性引用，尽管是一种计算形式的属性引用，而不是常数形式。<br>例如，OGNL在内部处理 <code>array.length</code>表达式与这个表达式完全相同：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array[&quot;length&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>这个表达式会有相同的结果（尽管内部形式不同）：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array[&quot;len&quot; + &quot;gth&quot;]</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-1-3-getstatic-查看类的静态属性\"><a href=\"#2-1-3-getstatic-查看类的静态属性\" class=\"headerlink\" title=\"2.1.3 getstatic - 查看类的静态属性\"></a>2.1.3 getstatic - 查看类的静态属性</h3><h3 id=\"2-1-4-heapdump-dump-java-heap-类似-jmap-命令的-heap-dump-功能\"><a href=\"#2-1-4-heapdump-dump-java-heap-类似-jmap-命令的-heap-dump-功能\" class=\"headerlink\" title=\"2.1.4 heapdump - dump java heap, 类似 jmap 命令的 heap dump 功能\"></a>2.1.4 heapdump - dump java heap, 类似 jmap 命令的 heap dump 功能</h3><h3 id=\"2-1-5-jvm-查看当前-JVM-的信息\"><a href=\"#2-1-5-jvm-查看当前-JVM-的信息\" class=\"headerlink\" title=\"2.1.5 jvm - 查看当前 JVM 的信息\"></a>2.1.5 jvm - 查看当前 JVM 的信息</h3><h3 id=\"2-1-6-logger-查看和修改-logger\"><a href=\"#2-1-6-logger-查看和修改-logger\" class=\"headerlink\" title=\"2.1.6 logger - 查看和修改 logger\"></a>2.1.6 logger - 查看和修改 logger</h3><h3 id=\"2-1-7-mbean-查看-Mbean-的信息\"><a href=\"#2-1-7-mbean-查看-Mbean-的信息\" class=\"headerlink\" title=\"2.1.7 mbean - 查看 Mbean 的信息\"></a>2.1.7 mbean - 查看 Mbean 的信息</h3><h3 id=\"2-1-8-memory-查看-JVM-的内存信息\"><a href=\"#2-1-8-memory-查看-JVM-的内存信息\" class=\"headerlink\" title=\"2.1.8 memory - 查看 JVM 的内存信息\"></a>2.1.8 memory - 查看 JVM 的内存信息</h3><h3 id=\"2-1-9-perfcounter-查看当前-JVM-的-Perf-Counter-信息\"><a href=\"#2-1-9-perfcounter-查看当前-JVM-的-Perf-Counter-信息\" class=\"headerlink\" title=\"2.1.9 perfcounter - 查看当前 JVM 的 Perf Counter 信息\"></a>2.1.9 perfcounter - 查看当前 JVM 的 Perf Counter 信息</h3><h3 id=\"2-1-10-sysenv-查看-JVM-的环境变量\"><a href=\"#2-1-10-sysenv-查看-JVM-的环境变量\" class=\"headerlink\" title=\"2.1.10 sysenv - 查看 JVM 的环境变量\"></a>2.1.10 sysenv - 查看 JVM 的环境变量</h3><h3 id=\"2-1-11-sysprop-查看和修改-JVM-的系统属性\"><a href=\"#2-1-11-sysprop-查看和修改-JVM-的系统属性\" class=\"headerlink\" title=\"2.1.11 sysprop - 查看和修改 JVM 的系统属性\"></a>2.1.11 sysprop - 查看和修改 JVM 的系统属性</h3><h3 id=\"2-1-12-thread-查看当前-JVM-的线程堆栈信息\"><a href=\"#2-1-12-thread-查看当前-JVM-的线程堆栈信息\" class=\"headerlink\" title=\"2.1.12 thread - 查看当前 JVM 的线程堆栈信息\"></a>2.1.12 thread - 查看当前 JVM 的线程堆栈信息</h3><h3 id=\"2-1-13-vmoption-查看和修改-JVM-里诊断相关的-option\"><a href=\"#2-1-13-vmoption-查看和修改-JVM-里诊断相关的-option\" class=\"headerlink\" title=\"2.1.13 vmoption - 查看和修改 JVM 里诊断相关的 option\"></a>2.1.13 vmoption - 查看和修改 JVM 里诊断相关的 option</h3><h3 id=\"2-1-14-vmtool-从-jvm-里查询对象\"><a href=\"#2-1-14-vmtool-从-jvm-里查询对象\" class=\"headerlink\" title=\"2.1.14 vmtool - 从 jvm 里查询对象\"></a>2.1.14 vmtool - 从 jvm 里查询对象</h3>"},{"title":"PostgreSQL定位问题时常用SQL","toc":true,"abbrlink":"f1ecacbb","date":"2023-08-01T06:21:30.000Z","cover":"/img/cover/PostgreSQL定位问题时常用SQL.jpeg","password":null,"_content":"\n\n\n# 一、查看当前正在运行的 SQL\n\n## 1.1 SQL 语句\n\n```sql\nSELECT \nprocpid, \nstart, \nnow() - start AS lap, \ncurrent_query \nFROM \n(SELECT \nbackendid, \npg_stat_get_backend_pid(S.backendid) AS procpid, \npg_stat_get_backend_activity_start(S.backendid) AS start, \npg_stat_get_backend_activity(S.backendid) AS current_query \nFROM \n(SELECT pg_stat_get_backend_idset() AS backendid) AS S \n) AS S \nWHERE \ncurrent_query <> 'idle' \nORDER BY \nlap DESC; \n```\n\n## 1.2 字段说明\n\n|    字段名     |     说明     |\n| :-----------: | :----------: |\n|    procpid    |   进程 id    |\n|     start     | 进程开始时间 |\n|      lap      |   经过时间   |\n| current_query | 执行中的 SQL |\n\n## 1.3 停止正在执行的 SQL\n\n### 1.3.1 方法一\n\n```sql\nSELECT pg_cancel_backend(进程id);\n```\n\n### 1.3.2 方法二\n\n使用系统命令 `kill -9 进程id`\n\n# 二、查看当前事务锁等待、持锁信息的 SQL\n\n## 2.1 SQL 语句\n\n```sql\nwith    \nt_wait as    \n(    \n  select a.mode,a.locktype,a.database,a.relation,a.page,a.tuple,a.classid,a.granted,   \n  a.objid,a.objsubid,a.pid,a.virtualtransaction,a.virtualxid,a.transactionid,a.fastpath,    \n  b.state,b.query,b.xact_start,b.query_start,b.usename,b.datname,b.client_addr,b.client_port,b.application_name   \n    from pg_locks a,pg_stat_activity b where a.pid=b.pid and not a.granted   \n),   \nt_run as   \n(   \n  select a.mode,a.locktype,a.database,a.relation,a.page,a.tuple,a.classid,a.granted,   \n  a.objid,a.objsubid,a.pid,a.virtualtransaction,a.virtualxid,a.transactionid,a.fastpath,   \n  b.state,b.query,b.xact_start,b.query_start,b.usename,b.datname,b.client_addr,b.client_port,b.application_name   \n    from pg_locks a,pg_stat_activity b where a.pid=b.pid and a.granted   \n),   \nt_overlap as   \n(   \n  select r.* from t_wait w join t_run r on   \n  (   \n    r.locktype is not distinct from w.locktype and   \n    r.database is not distinct from w.database and   \n    r.relation is not distinct from w.relation and   \n    r.page is not distinct from w.page and   \n    r.tuple is not distinct from w.tuple and   \n    r.virtualxid is not distinct from w.virtualxid and   \n    r.transactionid is not distinct from w.transactionid and   \n    r.classid is not distinct from w.classid and   \n    r.objid is not distinct from w.objid and   \n    r.objsubid is not distinct from w.objsubid and   \n    r.pid <> w.pid   \n  )    \n),    \nt_unionall as    \n(    \n  select r.* from t_overlap r    \n  union all    \n  select w.* from t_wait w    \n)    \nselect locktype,datname,relation::regclass,page,tuple,virtualxid,transactionid::text,classid::regclass,objid,objsubid,   \nstring_agg(   \n'Pid: '||case when pid is null then 'NULL' else pid::text end||chr(10)||   \n'Lock_Granted: '||case when granted is null then 'NULL' else granted::text end||' , Mode: '||case when mode is null then 'NULL' else mode::text end||' , FastPath: '||case when fastpath is null then 'NULL' else fastpath::text end||' , VirtualTransaction: '||case when virtualtransaction is null then 'NULL' else virtualtransaction::text end||' , Session_State: '||case when state is null then 'NULL' else state::text end||chr(10)||   \n'Username: '||case when usename is null then 'NULL' else usename::text end||' , Database: '||case when datname is null then 'NULL' else datname::text end||' , Client_Addr: '||case when client_addr is null then 'NULL' else client_addr::text end||' , Client_Port: '||case when client_port is null then 'NULL' else client_port::text end||' , Application_Name: '||case when application_name is null then 'NULL' else application_name::text end||chr(10)||    \n'Xact_Start: '||case when xact_start is null then 'NULL' else xact_start::text end||' , Query_Start: '||case when query_start is null then 'NULL' else query_start::text end||' , Xact_Elapse: '||case when (now()-xact_start) is null then 'NULL' else (now()-xact_start)::text end||' , Query_Elapse: '||case when (now()-query_start) is null then 'NULL' else (now()-query_start)::text end||chr(10)||    \n'SQL (Current SQL in Transaction): '||chr(10)||  \ncase when query is null then 'NULL' else query::text end,    \nchr(10)||'--------'||chr(10)    \norder by    \n  (  case mode    \n    when 'INVALID' then 0   \n    when 'AccessShareLock' then 1   \n    when 'RowShareLock' then 2   \n    when 'RowExclusiveLock' then 3   \n    when 'ShareUpdateExclusiveLock' then 4   \n    when 'ShareLock' then 5   \n    when 'ShareRowExclusiveLock' then 6   \n    when 'ExclusiveLock' then 7   \n    when 'AccessExclusiveLock' then 8   \n    else 0   \n  end  ) desc,   \n  (case when granted then 0 else 1 end)  \n) as lock_conflict  \nfrom t_unionall   \ngroup by   \nlocktype,datname,relation,page,tuple,virtualxid,transactionid::text,classid,objid,objsubid ;  \n```\n\n## 2.2 字段说明\n\n|    字段名     |                             说明                             |\n| :-----------: | :----------------------------------------------------------: |\n|   locktype    | 被锁定的对象类型：relation、extend、page、tuple、transactionid、virtualxid、object、userlock、advisory |\n|    datname    |                           数据库名                           |\n|   relation    | 如果对象不是表或只是表的一部分，则此值为“NULL”，否则此值是表的OID |\n|     page      | 表中的页号，如果对象不是表行（tuple）或表页（relation page），则此值为“NULL” |\n|     tuple     |                     页内的行号（tuple）                      |\n|  virtualxid   |                          虚拟事务id                          |\n| transactionid |                            事务id                            |\n|    classid    |                    包含该对象系统目录的id                    |\n|     objid     |                     对象在系统目录的oid                      |\n|   objsubid    | 如果对象是表列（table column），此列的值为列号，这时classid和objid指向表 |\n\n","source":"_posts/PostgreSQL定位问题时常用SQL.md","raw":"---\ntitle: PostgreSQL定位问题时常用SQL\ntoc: true\ntags:\n  - PostgreSQL\ncategories:\n  - PostgreSQL\nabbrlink: f1ecacbb\ndate: 2023-08-01 14:21:30\ncover: /img/cover/PostgreSQL定位问题时常用SQL.jpeg\npassword:\n---\n\n\n\n# 一、查看当前正在运行的 SQL\n\n## 1.1 SQL 语句\n\n```sql\nSELECT \nprocpid, \nstart, \nnow() - start AS lap, \ncurrent_query \nFROM \n(SELECT \nbackendid, \npg_stat_get_backend_pid(S.backendid) AS procpid, \npg_stat_get_backend_activity_start(S.backendid) AS start, \npg_stat_get_backend_activity(S.backendid) AS current_query \nFROM \n(SELECT pg_stat_get_backend_idset() AS backendid) AS S \n) AS S \nWHERE \ncurrent_query <> 'idle' \nORDER BY \nlap DESC; \n```\n\n## 1.2 字段说明\n\n|    字段名     |     说明     |\n| :-----------: | :----------: |\n|    procpid    |   进程 id    |\n|     start     | 进程开始时间 |\n|      lap      |   经过时间   |\n| current_query | 执行中的 SQL |\n\n## 1.3 停止正在执行的 SQL\n\n### 1.3.1 方法一\n\n```sql\nSELECT pg_cancel_backend(进程id);\n```\n\n### 1.3.2 方法二\n\n使用系统命令 `kill -9 进程id`\n\n# 二、查看当前事务锁等待、持锁信息的 SQL\n\n## 2.1 SQL 语句\n\n```sql\nwith    \nt_wait as    \n(    \n  select a.mode,a.locktype,a.database,a.relation,a.page,a.tuple,a.classid,a.granted,   \n  a.objid,a.objsubid,a.pid,a.virtualtransaction,a.virtualxid,a.transactionid,a.fastpath,    \n  b.state,b.query,b.xact_start,b.query_start,b.usename,b.datname,b.client_addr,b.client_port,b.application_name   \n    from pg_locks a,pg_stat_activity b where a.pid=b.pid and not a.granted   \n),   \nt_run as   \n(   \n  select a.mode,a.locktype,a.database,a.relation,a.page,a.tuple,a.classid,a.granted,   \n  a.objid,a.objsubid,a.pid,a.virtualtransaction,a.virtualxid,a.transactionid,a.fastpath,   \n  b.state,b.query,b.xact_start,b.query_start,b.usename,b.datname,b.client_addr,b.client_port,b.application_name   \n    from pg_locks a,pg_stat_activity b where a.pid=b.pid and a.granted   \n),   \nt_overlap as   \n(   \n  select r.* from t_wait w join t_run r on   \n  (   \n    r.locktype is not distinct from w.locktype and   \n    r.database is not distinct from w.database and   \n    r.relation is not distinct from w.relation and   \n    r.page is not distinct from w.page and   \n    r.tuple is not distinct from w.tuple and   \n    r.virtualxid is not distinct from w.virtualxid and   \n    r.transactionid is not distinct from w.transactionid and   \n    r.classid is not distinct from w.classid and   \n    r.objid is not distinct from w.objid and   \n    r.objsubid is not distinct from w.objsubid and   \n    r.pid <> w.pid   \n  )    \n),    \nt_unionall as    \n(    \n  select r.* from t_overlap r    \n  union all    \n  select w.* from t_wait w    \n)    \nselect locktype,datname,relation::regclass,page,tuple,virtualxid,transactionid::text,classid::regclass,objid,objsubid,   \nstring_agg(   \n'Pid: '||case when pid is null then 'NULL' else pid::text end||chr(10)||   \n'Lock_Granted: '||case when granted is null then 'NULL' else granted::text end||' , Mode: '||case when mode is null then 'NULL' else mode::text end||' , FastPath: '||case when fastpath is null then 'NULL' else fastpath::text end||' , VirtualTransaction: '||case when virtualtransaction is null then 'NULL' else virtualtransaction::text end||' , Session_State: '||case when state is null then 'NULL' else state::text end||chr(10)||   \n'Username: '||case when usename is null then 'NULL' else usename::text end||' , Database: '||case when datname is null then 'NULL' else datname::text end||' , Client_Addr: '||case when client_addr is null then 'NULL' else client_addr::text end||' , Client_Port: '||case when client_port is null then 'NULL' else client_port::text end||' , Application_Name: '||case when application_name is null then 'NULL' else application_name::text end||chr(10)||    \n'Xact_Start: '||case when xact_start is null then 'NULL' else xact_start::text end||' , Query_Start: '||case when query_start is null then 'NULL' else query_start::text end||' , Xact_Elapse: '||case when (now()-xact_start) is null then 'NULL' else (now()-xact_start)::text end||' , Query_Elapse: '||case when (now()-query_start) is null then 'NULL' else (now()-query_start)::text end||chr(10)||    \n'SQL (Current SQL in Transaction): '||chr(10)||  \ncase when query is null then 'NULL' else query::text end,    \nchr(10)||'--------'||chr(10)    \norder by    \n  (  case mode    \n    when 'INVALID' then 0   \n    when 'AccessShareLock' then 1   \n    when 'RowShareLock' then 2   \n    when 'RowExclusiveLock' then 3   \n    when 'ShareUpdateExclusiveLock' then 4   \n    when 'ShareLock' then 5   \n    when 'ShareRowExclusiveLock' then 6   \n    when 'ExclusiveLock' then 7   \n    when 'AccessExclusiveLock' then 8   \n    else 0   \n  end  ) desc,   \n  (case when granted then 0 else 1 end)  \n) as lock_conflict  \nfrom t_unionall   \ngroup by   \nlocktype,datname,relation,page,tuple,virtualxid,transactionid::text,classid,objid,objsubid ;  \n```\n\n## 2.2 字段说明\n\n|    字段名     |                             说明                             |\n| :-----------: | :----------------------------------------------------------: |\n|   locktype    | 被锁定的对象类型：relation、extend、page、tuple、transactionid、virtualxid、object、userlock、advisory |\n|    datname    |                           数据库名                           |\n|   relation    | 如果对象不是表或只是表的一部分，则此值为“NULL”，否则此值是表的OID |\n|     page      | 表中的页号，如果对象不是表行（tuple）或表页（relation page），则此值为“NULL” |\n|     tuple     |                     页内的行号（tuple）                      |\n|  virtualxid   |                          虚拟事务id                          |\n| transactionid |                            事务id                            |\n|    classid    |                    包含该对象系统目录的id                    |\n|     objid     |                     对象在系统目录的oid                      |\n|   objsubid    | 如果对象是表列（table column），此列的值为列号，这时classid和objid指向表 |\n\n","slug":"PostgreSQL定位问题时常用SQL","published":1,"updated":"2023-08-01T06:52:52.216Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clkurnr3y0003xou93etu7dpm","content":"<h1 id=\"一、查看当前正在运行的-SQL\"><a href=\"#一、查看当前正在运行的-SQL\" class=\"headerlink\" title=\"一、查看当前正在运行的 SQL\"></a>一、查看当前正在运行的 SQL</h1><h2 id=\"1-1-SQL-语句\"><a href=\"#1-1-SQL-语句\" class=\"headerlink\" title=\"1.1 SQL 语句\"></a>1.1 SQL 语句</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> </span><br><span class=\"line\">procpid, </span><br><span class=\"line\"><span class=\"keyword\">start</span>, </span><br><span class=\"line\">now() <span class=\"operator\">-</span> <span class=\"keyword\">start</span> <span class=\"keyword\">AS</span> lap, </span><br><span class=\"line\">current_query </span><br><span class=\"line\"><span class=\"keyword\">FROM</span> </span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> </span><br><span class=\"line\">backendid, </span><br><span class=\"line\">pg_stat_get_backend_pid(S.backendid) <span class=\"keyword\">AS</span> procpid, </span><br><span class=\"line\">pg_stat_get_backend_activity_start(S.backendid) <span class=\"keyword\">AS</span> <span class=\"keyword\">start</span>, </span><br><span class=\"line\">pg_stat_get_backend_activity(S.backendid) <span class=\"keyword\">AS</span> current_query </span><br><span class=\"line\"><span class=\"keyword\">FROM</span> </span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> pg_stat_get_backend_idset() <span class=\"keyword\">AS</span> backendid) <span class=\"keyword\">AS</span> S </span><br><span class=\"line\">) <span class=\"keyword\">AS</span> S </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> </span><br><span class=\"line\">current_query <span class=\"operator\">&lt;&gt;</span> <span class=\"string\">&#x27;idle&#x27;</span> </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> </span><br><span class=\"line\">lap <span class=\"keyword\">DESC</span>; </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"1-2-字段说明\"><a href=\"#1-2-字段说明\" class=\"headerlink\" title=\"1.2 字段说明\"></a>1.2 字段说明</h2><table>\n<thead>\n<tr>\n<th align=\"center\">字段名</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">procpid</td>\n<td align=\"center\">进程 id</td>\n</tr>\n<tr>\n<td align=\"center\">start</td>\n<td align=\"center\">进程开始时间</td>\n</tr>\n<tr>\n<td align=\"center\">lap</td>\n<td align=\"center\">经过时间</td>\n</tr>\n<tr>\n<td align=\"center\">current_query</td>\n<td align=\"center\">执行中的 SQL</td>\n</tr>\n</tbody></table>\n<h2 id=\"1-3-停止正在执行的-SQL\"><a href=\"#1-3-停止正在执行的-SQL\" class=\"headerlink\" title=\"1.3 停止正在执行的 SQL\"></a>1.3 停止正在执行的 SQL</h2><h3 id=\"1-3-1-方法一\"><a href=\"#1-3-1-方法一\" class=\"headerlink\" title=\"1.3.1 方法一\"></a>1.3.1 方法一</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> pg_cancel_backend(进程id);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-2-方法二\"><a href=\"#1-3-2-方法二\" class=\"headerlink\" title=\"1.3.2 方法二\"></a>1.3.2 方法二</h3><p>使用系统命令 <code>kill -9 进程id</code></p>\n<h1 id=\"二、查看当前事务锁等待、持锁信息的-SQL\"><a href=\"#二、查看当前事务锁等待、持锁信息的-SQL\" class=\"headerlink\" title=\"二、查看当前事务锁等待、持锁信息的 SQL\"></a>二、查看当前事务锁等待、持锁信息的 SQL</h1><h2 id=\"2-1-SQL-语句\"><a href=\"#2-1-SQL-语句\" class=\"headerlink\" title=\"2.1 SQL 语句\"></a>2.1 SQL 语句</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">with</span>    </span><br><span class=\"line\">t_wait <span class=\"keyword\">as</span>    </span><br><span class=\"line\">(    </span><br><span class=\"line\">  <span class=\"keyword\">select</span> a.mode,a.locktype,a.database,a.relation,a.page,a.tuple,a.classid,a.granted,   </span><br><span class=\"line\">  a.objid,a.objsubid,a.pid,a.virtualtransaction,a.virtualxid,a.transactionid,a.fastpath,    </span><br><span class=\"line\">  b.state,b.query,b.xact_start,b.query_start,b.usename,b.datname,b.client_addr,b.client_port,b.application_name   </span><br><span class=\"line\">    <span class=\"keyword\">from</span> pg_locks a,pg_stat_activity b <span class=\"keyword\">where</span> a.pid<span class=\"operator\">=</span>b.pid <span class=\"keyword\">and</span> <span class=\"keyword\">not</span> a.granted   </span><br><span class=\"line\">),   </span><br><span class=\"line\">t_run <span class=\"keyword\">as</span>   </span><br><span class=\"line\">(   </span><br><span class=\"line\">  <span class=\"keyword\">select</span> a.mode,a.locktype,a.database,a.relation,a.page,a.tuple,a.classid,a.granted,   </span><br><span class=\"line\">  a.objid,a.objsubid,a.pid,a.virtualtransaction,a.virtualxid,a.transactionid,a.fastpath,   </span><br><span class=\"line\">  b.state,b.query,b.xact_start,b.query_start,b.usename,b.datname,b.client_addr,b.client_port,b.application_name   </span><br><span class=\"line\">    <span class=\"keyword\">from</span> pg_locks a,pg_stat_activity b <span class=\"keyword\">where</span> a.pid<span class=\"operator\">=</span>b.pid <span class=\"keyword\">and</span> a.granted   </span><br><span class=\"line\">),   </span><br><span class=\"line\">t_overlap <span class=\"keyword\">as</span>   </span><br><span class=\"line\">(   </span><br><span class=\"line\">  <span class=\"keyword\">select</span> r.<span class=\"operator\">*</span> <span class=\"keyword\">from</span> t_wait w <span class=\"keyword\">join</span> t_run r <span class=\"keyword\">on</span>   </span><br><span class=\"line\">  (   </span><br><span class=\"line\">    r.locktype <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.locktype <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.database <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.database <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.relation <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.relation <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.page <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.page <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.tuple <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.tuple <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.virtualxid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.virtualxid <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.transactionid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.transactionid <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.classid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.classid <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.objid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.objid <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.objsubid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.objsubid <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.pid <span class=\"operator\">&lt;&gt;</span> w.pid   </span><br><span class=\"line\">  )    </span><br><span class=\"line\">),    </span><br><span class=\"line\">t_unionall <span class=\"keyword\">as</span>    </span><br><span class=\"line\">(    </span><br><span class=\"line\">  <span class=\"keyword\">select</span> r.<span class=\"operator\">*</span> <span class=\"keyword\">from</span> t_overlap r    </span><br><span class=\"line\">  <span class=\"keyword\">union</span> <span class=\"keyword\">all</span>    </span><br><span class=\"line\">  <span class=\"keyword\">select</span> w.<span class=\"operator\">*</span> <span class=\"keyword\">from</span> t_wait w    </span><br><span class=\"line\">)    </span><br><span class=\"line\"><span class=\"keyword\">select</span> locktype,datname,relation::regclass,page,tuple,virtualxid,transactionid::text,classid::regclass,objid,objsubid,   </span><br><span class=\"line\">string_agg(   </span><br><span class=\"line\"><span class=\"string\">&#x27;Pid: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> pid <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> pid::text <span class=\"keyword\">end</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span>   </span><br><span class=\"line\"><span class=\"string\">&#x27;Lock_Granted: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> granted <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> granted::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Mode: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> mode <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> mode::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , FastPath: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> fastpath <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> fastpath::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , VirtualTransaction: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> virtualtransaction <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> virtualtransaction::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Session_State: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> state <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> state::text <span class=\"keyword\">end</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span>   </span><br><span class=\"line\"><span class=\"string\">&#x27;Username: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> usename <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> usename::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Database: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> datname <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> datname::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Client_Addr: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> client_addr <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> client_addr::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Client_Port: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> client_port <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> client_port::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Application_Name: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> application_name <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> application_name::text <span class=\"keyword\">end</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span>    </span><br><span class=\"line\"><span class=\"string\">&#x27;Xact_Start: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> xact_start <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> xact_start::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Query_Start: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> query_start <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> query_start::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Xact_Elapse: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> (now()<span class=\"operator\">-</span>xact_start) <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> (now()<span class=\"operator\">-</span>xact_start)::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Query_Elapse: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> (now()<span class=\"operator\">-</span>query_start) <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> (now()<span class=\"operator\">-</span>query_start)::text <span class=\"keyword\">end</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span>    </span><br><span class=\"line\"><span class=\"string\">&#x27;SQL (Current SQL in Transaction): &#x27;</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span>  </span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> query <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> query::text <span class=\"keyword\">end</span>,    </span><br><span class=\"line\">chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span><span class=\"string\">&#x27;--------&#x27;</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)    </span><br><span class=\"line\"><span class=\"keyword\">order</span> <span class=\"keyword\">by</span>    </span><br><span class=\"line\">  (  <span class=\"keyword\">case</span> mode    </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;INVALID&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">0</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;AccessShareLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">1</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;RowShareLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">2</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;RowExclusiveLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">3</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;ShareUpdateExclusiveLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">4</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;ShareLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">5</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;ShareRowExclusiveLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">6</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;ExclusiveLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">7</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;AccessExclusiveLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">8</span>   </span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"number\">0</span>   </span><br><span class=\"line\">  <span class=\"keyword\">end</span>  ) <span class=\"keyword\">desc</span>,   </span><br><span class=\"line\">  (<span class=\"keyword\">case</span> <span class=\"keyword\">when</span> granted <span class=\"keyword\">then</span> <span class=\"number\">0</span> <span class=\"keyword\">else</span> <span class=\"number\">1</span> <span class=\"keyword\">end</span>)  </span><br><span class=\"line\">) <span class=\"keyword\">as</span> lock_conflict  </span><br><span class=\"line\"><span class=\"keyword\">from</span> t_unionall   </span><br><span class=\"line\"><span class=\"keyword\">group</span> <span class=\"keyword\">by</span>   </span><br><span class=\"line\">locktype,datname,relation,page,tuple,virtualxid,transactionid::text,classid,objid,objsubid ;  </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-2-字段说明\"><a href=\"#2-2-字段说明\" class=\"headerlink\" title=\"2.2 字段说明\"></a>2.2 字段说明</h2><table>\n<thead>\n<tr>\n<th align=\"center\">字段名</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">locktype</td>\n<td align=\"center\">被锁定的对象类型：relation、extend、page、tuple、transactionid、virtualxid、object、userlock、advisory</td>\n</tr>\n<tr>\n<td align=\"center\">datname</td>\n<td align=\"center\">数据库名</td>\n</tr>\n<tr>\n<td align=\"center\">relation</td>\n<td align=\"center\">如果对象不是表或只是表的一部分，则此值为“NULL”，否则此值是表的OID</td>\n</tr>\n<tr>\n<td align=\"center\">page</td>\n<td align=\"center\">表中的页号，如果对象不是表行（tuple）或表页（relation page），则此值为“NULL”</td>\n</tr>\n<tr>\n<td align=\"center\">tuple</td>\n<td align=\"center\">页内的行号（tuple）</td>\n</tr>\n<tr>\n<td align=\"center\">virtualxid</td>\n<td align=\"center\">虚拟事务id</td>\n</tr>\n<tr>\n<td align=\"center\">transactionid</td>\n<td align=\"center\">事务id</td>\n</tr>\n<tr>\n<td align=\"center\">classid</td>\n<td align=\"center\">包含该对象系统目录的id</td>\n</tr>\n<tr>\n<td align=\"center\">objid</td>\n<td align=\"center\">对象在系统目录的oid</td>\n</tr>\n<tr>\n<td align=\"center\">objsubid</td>\n<td align=\"center\">如果对象是表列（table column），此列的值为列号，这时classid和objid指向表</td>\n</tr>\n</tbody></table>\n","site":{"data":{}},"cover_type":"img","excerpt":"","more":"<h1 id=\"一、查看当前正在运行的-SQL\"><a href=\"#一、查看当前正在运行的-SQL\" class=\"headerlink\" title=\"一、查看当前正在运行的 SQL\"></a>一、查看当前正在运行的 SQL</h1><h2 id=\"1-1-SQL-语句\"><a href=\"#1-1-SQL-语句\" class=\"headerlink\" title=\"1.1 SQL 语句\"></a>1.1 SQL 语句</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> </span><br><span class=\"line\">procpid, </span><br><span class=\"line\"><span class=\"keyword\">start</span>, </span><br><span class=\"line\">now() <span class=\"operator\">-</span> <span class=\"keyword\">start</span> <span class=\"keyword\">AS</span> lap, </span><br><span class=\"line\">current_query </span><br><span class=\"line\"><span class=\"keyword\">FROM</span> </span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> </span><br><span class=\"line\">backendid, </span><br><span class=\"line\">pg_stat_get_backend_pid(S.backendid) <span class=\"keyword\">AS</span> procpid, </span><br><span class=\"line\">pg_stat_get_backend_activity_start(S.backendid) <span class=\"keyword\">AS</span> <span class=\"keyword\">start</span>, </span><br><span class=\"line\">pg_stat_get_backend_activity(S.backendid) <span class=\"keyword\">AS</span> current_query </span><br><span class=\"line\"><span class=\"keyword\">FROM</span> </span><br><span class=\"line\">(<span class=\"keyword\">SELECT</span> pg_stat_get_backend_idset() <span class=\"keyword\">AS</span> backendid) <span class=\"keyword\">AS</span> S </span><br><span class=\"line\">) <span class=\"keyword\">AS</span> S </span><br><span class=\"line\"><span class=\"keyword\">WHERE</span> </span><br><span class=\"line\">current_query <span class=\"operator\">&lt;&gt;</span> <span class=\"string\">&#x27;idle&#x27;</span> </span><br><span class=\"line\"><span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> </span><br><span class=\"line\">lap <span class=\"keyword\">DESC</span>; </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"1-2-字段说明\"><a href=\"#1-2-字段说明\" class=\"headerlink\" title=\"1.2 字段说明\"></a>1.2 字段说明</h2><table>\n<thead>\n<tr>\n<th align=\"center\">字段名</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">procpid</td>\n<td align=\"center\">进程 id</td>\n</tr>\n<tr>\n<td align=\"center\">start</td>\n<td align=\"center\">进程开始时间</td>\n</tr>\n<tr>\n<td align=\"center\">lap</td>\n<td align=\"center\">经过时间</td>\n</tr>\n<tr>\n<td align=\"center\">current_query</td>\n<td align=\"center\">执行中的 SQL</td>\n</tr>\n</tbody></table>\n<h2 id=\"1-3-停止正在执行的-SQL\"><a href=\"#1-3-停止正在执行的-SQL\" class=\"headerlink\" title=\"1.3 停止正在执行的 SQL\"></a>1.3 停止正在执行的 SQL</h2><h3 id=\"1-3-1-方法一\"><a href=\"#1-3-1-方法一\" class=\"headerlink\" title=\"1.3.1 方法一\"></a>1.3.1 方法一</h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">SELECT</span> pg_cancel_backend(进程id);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-2-方法二\"><a href=\"#1-3-2-方法二\" class=\"headerlink\" title=\"1.3.2 方法二\"></a>1.3.2 方法二</h3><p>使用系统命令 <code>kill -9 进程id</code></p>\n<h1 id=\"二、查看当前事务锁等待、持锁信息的-SQL\"><a href=\"#二、查看当前事务锁等待、持锁信息的-SQL\" class=\"headerlink\" title=\"二、查看当前事务锁等待、持锁信息的 SQL\"></a>二、查看当前事务锁等待、持锁信息的 SQL</h1><h2 id=\"2-1-SQL-语句\"><a href=\"#2-1-SQL-语句\" class=\"headerlink\" title=\"2.1 SQL 语句\"></a>2.1 SQL 语句</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">with</span>    </span><br><span class=\"line\">t_wait <span class=\"keyword\">as</span>    </span><br><span class=\"line\">(    </span><br><span class=\"line\">  <span class=\"keyword\">select</span> a.mode,a.locktype,a.database,a.relation,a.page,a.tuple,a.classid,a.granted,   </span><br><span class=\"line\">  a.objid,a.objsubid,a.pid,a.virtualtransaction,a.virtualxid,a.transactionid,a.fastpath,    </span><br><span class=\"line\">  b.state,b.query,b.xact_start,b.query_start,b.usename,b.datname,b.client_addr,b.client_port,b.application_name   </span><br><span class=\"line\">    <span class=\"keyword\">from</span> pg_locks a,pg_stat_activity b <span class=\"keyword\">where</span> a.pid<span class=\"operator\">=</span>b.pid <span class=\"keyword\">and</span> <span class=\"keyword\">not</span> a.granted   </span><br><span class=\"line\">),   </span><br><span class=\"line\">t_run <span class=\"keyword\">as</span>   </span><br><span class=\"line\">(   </span><br><span class=\"line\">  <span class=\"keyword\">select</span> a.mode,a.locktype,a.database,a.relation,a.page,a.tuple,a.classid,a.granted,   </span><br><span class=\"line\">  a.objid,a.objsubid,a.pid,a.virtualtransaction,a.virtualxid,a.transactionid,a.fastpath,   </span><br><span class=\"line\">  b.state,b.query,b.xact_start,b.query_start,b.usename,b.datname,b.client_addr,b.client_port,b.application_name   </span><br><span class=\"line\">    <span class=\"keyword\">from</span> pg_locks a,pg_stat_activity b <span class=\"keyword\">where</span> a.pid<span class=\"operator\">=</span>b.pid <span class=\"keyword\">and</span> a.granted   </span><br><span class=\"line\">),   </span><br><span class=\"line\">t_overlap <span class=\"keyword\">as</span>   </span><br><span class=\"line\">(   </span><br><span class=\"line\">  <span class=\"keyword\">select</span> r.<span class=\"operator\">*</span> <span class=\"keyword\">from</span> t_wait w <span class=\"keyword\">join</span> t_run r <span class=\"keyword\">on</span>   </span><br><span class=\"line\">  (   </span><br><span class=\"line\">    r.locktype <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.locktype <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.database <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.database <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.relation <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.relation <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.page <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.page <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.tuple <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.tuple <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.virtualxid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.virtualxid <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.transactionid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.transactionid <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.classid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.classid <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.objid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.objid <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.objsubid <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> <span class=\"keyword\">distinct</span> <span class=\"keyword\">from</span> w.objsubid <span class=\"keyword\">and</span>   </span><br><span class=\"line\">    r.pid <span class=\"operator\">&lt;&gt;</span> w.pid   </span><br><span class=\"line\">  )    </span><br><span class=\"line\">),    </span><br><span class=\"line\">t_unionall <span class=\"keyword\">as</span>    </span><br><span class=\"line\">(    </span><br><span class=\"line\">  <span class=\"keyword\">select</span> r.<span class=\"operator\">*</span> <span class=\"keyword\">from</span> t_overlap r    </span><br><span class=\"line\">  <span class=\"keyword\">union</span> <span class=\"keyword\">all</span>    </span><br><span class=\"line\">  <span class=\"keyword\">select</span> w.<span class=\"operator\">*</span> <span class=\"keyword\">from</span> t_wait w    </span><br><span class=\"line\">)    </span><br><span class=\"line\"><span class=\"keyword\">select</span> locktype,datname,relation::regclass,page,tuple,virtualxid,transactionid::text,classid::regclass,objid,objsubid,   </span><br><span class=\"line\">string_agg(   </span><br><span class=\"line\"><span class=\"string\">&#x27;Pid: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> pid <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> pid::text <span class=\"keyword\">end</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span>   </span><br><span class=\"line\"><span class=\"string\">&#x27;Lock_Granted: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> granted <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> granted::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Mode: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> mode <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> mode::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , FastPath: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> fastpath <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> fastpath::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , VirtualTransaction: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> virtualtransaction <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> virtualtransaction::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Session_State: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> state <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> state::text <span class=\"keyword\">end</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span>   </span><br><span class=\"line\"><span class=\"string\">&#x27;Username: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> usename <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> usename::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Database: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> datname <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> datname::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Client_Addr: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> client_addr <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> client_addr::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Client_Port: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> client_port <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> client_port::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Application_Name: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> application_name <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> application_name::text <span class=\"keyword\">end</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span>    </span><br><span class=\"line\"><span class=\"string\">&#x27;Xact_Start: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> xact_start <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> xact_start::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Query_Start: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> query_start <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> query_start::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Xact_Elapse: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> (now()<span class=\"operator\">-</span>xact_start) <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> (now()<span class=\"operator\">-</span>xact_start)::text <span class=\"keyword\">end</span><span class=\"operator\">||</span><span class=\"string\">&#x27; , Query_Elapse: &#x27;</span><span class=\"operator\">||</span><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> (now()<span class=\"operator\">-</span>query_start) <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> (now()<span class=\"operator\">-</span>query_start)::text <span class=\"keyword\">end</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span>    </span><br><span class=\"line\"><span class=\"string\">&#x27;SQL (Current SQL in Transaction): &#x27;</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span>  </span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"keyword\">when</span> query <span class=\"keyword\">is</span> <span class=\"keyword\">null</span> <span class=\"keyword\">then</span> <span class=\"string\">&#x27;NULL&#x27;</span> <span class=\"keyword\">else</span> query::text <span class=\"keyword\">end</span>,    </span><br><span class=\"line\">chr(<span class=\"number\">10</span>)<span class=\"operator\">||</span><span class=\"string\">&#x27;--------&#x27;</span><span class=\"operator\">||</span>chr(<span class=\"number\">10</span>)    </span><br><span class=\"line\"><span class=\"keyword\">order</span> <span class=\"keyword\">by</span>    </span><br><span class=\"line\">  (  <span class=\"keyword\">case</span> mode    </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;INVALID&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">0</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;AccessShareLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">1</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;RowShareLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">2</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;RowExclusiveLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">3</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;ShareUpdateExclusiveLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">4</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;ShareLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">5</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;ShareRowExclusiveLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">6</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;ExclusiveLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">7</span>   </span><br><span class=\"line\">    <span class=\"keyword\">when</span> <span class=\"string\">&#x27;AccessExclusiveLock&#x27;</span> <span class=\"keyword\">then</span> <span class=\"number\">8</span>   </span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"number\">0</span>   </span><br><span class=\"line\">  <span class=\"keyword\">end</span>  ) <span class=\"keyword\">desc</span>,   </span><br><span class=\"line\">  (<span class=\"keyword\">case</span> <span class=\"keyword\">when</span> granted <span class=\"keyword\">then</span> <span class=\"number\">0</span> <span class=\"keyword\">else</span> <span class=\"number\">1</span> <span class=\"keyword\">end</span>)  </span><br><span class=\"line\">) <span class=\"keyword\">as</span> lock_conflict  </span><br><span class=\"line\"><span class=\"keyword\">from</span> t_unionall   </span><br><span class=\"line\"><span class=\"keyword\">group</span> <span class=\"keyword\">by</span>   </span><br><span class=\"line\">locktype,datname,relation,page,tuple,virtualxid,transactionid::text,classid,objid,objsubid ;  </span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-2-字段说明\"><a href=\"#2-2-字段说明\" class=\"headerlink\" title=\"2.2 字段说明\"></a>2.2 字段说明</h2><table>\n<thead>\n<tr>\n<th align=\"center\">字段名</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">locktype</td>\n<td align=\"center\">被锁定的对象类型：relation、extend、page、tuple、transactionid、virtualxid、object、userlock、advisory</td>\n</tr>\n<tr>\n<td align=\"center\">datname</td>\n<td align=\"center\">数据库名</td>\n</tr>\n<tr>\n<td align=\"center\">relation</td>\n<td align=\"center\">如果对象不是表或只是表的一部分，则此值为“NULL”，否则此值是表的OID</td>\n</tr>\n<tr>\n<td align=\"center\">page</td>\n<td align=\"center\">表中的页号，如果对象不是表行（tuple）或表页（relation page），则此值为“NULL”</td>\n</tr>\n<tr>\n<td align=\"center\">tuple</td>\n<td align=\"center\">页内的行号（tuple）</td>\n</tr>\n<tr>\n<td align=\"center\">virtualxid</td>\n<td align=\"center\">虚拟事务id</td>\n</tr>\n<tr>\n<td align=\"center\">transactionid</td>\n<td align=\"center\">事务id</td>\n</tr>\n<tr>\n<td align=\"center\">classid</td>\n<td align=\"center\">包含该对象系统目录的id</td>\n</tr>\n<tr>\n<td align=\"center\">objid</td>\n<td align=\"center\">对象在系统目录的oid</td>\n</tr>\n<tr>\n<td align=\"center\">objsubid</td>\n<td align=\"center\">如果对象是表列（table column），此列的值为列号，这时classid和objid指向表</td>\n</tr>\n</tbody></table>\n"},{"title":"Spring 之依赖注入源码解析","toc":true,"cover":"/img/cover/Spring 之依赖注入源码解析.jpeg","abbrlink":"c2e1e542","date":"2023-06-06T12:01:27.000Z","password":null,"published":0,"_content":"","source":"_posts/Spring之依赖注入源码解析.md","raw":"---\ntitle: Spring 之依赖注入源码解析\ntoc: true\ntags:\n  - Java\n  - Spring\ncategories:\n  - Java\n  - 框架\n  - Spring\n  - Spring-5.3.10\ncover: /img/cover/Spring 之依赖注入源码解析.jpeg\nabbrlink: c2e1e542\ndate: 2023-06-06 20:01:27\npassword:\npublished: false\n---\n","slug":"Spring之依赖注入源码解析","updated":"2023-08-01T06:47:34.184Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clkurnr430006xou97v7hgtat","content":"","site":{"data":{}},"cover_type":"img","excerpt":"","more":""},{"title":"使用docker-compose安装常用中间件","toc":true,"abbrlink":"a524c0bb","date":"2023-06-09T07:23:32.000Z","cover":"/img/cover/使用docker-compose安装常用中间件.jpeg","password":null,"_content":"\n\n\n\n\n本文主要介绍使用 `docker-compose` 安装 `Redis`、`Elasticsearch`、`RabbitMQ`、`PostgreSQL` 这几个组件。\n\n# 一、环境准备\n\n首先需要安装 docker 并启动\n\n```shell\nyum install -y docker-ce\nsystemctl start docker\n```\n\n然后需要安装 docker-compose\n\n可以去 github 上下载 docker-compose，将下载的二进制文件放在 `/usr/local/bin` 目录，然后修改文件权限\n\n```shell\nchmod 755 /usr/local/bin/docker-compose\n```\n\n然后输入 `docker-compose -v` 验证\n\n# 二、拉取镜像\n\n此处使用的几个组件版本分别为：\n\n- ElasticSearch：2.4.6\n- Redis：7.0.4\n- RabbitMQ：latest\n- PostgreSQL：9.6.21\n\nElasticSearch 、Redis、PostgreSQL 指定了版本号，RabbitMQ 未指定，使用了最新版本。\n\n```shell\ndocker pull elasticsearch:2.4.6\ndocker pull redis:7.0.4\ndocker pull rabbitmq\ndocker pull postgres:9.6.21\n```\n\n# 三、编辑 docker-compose.yml\n\n创建一个 `docker-compose.yml` 文件\n\n```yaml\nversion: '3.9'\nservices:\n  elasticsearch:\n    image: elasticsearch:2.4.6\n    container_name: es-2.4.6-ssl\n    privileged: true\n    #总是重启后启动\n    #restart: always\n    environment:\n      - \"cluster.name=es-dh\" #设置集群名称为es-dh\n      - \"discovery.type=single-node\" #以单一节点模式启动\n      - \"ES_JAVA_OPTS=-Xms128m -Xmx1024m\" #设置使用jvm内存大小\n      - bootstrap.memory_lock=true\n    volumes:\n      - /dh/volumes/es/es-2.4.6-ssl/plugins:/usr/share/elasticsearch/plugins #插件文件挂载\n      - /dh/volumes/es/es-2.4.6-ssl/data:/usr/share/elasticsearch/data:rw #数据文件挂载\n      - /dh/volumes/es/es-2.4.6-ssl/logs:/user/share/elasticsearch/logs:rw #日志文件挂载\n      - /dh/volumes/es/es-2.4.6-ssl/elasticsearch.yml:/etc/elasticsearch/elasticsearch.yml #配置文件挂载\n    ports:\n      - 9200:9200\n      - 9300:9300\n\n  es-head:\n    image: elasticsearch-head:5\n    container_name: es-head-5\n    ports:\n      - 9100:9100\n          \n\n  rabbitmq:\n    container_name: rabbitmq\n    image: rabbitmq:latest\n    privileged: true\n    ports:\n      - 5672:5672\n      - 15672:15672\n    volumes:\n      - /dh/volumes/rabbitmq/:/var/lib/rabbitmq\n      - /dh/volumes/rabbitmq/rabbitmq.ssl.config:/etc/rabbitmq/rabbitmq.config\n    environment:\n      - RABBITMQ_DEFAULT_VHOST=/\n      - RABBITMQ_DEFAULT_USER=dh\n      - RABBITMQ_DEFAULT_PASS=dh\n          \n\n  redis:\n    image: redis:7.0.4\n    container_name: redis-7.0.4-ssl\n    privileged: true\n    volumes:\n      - /dh/volumes/redis/redis-7.0.4-ssl/data:/data\n      - /dh/volumes/redis/redis-7.0.4-ssl:/var/lib/redis\n      - /dh/volumes/redis/redis-7.0.4-ssl/redis.conf:/etc/redis/redis.conf\n      #- /dh/volumes/redis/redis-7.0.4-ssl/logs/redis.log:/var/log/redis/redis.log\n      - /var/lib/redis/server.crt:/var/lib/redis/server.crt\n      - /var/lib/redis/server.key:/var/lib/redis/server.key\n      - /var/lib/redis/ca.crt:/var/lib/redis/ca.crt\n    command: [\"redis-server\",\"/etc/redis/redis.conf\"]\n    ports:\n      - 6379:6379\n\n\n  postgres:\n    image: postgres:9.6.21\n    privileged: true\n    container_name: postgresql-9.6.21-ssl\n    ports:\n      - 5433:5432\n    environment:\n      POSTGRES_PASSWORD: postgres\n      PGDATA: /var/lib/pgsql/9.6/data/\n    volumes:\n      - /dh/volumes/pgsql/pgsql-9.6.21-ssl/data:/var/lib/pgsql/9.6/data/\n      - /dh/volumes/pgsql/server.crt:/var/lib/pgsql/server.crt\n      - /dh/volumes/pgsql/server.key:/var/lib/pgsql/server.key\n      - /dh/volumes/pgsql/ca.crt:/var/lib/pgsql/ca.crt\n```\n\n从上面可以看到我们挂载了一些文件和目录，对于挂载的文件，需要修改其权限为 777。\n\n> 需要注意：对于 PostgreSQL需要特殊处理，我们将宿主机的 /dh/volumes/pgsql/pgsql-9.6.21-ssl/data 目录挂载到容器的 /var/lib/pgsql/9.6/data/ 目录，宿主机的这个目录必须是一个空目录，否则 PostgreSQL 会启动失败，如果我们想修改配置文件，可以等容器启动后再修改配置文件，然后重启 PostgreSQL。\n>\n> 由于我们给 PostgreSQL 开启了SSL并挂在了 证书文件，但是 PostgreSQL 的证书文件权限必须为 600 （database user）或 640（root），所以此处我们如果给这三个文件777的权限同样会启动失败，此时我们可以看看挂载的目录里的文件所属用户和所属组，使用chown将这三个证书文件的所属组和用户修改成一样的，并修改权限为600。\n\n# 四、启动\n\n执行 `docker-compose up -d` 启动该文件中定义的所有容器。\n\n如果想删除所有容器，可以执行 `docker-compose down`\n\n删除所有已停止的容器，`docker-compose rm --stop`\n\n删除某个已停止的容器，`docker-compose rm --stop ${server_name}`\n\n删除某个正在运行的容器， `docker-compose rm -f ${service_name}`\n\n如果想单独创建某个容器，执行 `docker-compose up -d ${server_name}`\n\n如果想单独启动或停止某个容器 ，执行 `docker-compose start/stop ${server_name}`\n\n\n\n# 五、常见问题\n\n## 5.1 开启 rabbitmq web管理端\n\n进入容器，执行 `rabbitmq-plugins enable rabbitmq_management`\n\n此时访问管理页面，点击 Channels 可能会报错，解决办法：\n\n①查看配置文件\n\n```shell\ncat /etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf\n```\n\n注意：文件名可能不是management_agent.disable_metrics_collector.conf，可能是xx-management_agent.disable_metrics_collector.conf，具体的可以看这个目录下面的实际文件名。\n\n![image-20230612160800809](使用docker-compose安装常用中间件/image-20230612160800809.png)\n\n②将配置文件中的 `true` 修改成 `false`\n\n```shell\necho management_agent.disable_metrics_collector = false > /etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf\n```\n\n然后退出容器，重启 rabbitmq\n\n","source":"_posts/使用docker-compose安装常用中间件.md","raw":"---\ntitle: 使用docker-compose安装常用中间件\ntoc: true\ntags:\n  - docker\n  - docker-compose\ncategories:\n  - docker\nabbrlink: a524c0bb\ndate: 2023-06-09 15:23:32\ncover: /img/cover/使用docker-compose安装常用中间件.jpeg\npassword:\n---\n\n\n\n\n\n本文主要介绍使用 `docker-compose` 安装 `Redis`、`Elasticsearch`、`RabbitMQ`、`PostgreSQL` 这几个组件。\n\n# 一、环境准备\n\n首先需要安装 docker 并启动\n\n```shell\nyum install -y docker-ce\nsystemctl start docker\n```\n\n然后需要安装 docker-compose\n\n可以去 github 上下载 docker-compose，将下载的二进制文件放在 `/usr/local/bin` 目录，然后修改文件权限\n\n```shell\nchmod 755 /usr/local/bin/docker-compose\n```\n\n然后输入 `docker-compose -v` 验证\n\n# 二、拉取镜像\n\n此处使用的几个组件版本分别为：\n\n- ElasticSearch：2.4.6\n- Redis：7.0.4\n- RabbitMQ：latest\n- PostgreSQL：9.6.21\n\nElasticSearch 、Redis、PostgreSQL 指定了版本号，RabbitMQ 未指定，使用了最新版本。\n\n```shell\ndocker pull elasticsearch:2.4.6\ndocker pull redis:7.0.4\ndocker pull rabbitmq\ndocker pull postgres:9.6.21\n```\n\n# 三、编辑 docker-compose.yml\n\n创建一个 `docker-compose.yml` 文件\n\n```yaml\nversion: '3.9'\nservices:\n  elasticsearch:\n    image: elasticsearch:2.4.6\n    container_name: es-2.4.6-ssl\n    privileged: true\n    #总是重启后启动\n    #restart: always\n    environment:\n      - \"cluster.name=es-dh\" #设置集群名称为es-dh\n      - \"discovery.type=single-node\" #以单一节点模式启动\n      - \"ES_JAVA_OPTS=-Xms128m -Xmx1024m\" #设置使用jvm内存大小\n      - bootstrap.memory_lock=true\n    volumes:\n      - /dh/volumes/es/es-2.4.6-ssl/plugins:/usr/share/elasticsearch/plugins #插件文件挂载\n      - /dh/volumes/es/es-2.4.6-ssl/data:/usr/share/elasticsearch/data:rw #数据文件挂载\n      - /dh/volumes/es/es-2.4.6-ssl/logs:/user/share/elasticsearch/logs:rw #日志文件挂载\n      - /dh/volumes/es/es-2.4.6-ssl/elasticsearch.yml:/etc/elasticsearch/elasticsearch.yml #配置文件挂载\n    ports:\n      - 9200:9200\n      - 9300:9300\n\n  es-head:\n    image: elasticsearch-head:5\n    container_name: es-head-5\n    ports:\n      - 9100:9100\n          \n\n  rabbitmq:\n    container_name: rabbitmq\n    image: rabbitmq:latest\n    privileged: true\n    ports:\n      - 5672:5672\n      - 15672:15672\n    volumes:\n      - /dh/volumes/rabbitmq/:/var/lib/rabbitmq\n      - /dh/volumes/rabbitmq/rabbitmq.ssl.config:/etc/rabbitmq/rabbitmq.config\n    environment:\n      - RABBITMQ_DEFAULT_VHOST=/\n      - RABBITMQ_DEFAULT_USER=dh\n      - RABBITMQ_DEFAULT_PASS=dh\n          \n\n  redis:\n    image: redis:7.0.4\n    container_name: redis-7.0.4-ssl\n    privileged: true\n    volumes:\n      - /dh/volumes/redis/redis-7.0.4-ssl/data:/data\n      - /dh/volumes/redis/redis-7.0.4-ssl:/var/lib/redis\n      - /dh/volumes/redis/redis-7.0.4-ssl/redis.conf:/etc/redis/redis.conf\n      #- /dh/volumes/redis/redis-7.0.4-ssl/logs/redis.log:/var/log/redis/redis.log\n      - /var/lib/redis/server.crt:/var/lib/redis/server.crt\n      - /var/lib/redis/server.key:/var/lib/redis/server.key\n      - /var/lib/redis/ca.crt:/var/lib/redis/ca.crt\n    command: [\"redis-server\",\"/etc/redis/redis.conf\"]\n    ports:\n      - 6379:6379\n\n\n  postgres:\n    image: postgres:9.6.21\n    privileged: true\n    container_name: postgresql-9.6.21-ssl\n    ports:\n      - 5433:5432\n    environment:\n      POSTGRES_PASSWORD: postgres\n      PGDATA: /var/lib/pgsql/9.6/data/\n    volumes:\n      - /dh/volumes/pgsql/pgsql-9.6.21-ssl/data:/var/lib/pgsql/9.6/data/\n      - /dh/volumes/pgsql/server.crt:/var/lib/pgsql/server.crt\n      - /dh/volumes/pgsql/server.key:/var/lib/pgsql/server.key\n      - /dh/volumes/pgsql/ca.crt:/var/lib/pgsql/ca.crt\n```\n\n从上面可以看到我们挂载了一些文件和目录，对于挂载的文件，需要修改其权限为 777。\n\n> 需要注意：对于 PostgreSQL需要特殊处理，我们将宿主机的 /dh/volumes/pgsql/pgsql-9.6.21-ssl/data 目录挂载到容器的 /var/lib/pgsql/9.6/data/ 目录，宿主机的这个目录必须是一个空目录，否则 PostgreSQL 会启动失败，如果我们想修改配置文件，可以等容器启动后再修改配置文件，然后重启 PostgreSQL。\n>\n> 由于我们给 PostgreSQL 开启了SSL并挂在了 证书文件，但是 PostgreSQL 的证书文件权限必须为 600 （database user）或 640（root），所以此处我们如果给这三个文件777的权限同样会启动失败，此时我们可以看看挂载的目录里的文件所属用户和所属组，使用chown将这三个证书文件的所属组和用户修改成一样的，并修改权限为600。\n\n# 四、启动\n\n执行 `docker-compose up -d` 启动该文件中定义的所有容器。\n\n如果想删除所有容器，可以执行 `docker-compose down`\n\n删除所有已停止的容器，`docker-compose rm --stop`\n\n删除某个已停止的容器，`docker-compose rm --stop ${server_name}`\n\n删除某个正在运行的容器， `docker-compose rm -f ${service_name}`\n\n如果想单独创建某个容器，执行 `docker-compose up -d ${server_name}`\n\n如果想单独启动或停止某个容器 ，执行 `docker-compose start/stop ${server_name}`\n\n\n\n# 五、常见问题\n\n## 5.1 开启 rabbitmq web管理端\n\n进入容器，执行 `rabbitmq-plugins enable rabbitmq_management`\n\n此时访问管理页面，点击 Channels 可能会报错，解决办法：\n\n①查看配置文件\n\n```shell\ncat /etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf\n```\n\n注意：文件名可能不是management_agent.disable_metrics_collector.conf，可能是xx-management_agent.disable_metrics_collector.conf，具体的可以看这个目录下面的实际文件名。\n\n![image-20230612160800809](使用docker-compose安装常用中间件/image-20230612160800809.png)\n\n②将配置文件中的 `true` 修改成 `false`\n\n```shell\necho management_agent.disable_metrics_collector = false > /etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf\n```\n\n然后退出容器，重启 rabbitmq\n\n","slug":"使用docker-compose安装常用中间件","published":1,"updated":"2023-08-01T06:53:11.233Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clkurnr440007xou93jeqbsnb","content":"<p>本文主要介绍使用 <code>docker-compose</code> 安装 <code>Redis</code>、<code>Elasticsearch</code>、<code>RabbitMQ</code>、<code>PostgreSQL</code> 这几个组件。</p>\n<h1 id=\"一、环境准备\"><a href=\"#一、环境准备\" class=\"headerlink\" title=\"一、环境准备\"></a>一、环境准备</h1><p>首先需要安装 docker 并启动</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y docker-ce</span><br><span class=\"line\">systemctl start docker</span><br></pre></td></tr></table></figure>\n\n<p>然后需要安装 docker-compose</p>\n<p>可以去 github 上下载 docker-compose，将下载的二进制文件放在 <code>/usr/local/bin</code> 目录，然后修改文件权限</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 755 /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p>然后输入 <code>docker-compose -v</code> 验证</p>\n<h1 id=\"二、拉取镜像\"><a href=\"#二、拉取镜像\" class=\"headerlink\" title=\"二、拉取镜像\"></a>二、拉取镜像</h1><p>此处使用的几个组件版本分别为：</p>\n<ul>\n<li>ElasticSearch：2.4.6</li>\n<li>Redis：7.0.4</li>\n<li>RabbitMQ：latest</li>\n<li>PostgreSQL：9.6.21</li>\n</ul>\n<p>ElasticSearch 、Redis、PostgreSQL 指定了版本号，RabbitMQ 未指定，使用了最新版本。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull elasticsearch:2.4.6</span><br><span class=\"line\">docker pull redis:7.0.4</span><br><span class=\"line\">docker pull rabbitmq</span><br><span class=\"line\">docker pull postgres:9.6.21</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"三、编辑-docker-compose-yml\"><a href=\"#三、编辑-docker-compose-yml\" class=\"headerlink\" title=\"三、编辑 docker-compose.yml\"></a>三、编辑 docker-compose.yml</h1><p>创建一个 <code>docker-compose.yml</code> 文件</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.9&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">elasticsearch:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">elasticsearch:2.4.6</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">es-2.4.6-ssl</span></span><br><span class=\"line\">    <span class=\"attr\">privileged:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"comment\">#总是重启后启动</span></span><br><span class=\"line\">    <span class=\"comment\">#restart: always</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;cluster.name=es-dh&quot;</span> <span class=\"comment\">#设置集群名称为es-dh</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;discovery.type=single-node&quot;</span> <span class=\"comment\">#以单一节点模式启动</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;ES_JAVA_OPTS=-Xms128m -Xmx1024m&quot;</span> <span class=\"comment\">#设置使用jvm内存大小</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">bootstrap.memory_lock=true</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/es/es-2.4.6-ssl/plugins:/usr/share/elasticsearch/plugins</span> <span class=\"comment\">#插件文件挂载</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/es/es-2.4.6-ssl/data:/usr/share/elasticsearch/data:rw</span> <span class=\"comment\">#数据文件挂载</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/es/es-2.4.6-ssl/logs:/user/share/elasticsearch/logs:rw</span> <span class=\"comment\">#日志文件挂载</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/es/es-2.4.6-ssl/elasticsearch.yml:/etc/elasticsearch/elasticsearch.yml</span> <span class=\"comment\">#配置文件挂载</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9200</span><span class=\"string\">:9200</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9300</span><span class=\"string\">:9300</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">es-head:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">elasticsearch-head:5</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">es-head-5</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9100</span><span class=\"string\">:9100</span></span><br><span class=\"line\">          </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">rabbitmq:</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">rabbitmq</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">rabbitmq:latest</span></span><br><span class=\"line\">    <span class=\"attr\">privileged:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">5672</span><span class=\"string\">:5672</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">15672</span><span class=\"string\">:15672</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/rabbitmq/:/var/lib/rabbitmq</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/rabbitmq/rabbitmq.ssl.config:/etc/rabbitmq/rabbitmq.config</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">RABBITMQ_DEFAULT_VHOST=/</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">RABBITMQ_DEFAULT_USER=dh</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">RABBITMQ_DEFAULT_PASS=dh</span></span><br><span class=\"line\">          </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">redis:7.0.4</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">redis-7.0.4-ssl</span></span><br><span class=\"line\">    <span class=\"attr\">privileged:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/redis/redis-7.0.4-ssl/data:/data</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/redis/redis-7.0.4-ssl:/var/lib/redis</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/redis/redis-7.0.4-ssl/redis.conf:/etc/redis/redis.conf</span></span><br><span class=\"line\">      <span class=\"comment\">#- /dh/volumes/redis/redis-7.0.4-ssl/logs/redis.log:/var/log/redis/redis.log</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/redis/server.crt:/var/lib/redis/server.crt</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/redis/server.key:/var/lib/redis/server.key</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/redis/ca.crt:/var/lib/redis/ca.crt</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> [<span class=\"string\">&quot;redis-server&quot;</span>,<span class=\"string\">&quot;/etc/redis/redis.conf&quot;</span>]</span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">6379</span><span class=\"string\">:6379</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">postgres:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">postgres:9.6.21</span></span><br><span class=\"line\">    <span class=\"attr\">privileged:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">postgresql-9.6.21-ssl</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">5433</span><span class=\"string\">:5432</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">POSTGRES_PASSWORD:</span> <span class=\"string\">postgres</span></span><br><span class=\"line\">      <span class=\"attr\">PGDATA:</span> <span class=\"string\">/var/lib/pgsql/9.6/data/</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/pgsql/pgsql-9.6.21-ssl/data:/var/lib/pgsql/9.6/data/</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/pgsql/server.crt:/var/lib/pgsql/server.crt</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/pgsql/server.key:/var/lib/pgsql/server.key</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/pgsql/ca.crt:/var/lib/pgsql/ca.crt</span></span><br></pre></td></tr></table></figure>\n\n<p>从上面可以看到我们挂载了一些文件和目录，对于挂载的文件，需要修改其权限为 777。</p>\n<blockquote>\n<p>需要注意：对于 PostgreSQL需要特殊处理，我们将宿主机的 &#x2F;dh&#x2F;volumes&#x2F;pgsql&#x2F;pgsql-9.6.21-ssl&#x2F;data 目录挂载到容器的 &#x2F;var&#x2F;lib&#x2F;pgsql&#x2F;9.6&#x2F;data&#x2F; 目录，宿主机的这个目录必须是一个空目录，否则 PostgreSQL 会启动失败，如果我们想修改配置文件，可以等容器启动后再修改配置文件，然后重启 PostgreSQL。</p>\n<p>由于我们给 PostgreSQL 开启了SSL并挂在了 证书文件，但是 PostgreSQL 的证书文件权限必须为 600 （database user）或 640（root），所以此处我们如果给这三个文件777的权限同样会启动失败，此时我们可以看看挂载的目录里的文件所属用户和所属组，使用chown将这三个证书文件的所属组和用户修改成一样的，并修改权限为600。</p>\n</blockquote>\n<h1 id=\"四、启动\"><a href=\"#四、启动\" class=\"headerlink\" title=\"四、启动\"></a>四、启动</h1><p>执行 <code>docker-compose up -d</code> 启动该文件中定义的所有容器。</p>\n<p>如果想删除所有容器，可以执行 <code>docker-compose down</code></p>\n<p>删除所有已停止的容器，<code>docker-compose rm --stop</code></p>\n<p>删除某个已停止的容器，<code>docker-compose rm --stop $&#123;server_name&#125;</code></p>\n<p>删除某个正在运行的容器， <code>docker-compose rm -f $&#123;service_name&#125;</code></p>\n<p>如果想单独创建某个容器，执行 <code>docker-compose up -d $&#123;server_name&#125;</code></p>\n<p>如果想单独启动或停止某个容器 ，执行 <code>docker-compose start/stop $&#123;server_name&#125;</code></p>\n<h1 id=\"五、常见问题\"><a href=\"#五、常见问题\" class=\"headerlink\" title=\"五、常见问题\"></a>五、常见问题</h1><h2 id=\"5-1-开启-rabbitmq-web管理端\"><a href=\"#5-1-开启-rabbitmq-web管理端\" class=\"headerlink\" title=\"5.1 开启 rabbitmq web管理端\"></a>5.1 开启 rabbitmq web管理端</h2><p>进入容器，执行 <code>rabbitmq-plugins enable rabbitmq_management</code></p>\n<p>此时访问管理页面，点击 Channels 可能会报错，解决办法：</p>\n<p>①查看配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf</span><br></pre></td></tr></table></figure>\n\n<p>注意：文件名可能不是management_agent.disable_metrics_collector.conf，可能是xx-management_agent.disable_metrics_collector.conf，具体的可以看这个目录下面的实际文件名。</p>\n<p><img src=\"/posts/a524c0bb/image-20230612160800809.png\" alt=\"image-20230612160800809\"></p>\n<p>②将配置文件中的 <code>true</code> 修改成 <code>false</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo management_agent.disable_metrics_collector = false &gt; /etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf</span><br></pre></td></tr></table></figure>\n\n<p>然后退出容器，重启 rabbitmq</p>\n","site":{"data":{}},"cover_type":"img","excerpt":"","more":"<p>本文主要介绍使用 <code>docker-compose</code> 安装 <code>Redis</code>、<code>Elasticsearch</code>、<code>RabbitMQ</code>、<code>PostgreSQL</code> 这几个组件。</p>\n<h1 id=\"一、环境准备\"><a href=\"#一、环境准备\" class=\"headerlink\" title=\"一、环境准备\"></a>一、环境准备</h1><p>首先需要安装 docker 并启动</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y docker-ce</span><br><span class=\"line\">systemctl start docker</span><br></pre></td></tr></table></figure>\n\n<p>然后需要安装 docker-compose</p>\n<p>可以去 github 上下载 docker-compose，将下载的二进制文件放在 <code>/usr/local/bin</code> 目录，然后修改文件权限</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 755 /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>\n\n<p>然后输入 <code>docker-compose -v</code> 验证</p>\n<h1 id=\"二、拉取镜像\"><a href=\"#二、拉取镜像\" class=\"headerlink\" title=\"二、拉取镜像\"></a>二、拉取镜像</h1><p>此处使用的几个组件版本分别为：</p>\n<ul>\n<li>ElasticSearch：2.4.6</li>\n<li>Redis：7.0.4</li>\n<li>RabbitMQ：latest</li>\n<li>PostgreSQL：9.6.21</li>\n</ul>\n<p>ElasticSearch 、Redis、PostgreSQL 指定了版本号，RabbitMQ 未指定，使用了最新版本。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull elasticsearch:2.4.6</span><br><span class=\"line\">docker pull redis:7.0.4</span><br><span class=\"line\">docker pull rabbitmq</span><br><span class=\"line\">docker pull postgres:9.6.21</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"三、编辑-docker-compose-yml\"><a href=\"#三、编辑-docker-compose-yml\" class=\"headerlink\" title=\"三、编辑 docker-compose.yml\"></a>三、编辑 docker-compose.yml</h1><p>创建一个 <code>docker-compose.yml</code> 文件</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">&#x27;3.9&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\">  <span class=\"attr\">elasticsearch:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">elasticsearch:2.4.6</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">es-2.4.6-ssl</span></span><br><span class=\"line\">    <span class=\"attr\">privileged:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"comment\">#总是重启后启动</span></span><br><span class=\"line\">    <span class=\"comment\">#restart: always</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;cluster.name=es-dh&quot;</span> <span class=\"comment\">#设置集群名称为es-dh</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;discovery.type=single-node&quot;</span> <span class=\"comment\">#以单一节点模式启动</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">&quot;ES_JAVA_OPTS=-Xms128m -Xmx1024m&quot;</span> <span class=\"comment\">#设置使用jvm内存大小</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">bootstrap.memory_lock=true</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/es/es-2.4.6-ssl/plugins:/usr/share/elasticsearch/plugins</span> <span class=\"comment\">#插件文件挂载</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/es/es-2.4.6-ssl/data:/usr/share/elasticsearch/data:rw</span> <span class=\"comment\">#数据文件挂载</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/es/es-2.4.6-ssl/logs:/user/share/elasticsearch/logs:rw</span> <span class=\"comment\">#日志文件挂载</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/es/es-2.4.6-ssl/elasticsearch.yml:/etc/elasticsearch/elasticsearch.yml</span> <span class=\"comment\">#配置文件挂载</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9200</span><span class=\"string\">:9200</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9300</span><span class=\"string\">:9300</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">es-head:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">elasticsearch-head:5</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">es-head-5</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">9100</span><span class=\"string\">:9100</span></span><br><span class=\"line\">          </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">rabbitmq:</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">rabbitmq</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">rabbitmq:latest</span></span><br><span class=\"line\">    <span class=\"attr\">privileged:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">5672</span><span class=\"string\">:5672</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">15672</span><span class=\"string\">:15672</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/rabbitmq/:/var/lib/rabbitmq</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/rabbitmq/rabbitmq.ssl.config:/etc/rabbitmq/rabbitmq.config</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">RABBITMQ_DEFAULT_VHOST=/</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">RABBITMQ_DEFAULT_USER=dh</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">RABBITMQ_DEFAULT_PASS=dh</span></span><br><span class=\"line\">          </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">redis:7.0.4</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">redis-7.0.4-ssl</span></span><br><span class=\"line\">    <span class=\"attr\">privileged:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/redis/redis-7.0.4-ssl/data:/data</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/redis/redis-7.0.4-ssl:/var/lib/redis</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/redis/redis-7.0.4-ssl/redis.conf:/etc/redis/redis.conf</span></span><br><span class=\"line\">      <span class=\"comment\">#- /dh/volumes/redis/redis-7.0.4-ssl/logs/redis.log:/var/log/redis/redis.log</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/redis/server.crt:/var/lib/redis/server.crt</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/redis/server.key:/var/lib/redis/server.key</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/var/lib/redis/ca.crt:/var/lib/redis/ca.crt</span></span><br><span class=\"line\">    <span class=\"attr\">command:</span> [<span class=\"string\">&quot;redis-server&quot;</span>,<span class=\"string\">&quot;/etc/redis/redis.conf&quot;</span>]</span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">6379</span><span class=\"string\">:6379</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">postgres:</span></span><br><span class=\"line\">    <span class=\"attr\">image:</span> <span class=\"string\">postgres:9.6.21</span></span><br><span class=\"line\">    <span class=\"attr\">privileged:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">container_name:</span> <span class=\"string\">postgresql-9.6.21-ssl</span></span><br><span class=\"line\">    <span class=\"attr\">ports:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"number\">5433</span><span class=\"string\">:5432</span></span><br><span class=\"line\">    <span class=\"attr\">environment:</span></span><br><span class=\"line\">      <span class=\"attr\">POSTGRES_PASSWORD:</span> <span class=\"string\">postgres</span></span><br><span class=\"line\">      <span class=\"attr\">PGDATA:</span> <span class=\"string\">/var/lib/pgsql/9.6/data/</span></span><br><span class=\"line\">    <span class=\"attr\">volumes:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/pgsql/pgsql-9.6.21-ssl/data:/var/lib/pgsql/9.6/data/</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/pgsql/server.crt:/var/lib/pgsql/server.crt</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/pgsql/server.key:/var/lib/pgsql/server.key</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">/dh/volumes/pgsql/ca.crt:/var/lib/pgsql/ca.crt</span></span><br></pre></td></tr></table></figure>\n\n<p>从上面可以看到我们挂载了一些文件和目录，对于挂载的文件，需要修改其权限为 777。</p>\n<blockquote>\n<p>需要注意：对于 PostgreSQL需要特殊处理，我们将宿主机的 &#x2F;dh&#x2F;volumes&#x2F;pgsql&#x2F;pgsql-9.6.21-ssl&#x2F;data 目录挂载到容器的 &#x2F;var&#x2F;lib&#x2F;pgsql&#x2F;9.6&#x2F;data&#x2F; 目录，宿主机的这个目录必须是一个空目录，否则 PostgreSQL 会启动失败，如果我们想修改配置文件，可以等容器启动后再修改配置文件，然后重启 PostgreSQL。</p>\n<p>由于我们给 PostgreSQL 开启了SSL并挂在了 证书文件，但是 PostgreSQL 的证书文件权限必须为 600 （database user）或 640（root），所以此处我们如果给这三个文件777的权限同样会启动失败，此时我们可以看看挂载的目录里的文件所属用户和所属组，使用chown将这三个证书文件的所属组和用户修改成一样的，并修改权限为600。</p>\n</blockquote>\n<h1 id=\"四、启动\"><a href=\"#四、启动\" class=\"headerlink\" title=\"四、启动\"></a>四、启动</h1><p>执行 <code>docker-compose up -d</code> 启动该文件中定义的所有容器。</p>\n<p>如果想删除所有容器，可以执行 <code>docker-compose down</code></p>\n<p>删除所有已停止的容器，<code>docker-compose rm --stop</code></p>\n<p>删除某个已停止的容器，<code>docker-compose rm --stop $&#123;server_name&#125;</code></p>\n<p>删除某个正在运行的容器， <code>docker-compose rm -f $&#123;service_name&#125;</code></p>\n<p>如果想单独创建某个容器，执行 <code>docker-compose up -d $&#123;server_name&#125;</code></p>\n<p>如果想单独启动或停止某个容器 ，执行 <code>docker-compose start/stop $&#123;server_name&#125;</code></p>\n<h1 id=\"五、常见问题\"><a href=\"#五、常见问题\" class=\"headerlink\" title=\"五、常见问题\"></a>五、常见问题</h1><h2 id=\"5-1-开启-rabbitmq-web管理端\"><a href=\"#5-1-开启-rabbitmq-web管理端\" class=\"headerlink\" title=\"5.1 开启 rabbitmq web管理端\"></a>5.1 开启 rabbitmq web管理端</h2><p>进入容器，执行 <code>rabbitmq-plugins enable rabbitmq_management</code></p>\n<p>此时访问管理页面，点击 Channels 可能会报错，解决办法：</p>\n<p>①查看配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf</span><br></pre></td></tr></table></figure>\n\n<p>注意：文件名可能不是management_agent.disable_metrics_collector.conf，可能是xx-management_agent.disable_metrics_collector.conf，具体的可以看这个目录下面的实际文件名。</p>\n<p><img src=\"/posts/a524c0bb/image-20230612160800809.png\" alt=\"image-20230612160800809\"></p>\n<p>②将配置文件中的 <code>true</code> 修改成 <code>false</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo management_agent.disable_metrics_collector = false &gt; /etc/rabbitmq/conf.d/management_agent.disable_metrics_collector.conf</span><br></pre></td></tr></table></figure>\n\n<p>然后退出容器，重启 rabbitmq</p>\n"},{"title":"使用 IDEA 构建 Spring5.3.10 源码","toc":true,"abbrlink":"983a1c52","date":"2023-06-02T02:56:32.000Z","password":null,"cover":"/img/cover/使用-IDEA-构建-Spring5-3-10-源码.jpg","_content":"\n> 此教程是基于周瑜老师的 **Spring5.3.10 注释版源码**编译的，并不是 Github 原生的 Spring5.3.10 源码，有一些差别，但都是 gradle 配置文件的微小改动，比如把某些依赖从 optional 改成 compile 级别、修改了 gradle 仓库的地址（主要是为了方便编译），其他都没改动。\n\n# 一、版本\n\n- Spring 版本：5.3.10\n- Gradle 版本：6.8\n- IDEA 版本：2022.2\n\n![IDEA 版本](./使用-IDEA-构建-Spring5-3-10-源码/1685515451815-c83a27f4-385a-42d9-8156-a24808c36be0.png)\n\n# 二、下载Spring源码所需要的依赖\n\n因为Spring源码存在很多依赖包，如果自行下载，会需要下很久，所以此处将我自己电脑上已下载的依赖给出：\n\n> 链接：https://caiyun.139.com/m/i?005CiN4dFp6mN\n>\n> 提取码：TbOy\n\n# 三、下载 Spring 源码\n\ngit clone 的地址为：https://gitee.com/dhpro/spring-framework-5.3.10.git\n\n建议直接用 IDEA 的 git 来下载源码：\n\n![New Project](./使用-IDEA-构建-Spring5-3-10-源码/1685515617531-5c3d6c65-6af1-42be-8572-11f4717c6fa4.png)\n\n![Clone](./使用-IDEA-构建-Spring5-3-10-源码/1685515622726-73454c6c-2a1f-448b-8e14-6080485a8a56.png)\n\n输入地址，点击 Clone，就会开始下载源码工程（因为是从 gitee 上下载，所以会比从 github 上下载快很多)。 一旦下载完成，IDEA 就会自动下载 gradle，下载完 gradle 就会开始下载 Spring 源码依赖，但是我们已经有现成的了，所以可以直接取消这个过程。\n\n# 四、修改IDEA的gradle配置\n\n![Gradle 配置](./使用-IDEA-构建-Spring5-3-10-源码/1685515713115-b417e4cf-fa0e-4376-b06b-b524e144cbe9.png)\n\n首先把 gradle user home 改为 **.gradle压缩包** 的解压之后的文件路径，\n\n然后把 Build and run using 和 Run tests using 都改为 IntelliJ IDEA，\n\n改完之后点击 Apply，再点击 OK，会自动触发 gradle 的重新编译。\n\n# 五、运行代码\n\n编译成功后，在左侧可以看到如下模块，其中有一个 tuling 模块，这是一个可以直接运行的模块，在它下面有一个 Test 类，直接运行 main 方法。\n\n![Test](./使用-IDEA-构建-Spring5-3-10-源码/1685515818638-aa54c79e-7e57-4441-9757-ea00a0bf6274.png)\n\n## 5.1 运行过程中可能出现的问题\n\n### 5.1.1 问题一\n\n我在运行的时候出现了以下错误：\n\n![报错 1](./使用-IDEA-构建-Spring5-3-10-源码/1685515894900-3d9a036b-beaf-4505-a394-039d87d10d82.png)\n\n由于报错的是 core 模块，所以在 gradle 中找到 core 模块，先执行 clean，然后 build，执行完毕后重新运行程序，问题解决。\n\n![Clean](./使用-IDEA-构建-Spring5-3-10-源码/1685515903538-7acd0039-35d6-48d3-8535-bd3659e3bbc8.png)\n\n![运行成功截图](./使用-IDEA-构建-Spring5-3-10-源码/1685515909414-1dbb5934-710e-4d30-bc59-a1e4b47d51ce.png)\n","source":"_posts/使用-IDEA-构建-Spring5-3-10-源码.md","raw":"---\ntitle: 使用 IDEA 构建 Spring5.3.10 源码\ntoc: true\ntags:\n  - Java\n  - Spring\ncategories:\n  - Java\n  - 框架\n  - Spring\n  - Spring-5.3.10\nabbrlink: 983a1c52\ndate: 2023-06-02 10:56:32\npassword:\ncover: /img/cover/使用-IDEA-构建-Spring5-3-10-源码.jpg\n---\n\n> 此教程是基于周瑜老师的 **Spring5.3.10 注释版源码**编译的，并不是 Github 原生的 Spring5.3.10 源码，有一些差别，但都是 gradle 配置文件的微小改动，比如把某些依赖从 optional 改成 compile 级别、修改了 gradle 仓库的地址（主要是为了方便编译），其他都没改动。\n\n# 一、版本\n\n- Spring 版本：5.3.10\n- Gradle 版本：6.8\n- IDEA 版本：2022.2\n\n![IDEA 版本](./使用-IDEA-构建-Spring5-3-10-源码/1685515451815-c83a27f4-385a-42d9-8156-a24808c36be0.png)\n\n# 二、下载Spring源码所需要的依赖\n\n因为Spring源码存在很多依赖包，如果自行下载，会需要下很久，所以此处将我自己电脑上已下载的依赖给出：\n\n> 链接：https://caiyun.139.com/m/i?005CiN4dFp6mN\n>\n> 提取码：TbOy\n\n# 三、下载 Spring 源码\n\ngit clone 的地址为：https://gitee.com/dhpro/spring-framework-5.3.10.git\n\n建议直接用 IDEA 的 git 来下载源码：\n\n![New Project](./使用-IDEA-构建-Spring5-3-10-源码/1685515617531-5c3d6c65-6af1-42be-8572-11f4717c6fa4.png)\n\n![Clone](./使用-IDEA-构建-Spring5-3-10-源码/1685515622726-73454c6c-2a1f-448b-8e14-6080485a8a56.png)\n\n输入地址，点击 Clone，就会开始下载源码工程（因为是从 gitee 上下载，所以会比从 github 上下载快很多)。 一旦下载完成，IDEA 就会自动下载 gradle，下载完 gradle 就会开始下载 Spring 源码依赖，但是我们已经有现成的了，所以可以直接取消这个过程。\n\n# 四、修改IDEA的gradle配置\n\n![Gradle 配置](./使用-IDEA-构建-Spring5-3-10-源码/1685515713115-b417e4cf-fa0e-4376-b06b-b524e144cbe9.png)\n\n首先把 gradle user home 改为 **.gradle压缩包** 的解压之后的文件路径，\n\n然后把 Build and run using 和 Run tests using 都改为 IntelliJ IDEA，\n\n改完之后点击 Apply，再点击 OK，会自动触发 gradle 的重新编译。\n\n# 五、运行代码\n\n编译成功后，在左侧可以看到如下模块，其中有一个 tuling 模块，这是一个可以直接运行的模块，在它下面有一个 Test 类，直接运行 main 方法。\n\n![Test](./使用-IDEA-构建-Spring5-3-10-源码/1685515818638-aa54c79e-7e57-4441-9757-ea00a0bf6274.png)\n\n## 5.1 运行过程中可能出现的问题\n\n### 5.1.1 问题一\n\n我在运行的时候出现了以下错误：\n\n![报错 1](./使用-IDEA-构建-Spring5-3-10-源码/1685515894900-3d9a036b-beaf-4505-a394-039d87d10d82.png)\n\n由于报错的是 core 模块，所以在 gradle 中找到 core 模块，先执行 clean，然后 build，执行完毕后重新运行程序，问题解决。\n\n![Clean](./使用-IDEA-构建-Spring5-3-10-源码/1685515903538-7acd0039-35d6-48d3-8535-bd3659e3bbc8.png)\n\n![运行成功截图](./使用-IDEA-构建-Spring5-3-10-源码/1685515909414-1dbb5934-710e-4d30-bc59-a1e4b47d51ce.png)\n","slug":"使用-IDEA-构建-Spring5-3-10-源码","published":1,"updated":"2023-06-06T12:10:29.100Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clkurnr450008xou96g877lwo","content":"<blockquote>\n<p>此教程是基于周瑜老师的 <strong>Spring5.3.10 注释版源码</strong>编译的，并不是 Github 原生的 Spring5.3.10 源码，有一些差别，但都是 gradle 配置文件的微小改动，比如把某些依赖从 optional 改成 compile 级别、修改了 gradle 仓库的地址（主要是为了方便编译），其他都没改动。</p>\n</blockquote>\n<h1 id=\"一、版本\"><a href=\"#一、版本\" class=\"headerlink\" title=\"一、版本\"></a>一、版本</h1><ul>\n<li>Spring 版本：5.3.10</li>\n<li>Gradle 版本：6.8</li>\n<li>IDEA 版本：2022.2</li>\n</ul>\n<p><img src=\"/posts/983a1c52/1685515451815-c83a27f4-385a-42d9-8156-a24808c36be0.png\" alt=\"IDEA 版本\"></p>\n<h1 id=\"二、下载Spring源码所需要的依赖\"><a href=\"#二、下载Spring源码所需要的依赖\" class=\"headerlink\" title=\"二、下载Spring源码所需要的依赖\"></a>二、下载Spring源码所需要的依赖</h1><p>因为Spring源码存在很多依赖包，如果自行下载，会需要下很久，所以此处将我自己电脑上已下载的依赖给出：</p>\n<blockquote>\n<p>链接：<a href=\"https://caiyun.139.com/m/i?005CiN4dFp6mN\">https://caiyun.139.com/m/i?005CiN4dFp6mN</a></p>\n<p>提取码：TbOy</p>\n</blockquote>\n<h1 id=\"三、下载-Spring-源码\"><a href=\"#三、下载-Spring-源码\" class=\"headerlink\" title=\"三、下载 Spring 源码\"></a>三、下载 Spring 源码</h1><p>git clone 的地址为：<a href=\"https://gitee.com/dhpro/spring-framework-5.3.10.git\">https://gitee.com/dhpro/spring-framework-5.3.10.git</a></p>\n<p>建议直接用 IDEA 的 git 来下载源码：</p>\n<p><img src=\"/posts/983a1c52/1685515617531-5c3d6c65-6af1-42be-8572-11f4717c6fa4.png\" alt=\"New Project\"></p>\n<p><img src=\"/posts/983a1c52/1685515622726-73454c6c-2a1f-448b-8e14-6080485a8a56.png\" alt=\"Clone\"></p>\n<p>输入地址，点击 Clone，就会开始下载源码工程（因为是从 gitee 上下载，所以会比从 github 上下载快很多)。 一旦下载完成，IDEA 就会自动下载 gradle，下载完 gradle 就会开始下载 Spring 源码依赖，但是我们已经有现成的了，所以可以直接取消这个过程。</p>\n<h1 id=\"四、修改IDEA的gradle配置\"><a href=\"#四、修改IDEA的gradle配置\" class=\"headerlink\" title=\"四、修改IDEA的gradle配置\"></a>四、修改IDEA的gradle配置</h1><p><img src=\"/posts/983a1c52/1685515713115-b417e4cf-fa0e-4376-b06b-b524e144cbe9.png\" alt=\"Gradle 配置\"></p>\n<p>首先把 gradle user home 改为 <strong>.gradle压缩包</strong> 的解压之后的文件路径，</p>\n<p>然后把 Build and run using 和 Run tests using 都改为 IntelliJ IDEA，</p>\n<p>改完之后点击 Apply，再点击 OK，会自动触发 gradle 的重新编译。</p>\n<h1 id=\"五、运行代码\"><a href=\"#五、运行代码\" class=\"headerlink\" title=\"五、运行代码\"></a>五、运行代码</h1><p>编译成功后，在左侧可以看到如下模块，其中有一个 tuling 模块，这是一个可以直接运行的模块，在它下面有一个 Test 类，直接运行 main 方法。</p>\n<p><img src=\"/posts/983a1c52/1685515818638-aa54c79e-7e57-4441-9757-ea00a0bf6274.png\" alt=\"Test\"></p>\n<h2 id=\"5-1-运行过程中可能出现的问题\"><a href=\"#5-1-运行过程中可能出现的问题\" class=\"headerlink\" title=\"5.1 运行过程中可能出现的问题\"></a>5.1 运行过程中可能出现的问题</h2><h3 id=\"5-1-1-问题一\"><a href=\"#5-1-1-问题一\" class=\"headerlink\" title=\"5.1.1 问题一\"></a>5.1.1 问题一</h3><p>我在运行的时候出现了以下错误：</p>\n<p><img src=\"/posts/983a1c52/1685515894900-3d9a036b-beaf-4505-a394-039d87d10d82.png\" alt=\"报错 1\"></p>\n<p>由于报错的是 core 模块，所以在 gradle 中找到 core 模块，先执行 clean，然后 build，执行完毕后重新运行程序，问题解决。</p>\n<p><img src=\"/posts/983a1c52/1685515903538-7acd0039-35d6-48d3-8535-bd3659e3bbc8.png\" alt=\"Clean\"></p>\n<p><img src=\"/posts/983a1c52/1685515909414-1dbb5934-710e-4d30-bc59-a1e4b47d51ce.png\" alt=\"运行成功截图\"></p>\n","site":{"data":{}},"cover_type":"img","excerpt":"","more":"<blockquote>\n<p>此教程是基于周瑜老师的 <strong>Spring5.3.10 注释版源码</strong>编译的，并不是 Github 原生的 Spring5.3.10 源码，有一些差别，但都是 gradle 配置文件的微小改动，比如把某些依赖从 optional 改成 compile 级别、修改了 gradle 仓库的地址（主要是为了方便编译），其他都没改动。</p>\n</blockquote>\n<h1 id=\"一、版本\"><a href=\"#一、版本\" class=\"headerlink\" title=\"一、版本\"></a>一、版本</h1><ul>\n<li>Spring 版本：5.3.10</li>\n<li>Gradle 版本：6.8</li>\n<li>IDEA 版本：2022.2</li>\n</ul>\n<p><img src=\"/posts/983a1c52/1685515451815-c83a27f4-385a-42d9-8156-a24808c36be0.png\" alt=\"IDEA 版本\"></p>\n<h1 id=\"二、下载Spring源码所需要的依赖\"><a href=\"#二、下载Spring源码所需要的依赖\" class=\"headerlink\" title=\"二、下载Spring源码所需要的依赖\"></a>二、下载Spring源码所需要的依赖</h1><p>因为Spring源码存在很多依赖包，如果自行下载，会需要下很久，所以此处将我自己电脑上已下载的依赖给出：</p>\n<blockquote>\n<p>链接：<a href=\"https://caiyun.139.com/m/i?005CiN4dFp6mN\">https://caiyun.139.com/m/i?005CiN4dFp6mN</a></p>\n<p>提取码：TbOy</p>\n</blockquote>\n<h1 id=\"三、下载-Spring-源码\"><a href=\"#三、下载-Spring-源码\" class=\"headerlink\" title=\"三、下载 Spring 源码\"></a>三、下载 Spring 源码</h1><p>git clone 的地址为：<a href=\"https://gitee.com/dhpro/spring-framework-5.3.10.git\">https://gitee.com/dhpro/spring-framework-5.3.10.git</a></p>\n<p>建议直接用 IDEA 的 git 来下载源码：</p>\n<p><img src=\"/posts/983a1c52/1685515617531-5c3d6c65-6af1-42be-8572-11f4717c6fa4.png\" alt=\"New Project\"></p>\n<p><img src=\"/posts/983a1c52/1685515622726-73454c6c-2a1f-448b-8e14-6080485a8a56.png\" alt=\"Clone\"></p>\n<p>输入地址，点击 Clone，就会开始下载源码工程（因为是从 gitee 上下载，所以会比从 github 上下载快很多)。 一旦下载完成，IDEA 就会自动下载 gradle，下载完 gradle 就会开始下载 Spring 源码依赖，但是我们已经有现成的了，所以可以直接取消这个过程。</p>\n<h1 id=\"四、修改IDEA的gradle配置\"><a href=\"#四、修改IDEA的gradle配置\" class=\"headerlink\" title=\"四、修改IDEA的gradle配置\"></a>四、修改IDEA的gradle配置</h1><p><img src=\"/posts/983a1c52/1685515713115-b417e4cf-fa0e-4376-b06b-b524e144cbe9.png\" alt=\"Gradle 配置\"></p>\n<p>首先把 gradle user home 改为 <strong>.gradle压缩包</strong> 的解压之后的文件路径，</p>\n<p>然后把 Build and run using 和 Run tests using 都改为 IntelliJ IDEA，</p>\n<p>改完之后点击 Apply，再点击 OK，会自动触发 gradle 的重新编译。</p>\n<h1 id=\"五、运行代码\"><a href=\"#五、运行代码\" class=\"headerlink\" title=\"五、运行代码\"></a>五、运行代码</h1><p>编译成功后，在左侧可以看到如下模块，其中有一个 tuling 模块，这是一个可以直接运行的模块，在它下面有一个 Test 类，直接运行 main 方法。</p>\n<p><img src=\"/posts/983a1c52/1685515818638-aa54c79e-7e57-4441-9757-ea00a0bf6274.png\" alt=\"Test\"></p>\n<h2 id=\"5-1-运行过程中可能出现的问题\"><a href=\"#5-1-运行过程中可能出现的问题\" class=\"headerlink\" title=\"5.1 运行过程中可能出现的问题\"></a>5.1 运行过程中可能出现的问题</h2><h3 id=\"5-1-1-问题一\"><a href=\"#5-1-1-问题一\" class=\"headerlink\" title=\"5.1.1 问题一\"></a>5.1.1 问题一</h3><p>我在运行的时候出现了以下错误：</p>\n<p><img src=\"/posts/983a1c52/1685515894900-3d9a036b-beaf-4505-a394-039d87d10d82.png\" alt=\"报错 1\"></p>\n<p>由于报错的是 core 模块，所以在 gradle 中找到 core 模块，先执行 clean，然后 build，执行完毕后重新运行程序，问题解决。</p>\n<p><img src=\"/posts/983a1c52/1685515903538-7acd0039-35d6-48d3-8535-bd3659e3bbc8.png\" alt=\"Clean\"></p>\n<p><img src=\"/posts/983a1c52/1685515909414-1dbb5934-710e-4d30-bc59-a1e4b47d51ce.png\" alt=\"运行成功截图\"></p>\n"}],"PostAsset":[{"_id":"source/_posts/Arthas/1685446464667-5b9471f9-ff69-4e3e-a665-9235f11676cb.png","post":"clkurnr3u0001xou9gxqx8jwp","slug":"1685446464667-5b9471f9-ff69-4e3e-a665-9235f11676cb.png","modified":1,"renderable":1},{"_id":"source/_posts/Arthas/1685498254758-2eb0afda-67ca-4d45-9a87-c3c08b555c70.png","post":"clkurnr3u0001xou9gxqx8jwp","slug":"1685498254758-2eb0afda-67ca-4d45-9a87-c3c08b555c70.png","modified":1,"renderable":1},{"_id":"source/_posts/使用docker-compose安装常用中间件/image-20230612160800809.png","post":"clkurnr440007xou93jeqbsnb","slug":"image-20230612160800809.png","modified":1,"renderable":1},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515451815-c83a27f4-385a-42d9-8156-a24808c36be0.png","post":"clkurnr450008xou96g877lwo","slug":"1685515451815-c83a27f4-385a-42d9-8156-a24808c36be0.png","modified":1,"renderable":1},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515617531-5c3d6c65-6af1-42be-8572-11f4717c6fa4.png","post":"clkurnr450008xou96g877lwo","slug":"1685515617531-5c3d6c65-6af1-42be-8572-11f4717c6fa4.png","modified":1,"renderable":1},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515622726-73454c6c-2a1f-448b-8e14-6080485a8a56.png","post":"clkurnr450008xou96g877lwo","slug":"1685515622726-73454c6c-2a1f-448b-8e14-6080485a8a56.png","modified":1,"renderable":1},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515713115-b417e4cf-fa0e-4376-b06b-b524e144cbe9.png","post":"clkurnr450008xou96g877lwo","slug":"1685515713115-b417e4cf-fa0e-4376-b06b-b524e144cbe9.png","modified":1,"renderable":1},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515818638-aa54c79e-7e57-4441-9757-ea00a0bf6274.png","post":"clkurnr450008xou96g877lwo","slug":"1685515818638-aa54c79e-7e57-4441-9757-ea00a0bf6274.png","modified":1,"renderable":1},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515894900-3d9a036b-beaf-4505-a394-039d87d10d82.png","post":"clkurnr450008xou96g877lwo","slug":"1685515894900-3d9a036b-beaf-4505-a394-039d87d10d82.png","modified":1,"renderable":1},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515903538-7acd0039-35d6-48d3-8535-bd3659e3bbc8.png","post":"clkurnr450008xou96g877lwo","slug":"1685515903538-7acd0039-35d6-48d3-8535-bd3659e3bbc8.png","modified":1,"renderable":1},{"_id":"source/_posts/使用-IDEA-构建-Spring5-3-10-源码/1685515909414-1dbb5934-710e-4d30-bc59-a1e4b47d51ce.png","post":"clkurnr450008xou96g877lwo","slug":"1685515909414-1dbb5934-710e-4d30-bc59-a1e4b47d51ce.png","modified":1,"renderable":1}],"PostCategory":[{"post_id":"clkurnr3y0003xou93etu7dpm","category_id":"clkurnr460009xou91sv0bj7z","_id":"clkurnr49000gxou952rthar2"},{"post_id":"clkurnr440007xou93jeqbsnb","category_id":"clkurnr48000fxou95hw4d28k","_id":"clkurnr4a000lxou9awuc54i3"},{"post_id":"clkurnr3u0001xou9gxqx8jwp","category_id":"clkurnr400004xou9556w626l","_id":"clkurnr4a000pxou9fgjbfo3y"},{"post_id":"clkurnr3u0001xou9gxqx8jwp","category_id":"clkurnr49000ixou9cf0k6fm2","_id":"clkurnr4b000sxou91xdd1wgw"},{"post_id":"clkurnr450008xou96g877lwo","category_id":"clkurnr400004xou9556w626l","_id":"clkurnr4d0012xou94d3af2j6"},{"post_id":"clkurnr450008xou96g877lwo","category_id":"clkurnr4a000nxou9g9ls0rfh","_id":"clkurnr4d0013xou9b5x74616"},{"post_id":"clkurnr450008xou96g877lwo","category_id":"clkurnr4b000uxou9bhe2flhl","_id":"clkurnr4d0014xou95q238em9"},{"post_id":"clkurnr450008xou96g877lwo","category_id":"clkurnr4c0010xou9c2bubyjb","_id":"clkurnr4d0015xou9cw30djz7"},{"post_id":"clkurnr430006xou97v7hgtat","category_id":"clkurnr400004xou9556w626l","_id":"clkurnr4d0016xou9a6oigf9j"},{"post_id":"clkurnr430006xou97v7hgtat","category_id":"clkurnr4a000nxou9g9ls0rfh","_id":"clkurnr4d0017xou90bde1xoa"},{"post_id":"clkurnr430006xou97v7hgtat","category_id":"clkurnr4b000uxou9bhe2flhl","_id":"clkurnr4d0018xou94oby0cfn"},{"post_id":"clkurnr430006xou97v7hgtat","category_id":"clkurnr4c0010xou9c2bubyjb","_id":"clkurnr4d0019xou9d3eb3nxj"}],"PostTag":[{"post_id":"clkurnr3u0001xou9gxqx8jwp","tag_id":"clkurnr420005xou9ehx09i1i","_id":"clkurnr46000bxou93ni3gfzn"},{"post_id":"clkurnr3y0003xou93etu7dpm","tag_id":"clkurnr46000axou90o3m8xud","_id":"clkurnr48000exou97jth9byw"},{"post_id":"clkurnr430006xou97v7hgtat","tag_id":"clkurnr47000dxou9ekpa95k7","_id":"clkurnr4a000kxou96uga13pr"},{"post_id":"clkurnr430006xou97v7hgtat","tag_id":"clkurnr49000hxou96bmkhgwt","_id":"clkurnr4a000mxou96g8h064h"},{"post_id":"clkurnr440007xou93jeqbsnb","tag_id":"clkurnr49000jxou92fm9gipa","_id":"clkurnr4b000txou95zpce8f9"},{"post_id":"clkurnr440007xou93jeqbsnb","tag_id":"clkurnr4a000oxou9b60v7vym","_id":"clkurnr4b000vxou993siboiu"},{"post_id":"clkurnr450008xou96g877lwo","tag_id":"clkurnr47000dxou9ekpa95k7","_id":"clkurnr4c000yxou98si58ous"},{"post_id":"clkurnr450008xou96g877lwo","tag_id":"clkurnr49000hxou96bmkhgwt","_id":"clkurnr4c000zxou9gb6f3zou"}],"Tag":[{"name":"Arthas","_id":"clkurnr420005xou9ehx09i1i"},{"name":"PostgreSQL","_id":"clkurnr46000axou90o3m8xud"},{"name":"Java","_id":"clkurnr47000dxou9ekpa95k7"},{"name":"Spring","_id":"clkurnr49000hxou96bmkhgwt"},{"name":"docker","_id":"clkurnr49000jxou92fm9gipa"},{"name":"docker-compose","_id":"clkurnr4a000oxou9b60v7vym"}]}}